{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","main.js","node_modules/backbone.marionette/lib/core/backbone.marionette.js","node_modules/backbone.marionette/node_modules/backbone.babysitter/lib/backbone.babysitter.js","node_modules/backbone.marionette/node_modules/backbone.wreqr/lib/backbone.wreqr.js","node_modules/modui-popup/moduiPopup.js","node_modules/modui-popup/node_modules/modui-base/modui-base.js","node_modules/modui-popup/node_modules/modui-base/node_modules/backbone-courier/src/backbone.courier.js","node_modules/modui-popup/node_modules/modui-base/node_modules/backbone-handle/backbone.handle.js","node_modules/modui-popup/node_modules/modui-base/node_modules/backbone-subviews/backbone.subviews.js","node_modules/modui-popup/node_modules/modui-base/node_modules/backbone-view-options/backbone.viewOptions.js","node_modules/typeahead.js/dist/typeahead.bundle.js","src/js/citations/controllers/index.js","src/js/citations/index.js","src/js/citations/links/index.js","src/js/citations/models/citation-model.js","src/js/citations/routers/index.js","src/js/citations/templates/citation-intro.tpl","src/js/citations/templates/citation-layout.tpl","src/js/citations/templates/citation-step-1.tpl","src/js/citations/templates/container-form.tpl","src/js/citations/templates/source-form.tpl","src/js/citations/views/citation-intro-view.js","src/js/citations/views/citation-step1-view.js","src/js/citations/views/citation-view.js","src/js/citations/views/layout-view.js","src/js/data/searchTerms.json","src/js/main.js","src/js/page-menu/index.js","src/js/search-hints/index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","root","factory","define","amd","Backbone","_","Marionette","Mn","window","this","previousMarionette","previousMn","VERSION","noConflict","Deferred","$","FEATURES","isEnabled","name","extend","Model","isNodeAttached","el","contains","document","documentElement","mergeOptions","options","keys","pick","getOption","target","optionName","undefined","proxyGetOption","_getValue","value","context","params","isFunction","apply","normalizeMethods","hash","reduce","normalizedHash","method","normalizeUIString","uiString","ui","replace","slice","normalizeUIKeys","memo","val","key","normalizedKey","normalizeUIValues","properties","each","isString","isObject","isArray","property","propertyVal","actAsCollection","object","listProperty","methods","list","values","result","args","concat","toArray","arguments","deprecate","message","test","prev","next","url","_cache","_warn","console","warn","log","_triggerMethod","getEventName","match","prefix","eventName","toUpperCase","splitter","event","noEventArg","methodName","rest","trigger","drop","triggerMethod","triggerMethodOn","fnc","MonitorDOMRefresh","view","handleShow","_isShown","triggerDOMRefresh","handleRender","_isRendered","_isDomRefreshMonitored","on","show","render","bindFromStrings","entity","evt","methodNames","split","listenTo","bindToFunction","unbindFromStrings","stopListening","unbindToFunction","iterateEvents","bindings","functionCallback","stringCallback","bindEntityEvents","unbindEntityEvents","proxyBindEntityEvents","proxyUnbindEntityEvents","errorProps","urlRoot","constructor","error","captureStackTrace","toString","Callbacks","_deferred","_callbacks","prototype","add","callback","contextOverride","promise","push","cb","ctx","then","run","resolve","reset","callbacks","Controller","initialize","Events","destroy","off","Object","Region","$el","getEl","_ensureElement","_ensureViewIsIntact","showOptions","isDifferentView","currentView","preventDestroy","forceShow","isChangingView","_shouldDestroyView","_shouldShowView","_parent","empty","once","_renderView","attachedRegion","displayedViews","attachOptions","triggerBeforeAttach","triggerAttach","_displayedViews","_triggerAttach","attachHtml","views","union","supportsRenderLifecycle","selector","isDestroyed","cid","parentEl","contents","detach","appendChild","emptyOptions","_destroyView","supportsDestroyLifecycle","remove","attachView","hasView","buildRegion","regionConfig","DefaultRegionClass","_buildRegionFromSelector","regionClass","_buildRegionFromObject","_buildRegionFromRegionClass","RegionClass","omit","RegionManager","_regions","addRegions","regionDefinitions","defaults","regions","definition","addRegion","region","_store","get","getRegions","clone","removeRegion","_remove","removeRegions","emptyRegions","invoke","TemplateCache","templateId","templateCaches","cachedTemplate","load","clear","compiledTemplate","template","loadTemplate","compileTemplate","$template","html","rawTemplate","Renderer","data","templateFunc","View","bind","_behaviors","Behaviors","getTemplate","serializeModel","model","toJSON","mixinTemplateHelpers","templateHelpers","uiBindings","configureTriggers","triggers","events","_buildViewTrigger","delegateEvents","_delegateDOMEvents","collection","behavior","eventsArg","isUndefined","combinedEvents","behaviorEvents","behaviorTriggers","undelegateEvents","unbindUIElements","isRendered","bindUIElements","_bindUIElements","_uiBindings","_unbindUIElements","triggerDef","preventDefault","stopPropagation","setElement","ret","_triggerEventOnBehaviors","_triggerEventOnParentLayout","behaviors","layoutView","_parentLayoutView","eventPrefix","prefixedEventName","callArgs","childEvents","normalizedChildEvents","_getImmediateChildren","_getNestedViews","children","parent","LayoutView","ItemView","serializeData","items","serializeCollection","_renderTemplate","attachElContent","CollectionView","childViewEventPrefix","sort","_initialEvents","_initChildViewStorage","before:show","_onBeforeShowCalled","_onShowCalled","before:attach","_onBeforeAttachCalled","attach","_onAttachCalled","initRenderBuffer","_bufferedChildren","startBuffering","isBuffering","endBuffering","nestedViews","canTriggerAttach","_triggerMethodMany","_triggerBeforeAttach","attachBuffer","_createBuffer","targets","source","_onCollectionAdd","_onCollectionRemove","_sortViews","child","opts","index","at","indexOf","_filteredSortedModels","_shouldAddChild","destroyEmptyView","ChildView","getChildView","addChild","findByModel","removeChildView","checkEmpty","childView","_renderChildren","reorder","models","anyModelsAdded","some","elsToReorder","map","_index","filteredOutViews","filter","_appendReorderedChildren","resortView","orderChanged","find","item","_emptyViewIndex","append","destroyChildren","isEmpty","showEmptyView","showCollection","addedAt","viewComparator","getViewComparator","Math","min","max","addedModel","_sortModelsBy","splice","comparator","sortBy","EmptyView","getEmptyView","_showingEmptyView","addEmptyView","emptyViewOptions","buildChildView","proxyChildEvents","_getViewAndNested","renderChildView","childViewOptions","_updateIndices","_addChildView","increment","laterView","ChildViewClass","collectionView","buffer","elBuffer","createDocumentFragment","b","_insertBefore","_insertAfter","findPosition","before","ChildViewContainer","destroyOptions","shouldCheckEmpty","childViews","identity","rootEvent","_views","CompositeView","partial","_isRendering","resetChildViewContainer","compositeView","$container","getChildViewContainer","containerView","$childViewContainer","container","childViewContainer","charAt","substr","destroyImmediate","_firstRender","_initializeRegions","_reInitializeRegions","regionManager","showChildView","regionName","getRegion","_buildRegions","_initRegionManager","regionOptions","getRegionManager","chain","pluck","compact","Behavior","proxyViewProperties","parseBehaviors","wrap","BehaviorTriggersBuilder","_view","_triggers","getBehaviorsUI","delegateEventSplitter","triggerBuilder","buildBehaviorTriggers","_behaviorsEvents","_events","j","behaviour","join","eventKey","handler","behaviorsLookup","getBehaviorClass","behaviorClass","BehaviorClass","nestedBehaviors","flatten","_buildTriggerHandlersForBehavior","triggersHash","_setHandlerForBehavior","triggerKey","triggerName","AppRouter","Router","appRoutes","controller","_getController","processAppRoutes","_processOnRoute","appRoute","route","_addAppRoute","routeName","routeArgs","onRoute","routePath","invert","routeNames","reverse","Application","_initCallbacks","submodules","_initChannel","execute","commands","request","reqres","addInitializer","initializer","start","_regionManager","moduleNames","moduleDefinition","ModuleClass","Module","getClass","unshift","create","optionRegions","channelName","channel","Wreqr","radio","vent","moduleName","app","_setupInitializersAndFinalizers","startWithParent","_initializerCallbacks","addFinalizer","_finalizerCallbacks","_isInitialized","mod","stop","addDefinition","customArgs","_runModuleDefinition","moduleDefinitions","parentModule","_getModule","_addModuleDefinition","def","moduleClass","fn","_getDefine","_getStartWithParent","_addStartWithParent","swp","startWithParentIsConfigured","self","backbone.babysitter","backbone.wreqr",2,"previousChildViewContainer","Container","_indexByModel","_indexByCustom","_updateLength","customIndex","viewCid","findByModelCid","modelCid","findByCid","findByCustom","findByIndex","any","tail","size",3,"previousWreqr","Handlers","_wreqrHandlers","setHandlers","handlers","setHandler","config","hasHandler","getHandler","removeHandler","removeAllHandlers","CommandStorage","_commands","getCommands","commandName","command","instances","addCommand","clearCommands","Commands","storageType","_initializeStorage","_executeCommands","storage","StorageType","RequestResponse","EventAggregator","EA","Channel","connectEvents","_connect","connectCommands","connectRequests","type","Radio","_channels","_proxyMethods","_getChannel","system","messageSystems","proxyMethod","messageSystem",4,"jQuery","Zepto","ModuiBase","Super","_attachWindowEventListeners","scroll","mOpenPopups","thisPopup","reposition","resize","_getNextPositionToTry","position","positionsToTry","positionIndex","lastPossibleViewElement","kState_Closed","kState_Open","kState_Closing","kFadeTime","kMinTimeAfterOpenBeforeCloseOnOutsideClick","kPositions","kPositionClasses","thisPosition","mWindowEventListenersAttached","ModuiPopup","strictPositioning","distanceAway","pointerOffset","keepWithinRect","top","scrollTop","bottom","height","left","right","width","closeOnOutsideClick","extraClassName","kPointerHeight","passMessages","*","className","_this","_setupTargetEl","_setState","setTimeout","targetEl","close","zIndex","popupZIndex","parseInt","css","isNaN","state","unbind","spawn","without","onClose","allowedPositions","tryAgainIfDimentionsChange","currentPosition","unique","cssPositionProps","firstPositionTried","targetWidth","round","outerWidth","targetHeight","outerHeight","popupWidth","popupHeight","popupMargin","pointerInsetForSidePositions","offsetParent","parentWidth","targetOffset","offset","currentPositionBeingTried","first","haveTriedOtherPositions","degreeOfUndesirabilityByPosition","allPositionsAreOutOfBounds","done","removeClass","addClass","_getDegreeOfUndesirabilityOfCurrentPosition","cantFitIntoKeepWithinRectInThisPosition","bestOfTheBadPositions","pairs","_onSubviewsRendered","myOffset","myWidth","myHeight","myRect","horizontalOverlap","veritcalOverlap","myRectArea","amountOutsideBoundingRect","documentRect","amountOutsideDocument","_onOptionsChanged","changedOptions","_getParentView","curElement","newState","attr","timeOpened","Date","getTime","open","popupInstance","signature","existingPopupsOfThisSignature","popupWeAreGoingTokeep","pop","setOptions","thisExtraPopup","thisPopupEl","modui-base",5,"ViewOptions","Courier","Handle","Subviews","viewOptions","courier","handle","subviews","returnValue","templateData","getOptions","attributes","_getTemplateData","resolveHandles","backbone-courier","backbone-handle","backbone-subviews","backbone-view-options",6,"prepareViewElement","getValueOfBestMatchingHashEntry","matchingEntries","subviewName","eventNameRegEx","RegExp","_getChildViewNamed","thisEntry","nonWildcardCharactersInEventName","hasSubviewQualifier","specificity","overriddenViewMethods","messageShouldBePassed","isRoundTripMessage","curParent","onMessages","TypeError","childViewName","element","delegate","retval",7,"assertOneAndOnlyOne","_exapandUIHandlesInHash","newEvents","uiElName",8,"_prerender","thisSubview","_postrender","subviewCreators","newSubview","thisPlaceHolderDiv","_createSubview","replaceWith","onSubviewsRendered","Array","removeSubviews","placeHolderDiv","subviewCreator",9,"returnExports","_normalizeOptionDeclarations","optionDeclarations","normalizedOptionDeclarations","thisOptionDeclaration","thisOptionName","thisOptionRequired","thisOptionDefaultValue","required","defaultValue","optionsDeclarationsProperty","optionsThatWereChanged","optionsThatWereChangedPreviousValues","thisOptionProperties","oldValue","newValue","onOptionsChanged","optionsNames",10,"a0","isMsie","navigator","userAgent","isBlankString","str","escapeRegExChars","obj","isNumber","isPlainObject","isElement","nodeType","isJQuery","toStr","proxy","reverseArgs","grep","every","mixin","x","getIdGenerator","counter","templatify","String","defer","debounce","func","wait","immediate","timeout","later","callNow","clearTimeout","throttle","previous","now","remaining","stringify","JSON","noop","tokenizers","whitespace","nonword","getObjTokenizer","tokenizer","tokens","k","LruCache","maxSize","set","List","head","Node","node","tailItem","moveToFront","PersistentStorage","namespace","override","ttlKey","keyMatcher","ls","LOCAL_STORAGE","_noop","encode","decode","parseJSON","gatherMatchingKeys","len","localStorage","setItem","removeItem","err","_prefix","_ttlKey","isExpired","_safeSet","getItem","ttl","Transport","cancelled","lastReq","_send","transport","_get","limiter","cache","sharedCache","pendingRequestsCount","pendingRequests","maxPendingRequests","setMaxPendingRequests","num","resetCache","_fingerprint","param","resp","that","fingerprint","fail","always","onDeckRequestArgs","jqXhr","cancel","SearchIndex","datumTokenizer","queryTokenizer","identify","normalizeTokens","token","toLowerCase","newNode","IDS","CHILDREN","array","seen","uniques","getIntersection","arrayA","arrayB","ai","bi","intersection","lenArrayA","lenArrayB","bootstrap","datums","trie","datum","id","chars","ch","shift","ids","search","query","matches","all","serialize","Prefetch","prepare","transform","thumbprint","cacheKey","protocol","_settings","dataType","store","location","fromCache","stored","fromNetwork","onError","onResponse","settings","Remote","cancelLastRequest","oParser","parsePrefetch","callbackToDeferred","ajax","parseRemote","wildcard","rateLimitBy","rateLimitWait","toRemotePrepare","toLimiter","prepareByReplace","prepareByWildcard","encodeURIComponent","idenityPrepare","onSuccess","deferred","reject","sorter","sufficient","local","prefetch","remote","Bloodhound","old","__ttAdapter","withAsync","sync","async","withoutAsync","_loadPrefetch","serialized","_initialize","addLocalToIndex","initPromise","force","processRemote","nonDuplicates","clearPrefetchCache","clearRemoteCache","ttAdapter","WWW","build","www","classes","defaultClassNames","buildCss","buildHtml","selectors","buildSelectors","c","wrapper","menu","v","display","hint","borderColor","boxShadow","opacity","input","verticalAlign","backgroundColor","inputWithNoHint","ltr","rtl","backgroundImage","dataset","suggestion","selectable","cursor","highlight","EventBus","deprecationMap","cursorchange","select","autocomplete","_trigger","$e","Event","isDefaultPrevented","deprecatedType","EventEmitter","types","bindContext","onAsync","onSync","syncFlush","asyncFlush","getFlush","nextTick","flush","getNextTick","nextTickFn","setImmediate","doc","getRegex","patterns","caseSensitive","wordsOnly","regexStr","escapedPatterns","pattern","tagName","hightlightTextNode","textNode","patternNode","wrapperNode","regex","exec","createElement","splitText","cloneNode","parentNode","replaceChild","traverse","childNode","TEXT_NODE_TYPE","childNodes","Input","$hint","$input","queryWhenFocused","hasFocus","$overflowHelper","buildOverflowHelper","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","areQueriesEquivalent","normalizeQuery","withModifier","altKey","ctrlKey","metaKey","shiftKey","specialKeyCodeMap",27,37,39,13,38,40,"_onBlur","resetInputValue","_onFocus","_onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","_setQuery","getInputValue","dir","silent","areEquivalent","hasDifferentWhitespace","onBlur","onFocus","onKeydown","onInput","focus","blur","getLangDir","getQuery","setQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","isValid","hasOverflow","is","constraint","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","Dataset","templates","notFound","isValidName","nameGenerator","limit","displayFn","getDisplayFn","displayKey","getTemplates","_resetLastSuggestion","suggestionTemplate","pending","header","footer","extractData","_overwrite","suggestions","_renderSuggestions","_renderPending","_renderNotFound","_empty","_append","$lastSuggestion","_appendSuggestions","$fragment","_getSuggestionsFragment","last","prepend","_getHeader","_getFooter","after","fragment","_injectQuery","_query","update","syncCalled","rendered","canceled","Menu","initializeDataset","oDataset","$node","appendTo","datasets","_onSelectableClick","currentTarget","_onRendered","toggleClass","_allDatasetsEmpty","_onCleared","_propagate","isDatasetEmpty","_getSelectables","_removeCursor","$selectable","getActiveSelectable","_ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","onSelectableClick","isOpen","hasClass","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","oldIndex","newIndex","eq","setCursor","getSelectableData","getTopSelectable","updateDataset","isValidUpdate","clearDataset","destroyDataset","DefaultMenu","_show","_hide","hide","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","_updateHint","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","_onWhitespaceChanged","_openIfActive","escapedQuery","frontMatchRegEx","enable","disable","deactivate","setVal","getVal","$candidate","payload","cancelMove","ttEach","$els","typeahead","buildHintFromInput","removeData","getBackgroundStyles","prop","removeAttr","spellcheck","tabindex","prepInput","attrs","style","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","revert","$wrapper","$elOrNull","defaultHint","defaultMenu","MenuConstructor","d","classNames","success","newVal",11,"App","output","citation1","author","title","callouts","publisher","pubdate","version","number","showCitationIntro","Content","Views","Layout","Intro","Citation","Models","Collection","showCitationForm","Step1",12,"router","./controllers","./links","./models/citation-model.js","./routers","./views/citation-intro-view.js","./views/citation-step1-view.js","./views/citation-view.js","./views/layout-view.js","history","pushState","href","navigate","substring","scrollTo",14,"containerNumber","order","nextOrder","getCitationString","modelAttrs","containerAttrs","sourceAttrs","formatAttribute","separator","filterAttrs","citation","updateNumbers",15,"","step-1",16,"__p",17,18,19,"__t",20,21,"introTemplate","../templates/citation-intro.tpl",22,"../templates/citation-step-1.tpl",23,"popup","sourceTemplate","containerTemplate","click .remove-container","focus input","blur input","keyup input","updateField","$field","newAttr","removeContainer","showPopup","fieldName","closest","hideHilite","click .add-container","onRender","updateCitation","addContainer","onRemoveChild","../templates/container-form.tpl","../templates/source-form.tpl","modui-popup",24,"layoutTemplate","intro","form","../templates/citation-layout.tpl",25,26,"underscore","./citations","./page-menu","./search-hints","backbone.marionette","$button","$targets","$parent","activeClass","hoverOutDelay","closeDropdown","removeEventListener","mouseover","mouseleave","touches","addEventListener",28,"findMatches","q","substrRegex","searchTerms","engine","submit","../data/searchTerms.json","typeahead.js"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n// MarionetteJS (Backbone.Marionette)\n// ----------------------------------\n// v2.4.4\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://marionettejs.com\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {\n      return (root.Marionette = root.Mn = factory(root, Backbone, _));\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    var Wreqr = require('backbone.wreqr');\n    var BabySitter = require('backbone.babysitter');\n    module.exports = factory(root, Backbone, _);\n  } else {\n    root.Marionette = root.Mn = factory(root, root.Backbone, root._);\n  }\n\n}(this, function(root, Backbone, _) {\n  'use strict';\n\n  var previousMarionette = root.Marionette;\n  var previousMn = root.Mn;\n\n  var Marionette = Backbone.Marionette = {};\n\n  Marionette.VERSION = '2.4.4';\n\n  Marionette.noConflict = function() {\n    root.Marionette = previousMarionette;\n    root.Mn = previousMn;\n    return this;\n  };\n\n  // Get the Deferred creator for later use\n  Marionette.Deferred = Backbone.$.Deferred;\n\n  Marionette.FEATURES = {\n  };\n  \n  Marionette.isEnabled = function(name) {\n    return !!Marionette.FEATURES[name];\n  };\n  \n  /* jshint unused: false *//* global console */\n  \n  // Helpers\n  // -------\n  \n  // Marionette.extend\n  // -----------------\n  \n  // Borrow the Backbone `extend` method so we can use it as needed\n  Marionette.extend = Backbone.Model.extend;\n  \n  // Marionette.isNodeAttached\n  // -------------------------\n  \n  // Determine if `el` is a child of the document\n  Marionette.isNodeAttached = function(el) {\n    return Backbone.$.contains(document.documentElement, el);\n  };\n  \n  // Merge `keys` from `options` onto `this`\n  Marionette.mergeOptions = function(options, keys) {\n    if (!options) { return; }\n    _.extend(this, _.pick(options, keys));\n  };\n  \n  // Marionette.getOption\n  // --------------------\n  \n  // Retrieve an object, function or other value from a target\n  // object or its `options`, with `options` taking precedence.\n  Marionette.getOption = function(target, optionName) {\n    if (!target || !optionName) { return; }\n    if (target.options && (target.options[optionName] !== undefined)) {\n      return target.options[optionName];\n    } else {\n      return target[optionName];\n    }\n  };\n  \n  // Proxy `Marionette.getOption`\n  Marionette.proxyGetOption = function(optionName) {\n    return Marionette.getOption(this, optionName);\n  };\n  \n  // Similar to `_.result`, this is a simple helper\n  // If a function is provided we call it with context\n  // otherwise just return the value. If the value is\n  // undefined return a default value\n  Marionette._getValue = function(value, context, params) {\n    if (_.isFunction(value)) {\n      value = params ? value.apply(context, params) : value.call(context);\n    }\n    return value;\n  };\n  \n  // Marionette.normalizeMethods\n  // ----------------------\n  \n  // Pass in a mapping of events => functions or function names\n  // and return a mapping of events => functions\n  Marionette.normalizeMethods = function(hash) {\n    return _.reduce(hash, function(normalizedHash, method, name) {\n      if (!_.isFunction(method)) {\n        method = this[method];\n      }\n      if (method) {\n        normalizedHash[name] = method;\n      }\n      return normalizedHash;\n    }, {}, this);\n  };\n  \n  // utility method for parsing @ui. syntax strings\n  // into associated selector\n  Marionette.normalizeUIString = function(uiString, ui) {\n    return uiString.replace(/@ui\\.[a-zA-Z_$0-9]*/g, function(r) {\n      return ui[r.slice(4)];\n    });\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector.\n  // Returns a new, non-mutated, parsed events hash.\n  Marionette.normalizeUIKeys = function(hash, ui) {\n    return _.reduce(hash, function(memo, val, key) {\n      var normalizedKey = Marionette.normalizeUIString(key, ui);\n      memo[normalizedKey] = val;\n      return memo;\n    }, {});\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given value for regions\n  // swaps the @ui with the associated selector\n  Marionette.normalizeUIValues = function(hash, ui, properties) {\n    _.each(hash, function(val, key) {\n      if (_.isString(val)) {\n        hash[key] = Marionette.normalizeUIString(val, ui);\n      } else if (_.isObject(val) && _.isArray(properties)) {\n        _.extend(val, Marionette.normalizeUIValues(_.pick(val, properties), ui));\n        /* Value is an object, and we got an array of embedded property names to normalize. */\n        _.each(properties, function(property) {\n          var propertyVal = val[property];\n          if (_.isString(propertyVal)) {\n            val[property] = Marionette.normalizeUIString(propertyVal, ui);\n          }\n        });\n      }\n    });\n    return hash;\n  };\n  \n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-121\n  Marionette.actAsCollection = function(object, listProperty) {\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n  \n    _.each(methods, function(method) {\n      object[method] = function() {\n        var list = _.values(_.result(this, listProperty));\n        var args = [list].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  };\n  \n  var deprecate = Marionette.deprecate = function(message, test) {\n    if (_.isObject(message)) {\n      message = (\n        message.prev + ' is going to be removed in the future. ' +\n        'Please use ' + message.next + ' instead.' +\n        (message.url ? ' See: ' + message.url : '')\n      );\n    }\n  \n    if ((test === undefined || !test) && !deprecate._cache[message]) {\n      deprecate._warn('Deprecation warning: ' + message);\n      deprecate._cache[message] = true;\n    }\n  };\n  \n  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};\n  deprecate._cache = {};\n  \n  /* jshint maxstatements: 14, maxcomplexity: 7 */\n  \n  // Trigger Method\n  // --------------\n  \n  Marionette._triggerMethod = (function() {\n    // split the event name on the \":\"\n    var splitter = /(^|:)(\\w)/gi;\n  \n    // take the event section (\"section1:section2:section3\")\n    // and turn it in to uppercase name\n    function getEventName(match, prefix, eventName) {\n      return eventName.toUpperCase();\n    }\n  \n    return function(context, event, args) {\n      var noEventArg = arguments.length < 3;\n      if (noEventArg) {\n        args = event;\n        event = args[0];\n      }\n  \n      // get the method name from the event name\n      var methodName = 'on' + event.replace(splitter, getEventName);\n      var method = context[methodName];\n      var result;\n  \n      // call the onMethodName if it exists\n      if (_.isFunction(method)) {\n        // pass all args, except the event name\n        result = method.apply(context, noEventArg ? _.rest(args) : args);\n      }\n  \n      // trigger the event, if a trigger method exists\n      if (_.isFunction(context.trigger)) {\n        if (noEventArg + args.length > 1) {\n          context.trigger.apply(context, noEventArg ? args : [event].concat(_.drop(args, 0)));\n        } else {\n          context.trigger(event);\n        }\n      }\n  \n      return result;\n    };\n  })();\n  \n  // Trigger an event and/or a corresponding method name. Examples:\n  //\n  // `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n  // call the \"onFoo\" method.\n  //\n  // `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n  // call the \"onFooBar\" method.\n  Marionette.triggerMethod = function(event) {\n    return Marionette._triggerMethod(this, arguments);\n  };\n  \n  // triggerMethodOn invokes triggerMethod on a specific context\n  //\n  // e.g. `Marionette.triggerMethodOn(view, 'show')`\n  // will trigger a \"show\" event or invoke onShow the view.\n  Marionette.triggerMethodOn = function(context) {\n    var fnc = _.isFunction(context.triggerMethod) ?\n                  context.triggerMethod :\n                  Marionette.triggerMethod;\n  \n    return fnc.apply(context, _.rest(arguments));\n  };\n  \n  // DOM Refresh\n  // -----------\n  \n  // Monitor a view's state, and after it has been rendered and shown\n  // in the DOM, trigger a \"dom:refresh\" event every time it is\n  // re-rendered.\n  \n  Marionette.MonitorDOMRefresh = function(view) {\n    if (view._isDomRefreshMonitored) { return; }\n    view._isDomRefreshMonitored = true;\n  \n    // track when the view has been shown in the DOM,\n    // using a Marionette.Region (or by other means of triggering \"show\")\n    function handleShow() {\n      view._isShown = true;\n      triggerDOMRefresh();\n    }\n  \n    // track when the view has been rendered\n    function handleRender() {\n      view._isRendered = true;\n      triggerDOMRefresh();\n    }\n  \n    // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n    function triggerDOMRefresh() {\n      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {\n        Marionette.triggerMethodOn(view, 'dom:refresh', view);\n      }\n    }\n  \n    view.on({\n      show: handleShow,\n      render: handleRender\n    });\n  };\n  \n  /* jshint maxparams: 5 */\n  \n  // Bind Entity Events & Unbind Entity Events\n  // -----------------------------------------\n  //\n  // These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\n  // to methods on a target object.\n  //\n  // The first parameter, `target`, must have the Backbone.Events module mixed in.\n  //\n  // The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\n  // any object that has Backbone.Events mixed in) to bind the events from.\n  //\n  // The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n  // configuration. Multiple handlers can be separated by a space. A\n  // function can be supplied instead of a string handler name.\n  \n  (function(Marionette) {\n    'use strict';\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function bindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n  \n        var method = target[methodName];\n        if (!method) {\n          throw new Marionette.Error('Method \"' + methodName +\n            '\" was configured as an event handler, but does not exist.');\n        }\n  \n        target.listenTo(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function bindToFunction(target, entity, evt, method) {\n      target.listenTo(entity, evt, method);\n    }\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function unbindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n        var method = target[methodName];\n        target.stopListening(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function unbindToFunction(target, entity, evt, method) {\n      target.stopListening(entity, evt, method);\n    }\n  \n    // generic looping function\n    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {\n      if (!entity || !bindings) { return; }\n  \n      // type-check bindings\n      if (!_.isObject(bindings)) {\n        throw new Marionette.Error({\n          message: 'Bindings must be an object or function.',\n          url: 'marionette.functions.html#marionettebindentityevents'\n        });\n      }\n  \n      // allow the bindings to be a function\n      bindings = Marionette._getValue(bindings, target);\n  \n      // iterate the bindings and bind them\n      _.each(bindings, function(methods, evt) {\n  \n        // allow for a function as the handler,\n        // or a list of event names as a string\n        if (_.isFunction(methods)) {\n          functionCallback(target, entity, evt, methods);\n        } else {\n          stringCallback(target, entity, evt, methods);\n        }\n  \n      });\n    }\n  \n    // Export Public API\n    Marionette.bindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n    };\n  \n    Marionette.unbindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n    };\n  \n    // Proxy `bindEntityEvents`\n    Marionette.proxyBindEntityEvents = function(entity, bindings) {\n      return Marionette.bindEntityEvents(this, entity, bindings);\n    };\n  \n    // Proxy `unbindEntityEvents`\n    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {\n      return Marionette.unbindEntityEvents(this, entity, bindings);\n    };\n  })(Marionette);\n  \n\n  // Error\n  // -----\n  \n  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n  \n  Marionette.Error = Marionette.extend.call(Error, {\n    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',\n  \n    constructor: function(message, options) {\n      if (_.isObject(message)) {\n        options = message;\n        message = options.message;\n      } else if (!options) {\n        options = {};\n      }\n  \n      var error = Error.call(this, message);\n      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n  \n      this.captureStackTrace();\n  \n      if (options.url) {\n        this.url = this.urlRoot + options.url;\n      }\n    },\n  \n    captureStackTrace: function() {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, Marionette.Error);\n      }\n    },\n  \n    toString: function() {\n      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n    }\n  });\n  \n  Marionette.Error.extend = Marionette.extend;\n  \n  // Callbacks\n  // ---------\n  \n  // A simple way of managing a collection of callbacks\n  // and executing them at a later point in time, using jQuery's\n  // `Deferred` object.\n  Marionette.Callbacks = function() {\n    this._deferred = Marionette.Deferred();\n    this._callbacks = [];\n  };\n  \n  _.extend(Marionette.Callbacks.prototype, {\n  \n    // Add a callback to be executed. Callbacks added here are\n    // guaranteed to execute, even if they are added after the\n    // `run` method is called.\n    add: function(callback, contextOverride) {\n      var promise = _.result(this._deferred, 'promise');\n  \n      this._callbacks.push({cb: callback, ctx: contextOverride});\n  \n      promise.then(function(args) {\n        if (contextOverride) { args.context = contextOverride; }\n        callback.call(args.context, args.options);\n      });\n    },\n  \n    // Run all registered callbacks with the context specified.\n    // Additional callbacks can be added after this has been run\n    // and they will still be executed.\n    run: function(options, context) {\n      this._deferred.resolve({\n        options: options,\n        context: context\n      });\n    },\n  \n    // Resets the list of callbacks to be run, allowing the same list\n    // to be run multiple times - whenever the `run` method is called.\n    reset: function() {\n      var callbacks = this._callbacks;\n      this._deferred = Marionette.Deferred();\n      this._callbacks = [];\n  \n      _.each(callbacks, function(cb) {\n        this.add(cb.cb, cb.ctx);\n      }, this);\n    }\n  });\n  \n  // Controller\n  // ----------\n  \n  // A multi-purpose object to use as a controller for\n  // modules and routers, and as a mediator for workflow\n  // and coordination of other objects, views, and more.\n  Marionette.Controller = function(options) {\n    this.options = options || {};\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(this.options);\n    }\n  };\n  \n  Marionette.Controller.extend = Marionette.extend;\n  \n  // Controller Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Controller.prototype, Backbone.Events, {\n    destroy: function() {\n      Marionette._triggerMethod(this, 'before:destroy', arguments);\n      Marionette._triggerMethod(this, 'destroy', arguments);\n  \n      this.stopListening();\n      this.off();\n      return this;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // A handy way to merge options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  \n  });\n  \n  // Object\n  // ------\n  \n  // A Base Class that other Classes should descend from.\n  // Object borrows many conventions and utilities from Backbone.\n  Marionette.Object = function(options) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n  \n    this.initialize.apply(this, arguments);\n  };\n  \n  Marionette.Object.extend = Marionette.extend;\n  \n  // Object Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Object.prototype, Backbone.Events, {\n  \n    //this is a noop method intended to be overridden by classes that extend from this base\n    initialize: function() {},\n  \n    destroy: function(options) {\n      options = options || {};\n  \n      this.triggerMethod('before:destroy', options);\n      this.triggerMethod('destroy', options);\n      this.stopListening();\n  \n      return this;\n    },\n  \n    // Import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // A handy way to merge options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */\n  \n  // Region\n  // ------\n  \n  // Manage the visual regions of your composite application. See\n  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n  \n  Marionette.Region = Marionette.Object.extend({\n    constructor: function(options) {\n  \n      // set options temporarily so that we can get `el`.\n      // options will be overriden by Object.constructor\n      this.options = options || {};\n      this.el = this.getOption('el');\n  \n      // Handle when this.el is passed in as a $ wrapped element.\n      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n  \n      if (!this.el) {\n        throw new Marionette.Error({\n          name: 'NoElError',\n          message: 'An \"el\" must be specified for a region.'\n        });\n      }\n  \n      this.$el = this.getEl(this.el);\n      Marionette.Object.call(this, options);\n    },\n  \n    // Displays a backbone view instance inside of the region.\n    // Handles calling the `render` method for you. Reads content\n    // directly from the `el` attribute. Also calls an optional\n    // `onShow` and `onDestroy` method on your view, just after showing\n    // or just before destroying the view, respectively.\n    // The `preventDestroy` option can be used to prevent a view from\n    // the old view being destroyed on show.\n    // The `forceShow` option can be used to force a view to be\n    // re-rendered if it's already shown in the region.\n    show: function(view, options) {\n      if (!this._ensureElement()) {\n        return;\n      }\n  \n      this._ensureViewIsIntact(view);\n      Marionette.MonitorDOMRefresh(view);\n  \n      var showOptions     = options || {};\n      var isDifferentView = view !== this.currentView;\n      var preventDestroy  = !!showOptions.preventDestroy;\n      var forceShow       = !!showOptions.forceShow;\n  \n      // We are only changing the view if there is a current view to change to begin with\n      var isChangingView = !!this.currentView;\n  \n      // Only destroy the current view if we don't want to `preventDestroy` and if\n      // the view given in the first argument is different than `currentView`\n      var _shouldDestroyView = isDifferentView && !preventDestroy;\n  \n      // Only show the view given in the first argument if it is different than\n      // the current view or if we want to re-show the view. Note that if\n      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.\n      var _shouldShowView = isDifferentView || forceShow;\n  \n      if (isChangingView) {\n        this.triggerMethod('before:swapOut', this.currentView, this, options);\n      }\n  \n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n  \n      if (_shouldDestroyView) {\n        this.empty();\n  \n      // A `destroy` event is attached to the clean up manually removed views.\n      // We need to detach this event when a new view is going to be shown as it\n      // is no longer relevant.\n      } else if (isChangingView && _shouldShowView) {\n        this.currentView.off('destroy', this.empty, this);\n      }\n  \n      if (_shouldShowView) {\n  \n        // We need to listen for if a view is destroyed\n        // in a way other than through the region.\n        // If this happens we need to remove the reference\n        // to the currentView since once a view has been destroyed\n        // we can not reuse it.\n        view.once('destroy', this.empty, this);\n  \n        // make this region the view's parent,\n        // It's important that this parent binding happens before rendering\n        // so that any events the child may trigger during render can also be\n        // triggered on the child's ancestor views\n        view._parent = this;\n        this._renderView(view);\n  \n        if (isChangingView) {\n          this.triggerMethod('before:swap', view, this, options);\n        }\n  \n        this.triggerMethod('before:show', view, this, options);\n        Marionette.triggerMethodOn(view, 'before:show', view, this, options);\n  \n        if (isChangingView) {\n          this.triggerMethod('swapOut', this.currentView, this, options);\n        }\n  \n        // An array of views that we're about to display\n        var attachedRegion = Marionette.isNodeAttached(this.el);\n  \n        // The views that we're about to attach to the document\n        // It's important that we prevent _getNestedViews from being executed unnecessarily\n        // as it's a potentially-slow method\n        var displayedViews = [];\n  \n        var attachOptions = _.extend({\n          triggerBeforeAttach: this.triggerBeforeAttach,\n          triggerAttach: this.triggerAttach\n        }, showOptions);\n  \n        if (attachedRegion && attachOptions.triggerBeforeAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews, 'before:');\n        }\n  \n        this.attachHtml(view);\n        this.currentView = view;\n  \n        if (attachedRegion && attachOptions.triggerAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews);\n        }\n  \n        if (isChangingView) {\n          this.triggerMethod('swap', view, this, options);\n        }\n  \n        this.triggerMethod('show', view, this, options);\n        Marionette.triggerMethodOn(view, 'show', view, this, options);\n  \n        return this;\n      }\n  \n      return this;\n    },\n  \n    triggerBeforeAttach: true,\n    triggerAttach: true,\n  \n    _triggerAttach: function(views, prefix) {\n      var eventName = (prefix || '') + 'attach';\n      _.each(views, function(view) {\n        Marionette.triggerMethodOn(view, eventName, view, this);\n      }, this);\n    },\n  \n    _displayedViews: function(view) {\n      return _.union([view], _.result(view, '_getNestedViews') || []);\n    },\n  \n    _renderView: function(view) {\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:render', view);\n      }\n      view.render();\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'render', view);\n      }\n    },\n  \n    _ensureElement: function() {\n      if (!_.isObject(this.el)) {\n        this.$el = this.getEl(this.el);\n        this.el = this.$el[0];\n      }\n  \n      if (!this.$el || this.$el.length === 0) {\n        if (this.getOption('allowMissingEl')) {\n          return false;\n        } else {\n          throw new Marionette.Error('An \"el\" ' + this.$el.selector + ' must exist in DOM');\n        }\n      }\n      return true;\n    },\n  \n    _ensureViewIsIntact: function(view) {\n      if (!view) {\n        throw new Marionette.Error({\n          name: 'ViewNotValid',\n          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\n        });\n      }\n  \n      if (view.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + view.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Override this method to change how the region finds the DOM\n    // element that it manages. Return a jQuery selector object scoped\n    // to a provided parent el or the document if none exists.\n    getEl: function(el) {\n      return Backbone.$(el, Marionette._getValue(this.options.parentEl, this));\n    },\n  \n    // Override this method to change how the new view is\n    // appended to the `$el` that the region is managing\n    attachHtml: function(view) {\n      this.$el.contents().detach();\n  \n      this.el.appendChild(view.el);\n    },\n  \n    // Destroy the current view, if there is one. If there is no\n    // current view, it does nothing and returns immediately.\n    empty: function(options) {\n      var view = this.currentView;\n  \n      var emptyOptions = options || {};\n      var preventDestroy  = !!emptyOptions.preventDestroy;\n      // If there is no view in the region\n      // we should not remove anything\n      if (!view) { return this; }\n  \n      view.off('destroy', this.empty, this);\n      this.triggerMethod('before:empty', view);\n      if (!preventDestroy) {\n        this._destroyView();\n      }\n      this.triggerMethod('empty', view);\n  \n      // Remove region pointer to the currentView\n      delete this.currentView;\n  \n      if (preventDestroy) {\n        this.$el.contents().detach();\n      }\n  \n      return this;\n    },\n  \n    // call 'destroy' or 'remove', depending on which is found\n    // on the view (if showing a raw Backbone view or a Marionette View)\n    _destroyView: function() {\n      var view = this.currentView;\n      if (view.isDestroyed) { return; }\n  \n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:destroy', view);\n      }\n      if (view.destroy) {\n        view.destroy();\n      } else {\n        view.remove();\n  \n        // appending isDestroyed to raw Backbone View allows regions\n        // to throw a ViewDestroyedError for this view\n        view.isDestroyed = true;\n      }\n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'destroy', view);\n      }\n    },\n  \n    // Attach an existing view to the region. This\n    // will not call `render` or `onShow` for the new view,\n    // and will not replace the current HTML for the `el`\n    // of the region.\n    attachView: function(view) {\n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n      view._parent = this;\n      this.currentView = view;\n      return this;\n    },\n  \n    // Checks whether a view is currently present within\n    // the region. Returns `true` if there is and `false` if\n    // no view is present.\n    hasView: function() {\n      return !!this.currentView;\n    },\n  \n    // Reset the region by destroying any existing view and\n    // clearing out the cached `$el`. The next time a view\n    // is shown via this region, the region will re-query the\n    // DOM for the region's `el`.\n    reset: function() {\n      this.empty();\n  \n      if (this.$el) {\n        this.el = this.$el.selector;\n      }\n  \n      delete this.$el;\n      return this;\n    }\n  \n  },\n  \n  // Static Methods\n  {\n  \n    // Build an instance of a region by passing in a configuration object\n    // and a default region class to use if none is specified in the config.\n    //\n    // The config object should either be a string as a jQuery DOM selector,\n    // a Region class directly, or an object literal that specifies a selector,\n    // a custom regionClass, and any options to be supplied to the region:\n    //\n    // ```js\n    // {\n    //   selector: \"#foo\",\n    //   regionClass: MyCustomRegion,\n    //   allowMissingEl: false\n    // }\n    // ```\n    //\n    buildRegion: function(regionConfig, DefaultRegionClass) {\n      if (_.isString(regionConfig)) {\n        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);\n      }\n  \n      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {\n        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);\n      }\n  \n      if (_.isFunction(regionConfig)) {\n        return this._buildRegionFromRegionClass(regionConfig);\n      }\n  \n      throw new Marionette.Error({\n        message: 'Improper region configuration type.',\n        url: 'marionette.region.html#region-configuration-types'\n      });\n    },\n  \n    // Build the region from a string selector like '#foo-region'\n    _buildRegionFromSelector: function(selector, DefaultRegionClass) {\n      return new DefaultRegionClass({el: selector});\n    },\n  \n    // Build the region from a configuration object\n    // ```js\n    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }\n    // ```\n    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {\n      var RegionClass = regionConfig.regionClass || DefaultRegionClass;\n      var options = _.omit(regionConfig, 'selector', 'regionClass');\n  \n      if (regionConfig.selector && !options.el) {\n        options.el = regionConfig.selector;\n      }\n  \n      return new RegionClass(options);\n    },\n  \n    // Build the region directly from a given `RegionClass`\n    _buildRegionFromRegionClass: function(RegionClass) {\n      return new RegionClass();\n    }\n  });\n  \n  // Region Manager\n  // --------------\n  \n  // Manage one or more related `Marionette.Region` objects.\n  Marionette.RegionManager = Marionette.Controller.extend({\n    constructor: function(options) {\n      this._regions = {};\n      this.length = 0;\n  \n      Marionette.Controller.call(this, options);\n  \n      this.addRegions(this.getOption('regions'));\n    },\n  \n    // Add multiple regions using an object literal or a\n    // function that returns an object literal, where\n    // each key becomes the region name, and each value is\n    // the region definition.\n    addRegions: function(regionDefinitions, defaults) {\n      regionDefinitions = Marionette._getValue(regionDefinitions, this, arguments);\n  \n      return _.reduce(regionDefinitions, function(regions, definition, name) {\n        if (_.isString(definition)) {\n          definition = {selector: definition};\n        }\n        if (definition.selector) {\n          definition = _.defaults({}, definition, defaults);\n        }\n  \n        regions[name] = this.addRegion(name, definition);\n        return regions;\n      }, {}, this);\n    },\n  \n    // Add an individual region to the region manager,\n    // and return the region instance\n    addRegion: function(name, definition) {\n      var region;\n  \n      if (definition instanceof Marionette.Region) {\n        region = definition;\n      } else {\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      }\n  \n      this.triggerMethod('before:add:region', name, region);\n  \n      region._parent = this;\n      this._store(name, region);\n  \n      this.triggerMethod('add:region', name, region);\n      return region;\n    },\n  \n    // Get a region by name\n    get: function(name) {\n      return this._regions[name];\n    },\n  \n    // Gets all the regions contained within\n    // the `regionManager` instance.\n    getRegions: function() {\n      return _.clone(this._regions);\n    },\n  \n    // Remove a region by name\n    removeRegion: function(name) {\n      var region = this._regions[name];\n      this._remove(name, region);\n  \n      return region;\n    },\n  \n    // Empty all regions in the region manager, and\n    // remove them\n    removeRegions: function() {\n      var regions = this.getRegions();\n      _.each(this._regions, function(region, name) {\n        this._remove(name, region);\n      }, this);\n  \n      return regions;\n    },\n  \n    // Empty all regions in the region manager, but\n    // leave them attached\n    emptyRegions: function() {\n      var regions = this.getRegions();\n      _.invoke(regions, 'empty');\n      return regions;\n    },\n  \n    // Destroy all regions and shut down the region\n    // manager entirely\n    destroy: function() {\n      this.removeRegions();\n      return Marionette.Controller.prototype.destroy.apply(this, arguments);\n    },\n  \n    // internal method to store regions\n    _store: function(name, region) {\n      if (!this._regions[name]) {\n        this.length++;\n      }\n  \n      this._regions[name] = region;\n    },\n  \n    // internal method to remove a region\n    _remove: function(name, region) {\n      this.triggerMethod('before:remove:region', name, region);\n      region.empty();\n      region.stopListening();\n  \n      delete region._parent;\n      delete this._regions[name];\n      this.length--;\n      this.triggerMethod('remove:region', name, region);\n    }\n  });\n  \n  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');\n  \n\n  // Template Cache\n  // --------------\n  \n  // Manage templates stored in `<script>` blocks,\n  // caching them for faster access.\n  Marionette.TemplateCache = function(templateId) {\n    this.templateId = templateId;\n  };\n  \n  // TemplateCache object-level methods. Manage the template\n  // caches from these method calls instead of creating\n  // your own TemplateCache instances\n  _.extend(Marionette.TemplateCache, {\n    templateCaches: {},\n  \n    // Get the specified template by id. Either\n    // retrieves the cached version, or loads it\n    // from the DOM.\n    get: function(templateId, options) {\n      var cachedTemplate = this.templateCaches[templateId];\n  \n      if (!cachedTemplate) {\n        cachedTemplate = new Marionette.TemplateCache(templateId);\n        this.templateCaches[templateId] = cachedTemplate;\n      }\n  \n      return cachedTemplate.load(options);\n    },\n  \n    // Clear templates from the cache. If no arguments\n    // are specified, clears all templates:\n    // `clear()`\n    //\n    // If arguments are specified, clears each of the\n    // specified templates from the cache:\n    // `clear(\"#t1\", \"#t2\", \"...\")`\n    clear: function() {\n      var i;\n      var args = _.toArray(arguments);\n      var length = args.length;\n  \n      if (length > 0) {\n        for (i = 0; i < length; i++) {\n          delete this.templateCaches[args[i]];\n        }\n      } else {\n        this.templateCaches = {};\n      }\n    }\n  });\n  \n  // TemplateCache instance methods, allowing each\n  // template cache object to manage its own state\n  // and know whether or not it has been loaded\n  _.extend(Marionette.TemplateCache.prototype, {\n  \n    // Internal method to load the template\n    load: function(options) {\n      // Guard clause to prevent loading this template more than once\n      if (this.compiledTemplate) {\n        return this.compiledTemplate;\n      }\n  \n      // Load the template and compile it\n      var template = this.loadTemplate(this.templateId, options);\n      this.compiledTemplate = this.compileTemplate(template, options);\n  \n      return this.compiledTemplate;\n    },\n  \n    // Load a template from the DOM, by default. Override\n    // this method to provide your own template retrieval\n    // For asynchronous loading with AMD/RequireJS, consider\n    // using a template-loader plugin as described here:\n    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n    loadTemplate: function(templateId, options) {\n      var $template = Backbone.$(templateId);\n  \n      if (!$template.length) {\n        throw new Marionette.Error({\n          name: 'NoTemplateError',\n          message: 'Could not find template: \"' + templateId + '\"'\n        });\n      }\n      return $template.html();\n    },\n  \n    // Pre-compile the template before caching it. Override\n    // this method if you do not need to pre-compile a template\n    // (JST / RequireJS for example) or if you want to change\n    // the template engine used (Handebars, etc).\n    compileTemplate: function(rawTemplate, options) {\n      return _.template(rawTemplate, options);\n    }\n  });\n  \n  // Renderer\n  // --------\n  \n  // Render a template with data by passing in the template\n  // selector and the data to render.\n  Marionette.Renderer = {\n  \n    // Render a template with data. The `template` parameter is\n    // passed to the `TemplateCache` object to retrieve the\n    // template function. Override this method to provide your own\n    // custom rendering and template handling for all of Marionette.\n    render: function(template, data) {\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'TemplateNotFoundError',\n          message: 'Cannot render the template since its false, null or undefined.'\n        });\n      }\n  \n      var templateFunc = _.isFunction(template) ? template : Marionette.TemplateCache.get(template);\n  \n      return templateFunc(data);\n    }\n  };\n  \n\n  /* jshint maxlen: 114, nonew: false */\n  // View\n  // ----\n  \n  // The core view class that other Marionette views extend from.\n  Marionette.View = Backbone.View.extend({\n    isDestroyed: false,\n    supportsRenderLifecycle: true,\n    supportsDestroyLifecycle: true,\n  \n    constructor: function(options) {\n      this.render = _.bind(this.render, this);\n  \n      options = Marionette._getValue(options, this);\n  \n      // this exposes view options to the view initializer\n      // this is a backfill since backbone removed the assignment\n      // of this.options\n      // at some point however this may be removed\n      this.options = _.extend({}, _.result(this, 'options'), options);\n  \n      this._behaviors = Marionette.Behaviors(this);\n  \n      Backbone.View.call(this, this.options);\n  \n      Marionette.MonitorDOMRefresh(this);\n    },\n  \n    // Get the template for this view\n    // instance. You can set a `template` attribute in the view\n    // definition or pass a `template: \"whatever\"` parameter in\n    // to the constructor options.\n    getTemplate: function() {\n      return this.getOption('template');\n    },\n  \n    // Serialize a model by returning its attributes. Clones\n    // the attributes to allow modification.\n    serializeModel: function(model) {\n      return model.toJSON.apply(model, _.rest(arguments));\n    },\n  \n    // Mix in template helper methods. Looks for a\n    // `templateHelpers` attribute, which can either be an\n    // object literal, or a function that returns an object\n    // literal. All methods and attributes from this object\n    // are copies to the object passed in.\n    mixinTemplateHelpers: function(target) {\n      target = target || {};\n      var templateHelpers = this.getOption('templateHelpers');\n      templateHelpers = Marionette._getValue(templateHelpers, this);\n      return _.extend(target, templateHelpers);\n    },\n  \n    // normalize the keys of passed hash with the views `ui` selectors.\n    // `{\"@ui.foo\": \"bar\"}`\n    normalizeUIKeys: function(hash) {\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));\n    },\n  \n    // normalize the values of passed hash with the views `ui` selectors.\n    // `{foo: \"@ui.bar\"}`\n    normalizeUIValues: function(hash, properties) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIValues(hash, uiBindings || ui, properties);\n    },\n  \n    // Configure `triggers` to forward DOM events to view\n    // events. `triggers: {\"click .foo\": \"do:foo\"}`\n    configureTriggers: function() {\n      if (!this.triggers) { return; }\n  \n      // Allow `triggers` to be configured as a function\n      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n  \n      // Configure the triggers, prevent default\n      // action and stop propagation of DOM events\n      return _.reduce(triggers, function(events, value, key) {\n        events[key] = this._buildViewTrigger(value);\n        return events;\n      }, {}, this);\n    },\n  \n    // Overriding Backbone.View's delegateEvents to handle\n    // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n    delegateEvents: function(events) {\n      this._delegateDOMEvents(events);\n      this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // internal method to delegate DOM events and triggers\n    _delegateDOMEvents: function(eventsArg) {\n      var events = Marionette._getValue(eventsArg || this.events, this);\n  \n      // normalize ui keys\n      events = this.normalizeUIKeys(events);\n      if (_.isUndefined(eventsArg)) {this.events = events;}\n  \n      var combinedEvents = {};\n  \n      // look up if this view has behavior events\n      var behaviorEvents = _.result(this, 'behaviorEvents') || {};\n      var triggers = this.configureTriggers();\n      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};\n  \n      // behavior events will be overriden by view events and or triggers\n      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);\n  \n      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n    },\n  \n    // Overriding Backbone.View's undelegateEvents to handle unbinding\n    // the `triggers`, `modelEvents`, and `collectionEvents` config\n    undelegateEvents: function() {\n      Backbone.View.prototype.undelegateEvents.apply(this, arguments);\n  \n      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // Internal helper method to verify whether the view hasn't been destroyed\n    _ensureViewIsIntact: function() {\n      if (this.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + this.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Default `destroy` implementation, for removing a view from the\n    // DOM and unbinding it. Regions will call this method\n    // for you. You can specify an `onDestroy` method in your view to\n    // add custom code that is called after the view is destroyed.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      var args = _.toArray(arguments);\n  \n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n  \n      // mark as destroyed before doing the actual destroy, to\n      // prevent infinite loops within \"destroy\" event handlers\n      // that are trying to destroy other views\n      this.isDestroyed = true;\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n  \n      // unbind UI elements\n      this.unbindUIElements();\n  \n      this.isRendered = false;\n  \n      // remove the view from the DOM\n      this.remove();\n  \n      // Call destroy on each behavior after\n      // destroying the view.\n      // This unbinds event listeners\n      // that behaviors have registered for.\n      _.invoke(this._behaviors, 'destroy', args);\n  \n      return this;\n    },\n  \n    bindUIElements: function() {\n      this._bindUIElements();\n      _.invoke(this._behaviors, this._bindUIElements);\n    },\n  \n    // This method binds the elements specified in the \"ui\" hash inside the view's code with\n    // the associated jQuery selectors.\n    _bindUIElements: function() {\n      if (!this.ui) { return; }\n  \n      // store the ui hash in _uiBindings so they can be reset later\n      // and so re-rendering the view will be able to find the bindings\n      if (!this._uiBindings) {\n        this._uiBindings = this.ui;\n      }\n  \n      // get the bindings result, as a function or otherwise\n      var bindings = _.result(this, '_uiBindings');\n  \n      // empty the ui so we don't have anything to start with\n      this.ui = {};\n  \n      // bind each of the selectors\n      _.each(bindings, function(selector, key) {\n        this.ui[key] = this.$(selector);\n      }, this);\n    },\n  \n    // This method unbinds the elements specified in the \"ui\" hash\n    unbindUIElements: function() {\n      this._unbindUIElements();\n      _.invoke(this._behaviors, this._unbindUIElements);\n    },\n  \n    _unbindUIElements: function() {\n      if (!this.ui || !this._uiBindings) { return; }\n  \n      // delete all of the existing ui bindings\n      _.each(this.ui, function($el, name) {\n        delete this.ui[name];\n      }, this);\n  \n      // reset the ui element to the original bindings configuration\n      this.ui = this._uiBindings;\n      delete this._uiBindings;\n    },\n  \n    // Internal method to create an event handler for a given `triggerDef` like\n    // 'click:foo'\n    _buildViewTrigger: function(triggerDef) {\n  \n      var options = _.defaults({}, triggerDef, {\n        preventDefault: true,\n        stopPropagation: true\n      });\n  \n      var eventName = _.isObject(triggerDef) ? options.event : triggerDef;\n  \n      return function(e) {\n        if (e) {\n          if (e.preventDefault && options.preventDefault) {\n            e.preventDefault();\n          }\n  \n          if (e.stopPropagation && options.stopPropagation) {\n            e.stopPropagation();\n          }\n        }\n  \n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n  \n        this.triggerMethod(eventName, args);\n      };\n    },\n  \n    setElement: function() {\n      var ret = Backbone.View.prototype.setElement.apply(this, arguments);\n  \n      // proxy behavior $el to the view's $el.\n      // This is needed because a view's $el proxy\n      // is not set until after setElement is called.\n      _.invoke(this._behaviors, 'proxyViewProperties', this);\n  \n      return ret;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: function() {\n      var ret = Marionette._triggerMethod(this, arguments);\n  \n      this._triggerEventOnBehaviors(arguments);\n      this._triggerEventOnParentLayout(arguments[0], _.rest(arguments));\n  \n      return ret;\n    },\n  \n    _triggerEventOnBehaviors: function(args) {\n      var triggerMethod = Marionette._triggerMethod;\n      var behaviors = this._behaviors;\n      // Use good ol' for as this is a very hot function\n      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {\n        triggerMethod(behaviors[i], args);\n      }\n    },\n  \n    _triggerEventOnParentLayout: function(eventName, args) {\n      var layoutView = this._parentLayoutView();\n      if (!layoutView) {\n        return;\n      }\n  \n      // invoke triggerMethod on parent view\n      var eventPrefix = Marionette.getOption(layoutView, 'childViewEventPrefix');\n      var prefixedEventName = eventPrefix + ':' + eventName;\n      var callArgs = [this].concat(args);\n  \n      Marionette._triggerMethod(layoutView, prefixedEventName, callArgs);\n  \n      // call the parent view's childEvents handler\n      var childEvents = Marionette.getOption(layoutView, 'childEvents');\n  \n      // since childEvents can be an object or a function use Marionette._getValue\n      // to handle the abstaction for us.\n      childEvents = Marionette._getValue(childEvents, layoutView);\n      var normalizedChildEvents = layoutView.normalizeMethods(childEvents);\n  \n      if (normalizedChildEvents && _.isFunction(normalizedChildEvents[eventName])) {\n        normalizedChildEvents[eventName].apply(layoutView, callArgs);\n      }\n    },\n  \n    // This method returns any views that are immediate\n    // children of this view\n    _getImmediateChildren: function() {\n      return [];\n    },\n  \n    // Returns an array of every nested view within this view\n    _getNestedViews: function() {\n      var children = this._getImmediateChildren();\n  \n      if (!children.length) { return children; }\n  \n      return _.reduce(children, function(memo, view) {\n        if (!view._getNestedViews) { return memo; }\n        return memo.concat(view._getNestedViews());\n      }, children);\n    },\n  \n    // Walk the _parent tree until we find a layout view (if one exists).\n    // Returns the parent layout view hierarchically closest to this view.\n    _parentLayoutView: function() {\n      var parent  = this._parent;\n  \n      while (parent) {\n        if (parent instanceof Marionette.LayoutView) {\n          return parent;\n        }\n        parent = parent._parent;\n      }\n    },\n  \n    // Imports the \"normalizeMethods\" to transform hashes of\n    // events=>function references/names to a hash of events=>function references\n    normalizeMethods: Marionette.normalizeMethods,\n  \n    // A handy way to merge passed-in options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Item View\n  // ---------\n  \n  // A single item view implementation that contains code for rendering\n  // with underscore.js templates, serializing the view's model or collection,\n  // and calling several methods on extended views, such as `onRender`.\n  Marionette.ItemView = Marionette.View.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.View.prototype.constructor which allows overriding\n    constructor: function() {\n      Marionette.View.apply(this, arguments);\n    },\n  \n    // Serialize the model or collection for the view. If a model is\n    // found, the view's `serializeModel` is called. If a collection is found,\n    // each model in the collection is serialized by calling\n    // the view's `serializeCollection` and put into an `items` array in\n    // the resulting data. If both are found, defaults to the model.\n    // You can override the `serializeData` method in your own view definition,\n    // to provide custom serialization for your view's data.\n    serializeData: function() {\n      if (!this.model && !this.collection) {\n        return {};\n      }\n  \n      var args = [this.model || this.collection];\n      if (arguments.length) {\n        args.push.apply(args, arguments);\n      }\n  \n      if (this.model) {\n        return this.serializeModel.apply(this, args);\n      } else {\n        return {\n          items: this.serializeCollection.apply(this, args)\n        };\n      }\n    },\n  \n    // Serialize a collection by serializing each of its models.\n    serializeCollection: function(collection) {\n      return collection.toJSON.apply(collection, _.rest(arguments));\n    },\n  \n    // Render the view, defaulting to underscore.js templates.\n    // You can override this in your view definition to provide\n    // a very specific rendering for your view. In general, though,\n    // you should override the `Marionette.Renderer` object to\n    // change how Marionette renders views.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this.isRendered = true;\n      this.bindUIElements();\n  \n      this.triggerMethod('render', this);\n  \n      return this;\n    },\n  \n    // Internal method to render the template with the serialized data\n    // and template helpers via the `Marionette.Renderer` object.\n    // Throws an `UndefinedTemplateError` error if the template is\n    // any falsely value but literal `false`.\n    _renderTemplate: function() {\n      var template = this.getTemplate();\n  \n      // Allow template-less item views\n      if (template === false) {\n        return;\n      }\n  \n      if (!template) {\n        throw new Marionette.Error({\n          name: 'UndefinedTemplateError',\n          message: 'Cannot render the template since it is null or undefined.'\n        });\n      }\n  \n      // Add in entity data and template helpers\n      var data = this.mixinTemplateHelpers(this.serializeData());\n  \n      // Render and add to el\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      return this;\n    },\n  \n    // Attaches the content of a given view.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    }\n  });\n  \n  /* jshint maxstatements: 20, maxcomplexity: 7 */\n  \n  // Collection View\n  // ---------------\n  \n  // A view that iterates over a Backbone.Collection\n  // and renders an individual child view for each model.\n  Marionette.CollectionView = Marionette.View.extend({\n  \n    // used as the prefix for child view events\n    // that are forwarded through the collectionview\n    childViewEventPrefix: 'childview',\n  \n    // flag for maintaining the sorted order of the collection\n    sort: true,\n  \n    // constructor\n    // option to pass `{sort: false}` to prevent the `CollectionView` from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    //\n    // option to pass `{comparator: compFunction()}` to allow the `CollectionView`\n    // to use a custom sort order for the collection.\n    constructor: function(options) {\n      this.once('render', this._initialEvents);\n      this._initChildViewStorage();\n  \n      Marionette.View.apply(this, arguments);\n  \n      this.on({\n        'before:show':   this._onBeforeShowCalled,\n        'show':          this._onShowCalled,\n        'before:attach': this._onBeforeAttachCalled,\n        'attach':        this._onAttachCalled\n      });\n      this.initRenderBuffer();\n    },\n  \n    // Instead of inserting elements one by one into the page,\n    // it's much more performant to insert elements into a document\n    // fragment and then insert that document fragment into the page\n    initRenderBuffer: function() {\n      this._bufferedChildren = [];\n    },\n  \n    startBuffering: function() {\n      this.initRenderBuffer();\n      this.isBuffering = true;\n    },\n  \n    endBuffering: function() {\n      // Only trigger attach if already shown and attached, otherwise Region#show() handles this.\n      var canTriggerAttach = this._isShown && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      this.isBuffering = false;\n  \n      if (this._isShown) {\n        this._triggerMethodMany(this._bufferedChildren, this, 'before:show');\n      }\n      if (canTriggerAttach && this._triggerBeforeAttach) {\n        nestedViews = this._getNestedViews();\n        this._triggerMethodMany(nestedViews, this, 'before:attach');\n      }\n  \n      this.attachBuffer(this, this._createBuffer());\n  \n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getNestedViews();\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      if (this._isShown) {\n        this._triggerMethodMany(this._bufferedChildren, this, 'show');\n      }\n      this.initRenderBuffer();\n    },\n  \n    _triggerMethodMany: function(targets, source, eventName) {\n      var args = _.drop(arguments, 3);\n  \n      _.each(targets, function(target) {\n        Marionette.triggerMethodOn.apply(target, [target, eventName, target, source].concat(args));\n      });\n    },\n  \n    // Configured the initial events that the collection view\n    // binds to.\n    _initialEvents: function() {\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this.render);\n  \n        if (this.getOption('sort')) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Handle a child added to the collection\n    _onCollectionAdd: function(child, collection, opts) {\n      // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2\n      var index = opts.at !== undefined && (opts.index || collection.indexOf(child));\n  \n      // When filtered or when there is no initial index, calculate index.\n      if (this.getOption('filter') || index === false) {\n        index = _.indexOf(this._filteredSortedModels(index), child);\n      }\n  \n      if (this._shouldAddChild(child, index)) {\n        this.destroyEmptyView();\n        var ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }\n    },\n  \n    // get the child view by model it holds, and remove it\n    _onCollectionRemove: function(model) {\n      var view = this.children.findByModel(model);\n      this.removeChildView(view);\n      this.checkEmpty();\n    },\n  \n    _onBeforeShowCalled: function() {\n      // Reset attach event flags at the top of the Region#show() event lifecycle; if the Region's\n      // show() options permit onBeforeAttach/onAttach events, these flags will be set true again.\n      this._triggerBeforeAttach = this._triggerAttach = false;\n      this.children.each(function(childView) {\n        Marionette.triggerMethodOn(childView, 'before:show', childView);\n      });\n    },\n  \n    _onShowCalled: function() {\n      this.children.each(function(childView) {\n        Marionette.triggerMethodOn(childView, 'show', childView);\n      });\n    },\n  \n    // If during Region#show() onBeforeAttach was fired, continue firing it for child views\n    _onBeforeAttachCalled: function() {\n      this._triggerBeforeAttach = true;\n    },\n  \n    // If during Region#show() onAttach was fired, continue firing it for child views\n    _onAttachCalled: function() {\n      this._triggerAttach = true;\n    },\n  \n    // Render children views. Override this method to\n    // provide your own implementation of a render function for\n    // the collection view.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.triggerMethod('before:render', this);\n      this._renderChildren();\n      this.isRendered = true;\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    // Reorder DOM after sorting. When your element's rendering\n    // do not use their index, you can pass reorderOnSort: true\n    // to only reorder the DOM after a sort instead of rendering\n    // all the collectionView\n    reorder: function() {\n      var children = this.children;\n      var models = this._filteredSortedModels();\n      var anyModelsAdded = _.some(models, function(model) {\n        return !children.findByModel(model);\n      });\n  \n      // If there are any new models added due to filtering\n      // We need to add child views\n      // So render as normal\n      if (anyModelsAdded) {\n        this.render();\n      } else {\n        // get the DOM nodes in the same order as the models\n        var elsToReorder = _.map(models, function(model, index) {\n          var view = children.findByModel(model);\n          view._index = index;\n          return view.el;\n        });\n  \n        // find the views that were children before but arent in this new ordering\n        var filteredOutViews = children.filter(function(view) {\n          return !_.contains(elsToReorder, view.el);\n        });\n  \n        this.triggerMethod('before:reorder');\n  \n        // since append moves elements that are already in the DOM,\n        // appending the elements will effectively reorder them\n        this._appendReorderedChildren(elsToReorder);\n  \n        // remove any views that have been filtered out\n        _.each(filteredOutViews, this.removeChildView, this);\n        this.checkEmpty();\n  \n        this.triggerMethod('reorder');\n      }\n    },\n  \n    // Render view after sorting. Override this method to\n    // change how the view renders after a `sort` on the collection.\n    // An example of this would be to only `renderChildren` in a `CompositeView`\n    // rather than the full view.\n    resortView: function() {\n      if (Marionette.getOption(this, 'reorderOnSort')) {\n        this.reorder();\n      } else {\n        this.render();\n      }\n    },\n  \n    // Internal method. This checks for any changes in the order of the collection.\n    // If the index of any view doesn't match, it will render.\n    _sortViews: function() {\n      var models = this._filteredSortedModels();\n  \n      // check for any changes in sort order of views\n      var orderChanged = _.find(models, function(item, index) {\n        var view = this.children.findByModel(item);\n        return !view || view._index !== index;\n      }, this);\n  \n      if (orderChanged) {\n        this.resortView();\n      }\n    },\n  \n    // Internal reference to what index a `emptyView` is.\n    _emptyViewIndex: -1,\n  \n    // Internal method. Separated so that CompositeView can append to the childViewContainer\n    // if necessary\n    _appendReorderedChildren: function(children) {\n      this.$el.append(children);\n    },\n  \n    // Internal method. Separated so that CompositeView can have\n    // more control over events being triggered, around the rendering\n    // process\n    _renderChildren: function() {\n      this.destroyEmptyView();\n      this.destroyChildren({checkEmpty: false});\n  \n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      } else {\n        this.triggerMethod('before:render:collection', this);\n        this.startBuffering();\n        this.showCollection();\n        this.endBuffering();\n        this.triggerMethod('render:collection', this);\n  \n        // If we have shown children and none have passed the filter, show the empty view\n        if (this.children.isEmpty() && this.getOption('filter')) {\n          this.showEmptyView();\n        }\n      }\n    },\n  \n    // Internal method to loop through collection and show each child view.\n    showCollection: function() {\n      var ChildView;\n  \n      var models = this._filteredSortedModels();\n  \n      _.each(models, function(child, index) {\n        ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }, this);\n    },\n  \n    // Allow the collection to be sorted by a custom view comparator\n    _filteredSortedModels: function(addedAt) {\n      var viewComparator = this.getViewComparator();\n      var models = this.collection.models;\n      addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);\n  \n      if (viewComparator) {\n        var addedModel;\n        // Preserve `at` location, even for a sorted view\n        if (addedAt) {\n          addedModel = models[addedAt];\n          models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));\n        }\n        models = this._sortModelsBy(models, viewComparator);\n        if (addedModel) {\n          models.splice(addedAt, 0, addedModel);\n        }\n      }\n  \n      // Filter after sorting in case the filter uses the index\n      if (this.getOption('filter')) {\n        models = _.filter(models, function(model, index) {\n          return this._shouldAddChild(model, index);\n        }, this);\n      }\n  \n      return models;\n    },\n  \n    _sortModelsBy: function(models, comparator) {\n      if (typeof comparator === 'string') {\n        return _.sortBy(models, function(model) {\n          return model.get(comparator);\n        }, this);\n      } else if (comparator.length === 1) {\n        return _.sortBy(models, comparator, this);\n      } else {\n        return models.sort(_.bind(comparator, this));\n      }\n    },\n  \n    // Internal method to show an empty view in place of\n    // a collection of child views, when the collection is empty\n    showEmptyView: function() {\n      var EmptyView = this.getEmptyView();\n  \n      if (EmptyView && !this._showingEmptyView) {\n        this.triggerMethod('before:render:empty');\n  \n        this._showingEmptyView = true;\n        var model = new Backbone.Model();\n        this.addEmptyView(model, EmptyView);\n  \n        this.triggerMethod('render:empty');\n      }\n    },\n  \n    // Internal method to destroy an existing emptyView instance\n    // if one exists. Called when a collection view has been\n    // rendered empty, and then a child is added to the collection.\n    destroyEmptyView: function() {\n      if (this._showingEmptyView) {\n        this.triggerMethod('before:remove:empty');\n  \n        this.destroyChildren();\n        delete this._showingEmptyView;\n  \n        this.triggerMethod('remove:empty');\n      }\n    },\n  \n    // Retrieve the empty view class\n    getEmptyView: function() {\n      return this.getOption('emptyView');\n    },\n  \n    // Render and show the emptyView. Similar to addChild method\n    // but \"add:child\" events are not fired, and the event from\n    // emptyView are not forwarded\n    addEmptyView: function(child, EmptyView) {\n      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or\n      // Region#show() handles this.\n      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      // get the emptyViewOptions, falling back to childViewOptions\n      var emptyViewOptions = this.getOption('emptyViewOptions') ||\n                            this.getOption('childViewOptions');\n  \n      if (_.isFunction(emptyViewOptions)) {\n        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);\n      }\n  \n      // build the empty view\n      var view = this.buildChildView(child, EmptyView, emptyViewOptions);\n  \n      view._parent = this;\n  \n      // Proxy emptyView events\n      this.proxyChildEvents(view);\n  \n      view.once('render', function() {\n        // trigger the 'before:show' event on `view` if the collection view has already been shown\n        if (this._isShown) {\n          Marionette.triggerMethodOn(view, 'before:show', view);\n        }\n  \n        // Trigger `before:attach` following `render` to avoid adding logic and event triggers\n        // to public method `renderChildView()`.\n        if (canTriggerAttach && this._triggerBeforeAttach) {\n          nestedViews = this._getViewAndNested(view);\n          this._triggerMethodMany(nestedViews, this, 'before:attach');\n        }\n      }, this);\n  \n      // Store the `emptyView` like a `childView` so we can properly remove and/or close it later\n      this.children.add(view);\n      this.renderChildView(view, this._emptyViewIndex);\n  \n      // Trigger `attach`\n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getViewAndNested(view);\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      // call the 'show' method if the collection view has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'show', view);\n      }\n    },\n  \n    // Retrieve the `childView` class, either from `this.options.childView`\n    // or from the `childView` in the object definition. The \"options\"\n    // takes precedence.\n    // This method receives the model that will be passed to the instance\n    // created from this `childView`. Overriding methods may use the child\n    // to determine what `childView` class to return.\n    getChildView: function(child) {\n      var childView = this.getOption('childView');\n  \n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n  \n      return childView;\n    },\n  \n    // Render the child's view and add it to the\n    // HTML for the collection view at a given index.\n    // This will also update the indices of later views in the collection\n    // in order to keep the children in sync with the collection.\n    addChild: function(child, ChildView, index) {\n      var childViewOptions = this.getOption('childViewOptions');\n      childViewOptions = Marionette._getValue(childViewOptions, this, [child, index]);\n  \n      var view = this.buildChildView(child, ChildView, childViewOptions);\n  \n      // increment indices of views after this one\n      this._updateIndices(view, true, index);\n  \n      this.triggerMethod('before:add:child', view);\n      this._addChildView(view, index);\n      this.triggerMethod('add:child', view);\n  \n      view._parent = this;\n  \n      return view;\n    },\n  \n    // Internal method. This decrements or increments the indices of views after the\n    // added/removed view to keep in sync with the collection.\n    _updateIndices: function(view, increment, index) {\n      if (!this.getOption('sort')) {\n        return;\n      }\n  \n      if (increment) {\n        // assign the index to the view\n        view._index = index;\n      }\n  \n      // update the indexes of views after this one\n      this.children.each(function(laterView) {\n        if (laterView._index >= view._index) {\n          laterView._index += increment ? 1 : -1;\n        }\n      });\n    },\n  \n    // Internal Method. Add the view to children and render it at\n    // the given index.\n    _addChildView: function(view, index) {\n      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or\n      // Region#show() handles this.\n      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      // set up the child view event forwarding\n      this.proxyChildEvents(view);\n  \n      view.once('render', function() {\n        // trigger the 'before:show' event on `view` if the collection view has already been shown\n        if (this._isShown && !this.isBuffering) {\n          Marionette.triggerMethodOn(view, 'before:show', view);\n        }\n  \n        // Trigger `before:attach` following `render` to avoid adding logic and event triggers\n        // to public method `renderChildView()`.\n        if (canTriggerAttach && this._triggerBeforeAttach) {\n          nestedViews = this._getViewAndNested(view);\n          this._triggerMethodMany(nestedViews, this, 'before:attach');\n        }\n      }, this);\n  \n      // Store the child view itself so we can properly remove and/or destroy it later\n      this.children.add(view);\n      this.renderChildView(view, index);\n  \n      // Trigger `attach`\n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getViewAndNested(view);\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      // Trigger `show`\n      if (this._isShown && !this.isBuffering) {\n        Marionette.triggerMethodOn(view, 'show', view);\n      }\n    },\n  \n    // render the child view\n    renderChildView: function(view, index) {\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:render', view);\n      }\n      view.render();\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'render', view);\n      }\n      this.attachHtml(this, view, index);\n      return view;\n    },\n  \n    // Build a `childView` for a model in the collection.\n    buildChildView: function(child, ChildViewClass, childViewOptions) {\n      var options = _.extend({model: child}, childViewOptions);\n      var childView = new ChildViewClass(options);\n      Marionette.MonitorDOMRefresh(childView);\n      return childView;\n    },\n  \n    // Remove the child view and destroy it.\n    // This function also updates the indices of\n    // later views in the collection in order to keep\n    // the children in sync with the collection.\n    removeChildView: function(view) {\n      if (!view) { return view; }\n  \n      this.triggerMethod('before:remove:child', view);\n  \n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:destroy', view);\n      }\n      // call 'destroy' or 'remove', depending on which is found\n      if (view.destroy) {\n        view.destroy();\n      } else {\n        view.remove();\n      }\n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'destroy', view);\n      }\n  \n      delete view._parent;\n      this.stopListening(view);\n      this.children.remove(view);\n      this.triggerMethod('remove:child', view);\n  \n      // decrement the index of views after this one\n      this._updateIndices(view, false);\n  \n      return view;\n    },\n  \n    // check if the collection is empty\n    isEmpty: function() {\n      return !this.collection || this.collection.length === 0;\n    },\n  \n    // If empty, show the empty view\n    checkEmpty: function() {\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      }\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(collectionView, buffer) {\n      collectionView.$el.append(buffer);\n    },\n  \n    // Create a fragment buffer from the currently buffered children\n    _createBuffer: function() {\n      var elBuffer = document.createDocumentFragment();\n      _.each(this._bufferedChildren, function(b) {\n        elBuffer.appendChild(b.el);\n      });\n      return elBuffer;\n    },\n  \n    // Append the HTML to the collection's `el`.\n    // Override this method to do something other\n    // than `.append`.\n    attachHtml: function(collectionView, childView, index) {\n      if (collectionView.isBuffering) {\n        // buffering happens on reset events and initial renders\n        // in order to reduce the number of inserts into the\n        // document, which are expensive.\n        collectionView._bufferedChildren.splice(index, 0, childView);\n      } else {\n        // If we've already rendered the main collection, append\n        // the new child into the correct order if we need to. Otherwise\n        // append to the end.\n        if (!collectionView._insertBefore(childView, index)) {\n          collectionView._insertAfter(childView);\n        }\n      }\n    },\n  \n    // Internal method. Check whether we need to insert the view into\n    // the correct position.\n    _insertBefore: function(childView, index) {\n      var currentView;\n      var findPosition = this.getOption('sort') && (index < this.children.length - 1);\n      if (findPosition) {\n        // Find the view after this one\n        currentView = this.children.find(function(view) {\n          return view._index === index + 1;\n        });\n      }\n  \n      if (currentView) {\n        currentView.$el.before(childView.el);\n        return true;\n      }\n  \n      return false;\n    },\n  \n    // Internal method. Append a view to the end of the $el\n    _insertAfter: function(childView) {\n      this.$el.append(childView.el);\n    },\n  \n    // Internal method to set up the `children` object for\n    // storing all of the child views\n    _initChildViewStorage: function() {\n      this.children = new Backbone.ChildViewContainer();\n    },\n  \n    // Handle cleanup and other destroying needs for the collection of views\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      this.triggerMethod('before:destroy:collection');\n      this.destroyChildren({checkEmpty: false});\n      this.triggerMethod('destroy:collection');\n  \n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Destroy the child views that this collection view\n    // is holding on to, if any\n    destroyChildren: function(options) {\n      var destroyOptions = options || {};\n      var shouldCheckEmpty = true;\n      var childViews = this.children.map(_.identity);\n  \n      if (!_.isUndefined(destroyOptions.checkEmpty)) {\n        shouldCheckEmpty = destroyOptions.checkEmpty;\n      }\n  \n      this.children.each(this.removeChildView, this);\n  \n      if (shouldCheckEmpty) {\n        this.checkEmpty();\n      }\n      return childViews;\n    },\n  \n    // Return true if the given child should be shown\n    // Return false otherwise\n    // The filter will be passed (child, index, collection)\n    // Where\n    //  'child' is the given model\n    //  'index' is the index of that model in the collection\n    //  'collection' is the collection referenced by this CollectionView\n    _shouldAddChild: function(child, index) {\n      var filter = this.getOption('filter');\n      return !_.isFunction(filter) || filter.call(this, child, index, this.collection);\n    },\n  \n    // Set up the child view event forwarding. Uses a \"childview:\"\n    // prefix in front of all forwarded events.\n    proxyChildEvents: function(view) {\n      var prefix = this.getOption('childViewEventPrefix');\n  \n      // Forward all child view events through the parent,\n      // prepending \"childview:\" to the event name\n      this.listenTo(view, 'all', function() {\n        var args = _.toArray(arguments);\n        var rootEvent = args[0];\n        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));\n  \n        args[0] = prefix + ':' + rootEvent;\n        args.splice(1, 0, view);\n  \n        // call collectionView childEvent if defined\n        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {\n          childEvents[rootEvent].apply(this, args.slice(1));\n        }\n  \n        this.triggerMethod.apply(this, args);\n      });\n    },\n  \n    _getImmediateChildren: function() {\n      return _.values(this.children._views);\n    },\n  \n    _getViewAndNested: function(view) {\n      // This will not fail on Backbone.View which does not have #_getNestedViews.\n      return [view].concat(_.result(view, '_getNestedViews') || []);\n    },\n  \n    getViewComparator: function() {\n      return this.getOption('viewComparator');\n    }\n  });\n  \n  /* jshint maxstatements: 17, maxlen: 117 */\n  \n  // Composite View\n  // --------------\n  \n  // Used for rendering a branch-leaf, hierarchical structure.\n  // Extends directly from CollectionView and also renders an\n  // a child view as `modelView`, for the top leaf\n  Marionette.CompositeView = Marionette.CollectionView.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.CollectionView.prototype.constructor which allows overriding\n    // option to pass '{sort: false}' to prevent the CompositeView from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function() {\n      Marionette.CollectionView.apply(this, arguments);\n    },\n  \n    // Configured the initial events that the composite view\n    // binds to. Override this method to prevent the initial\n    // events, or to add your own initial events.\n    _initialEvents: function() {\n  \n      // Bind only after composite view is rendered to avoid adding child views\n      // to nonexistent childViewContainer\n  \n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this._renderChildren);\n  \n        if (this.getOption('sort')) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Retrieve the `childView` to be used when rendering each of\n    // the items in the collection. The default is to return\n    // `this.childView` or Marionette.CompositeView if no `childView`\n    // has been defined\n    getChildView: function(child) {\n      var childView = this.getOption('childView') || this.constructor;\n  \n      return childView;\n    },\n  \n    // Serialize the model for the view.\n    // You can override the `serializeData` method in your own view\n    // definition, to provide custom serialization for your view's data.\n    serializeData: function() {\n      var data = {};\n  \n      if (this.model) {\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n  \n      return data;\n    },\n  \n    // Renders the model and the collection.\n    render: function() {\n      this._ensureViewIsIntact();\n      this._isRendering = true;\n      this.resetChildViewContainer();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this._renderChildren();\n  \n      this._isRendering = false;\n      this.isRendered = true;\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    _renderChildren: function() {\n      if (this.isRendered || this._isRendering) {\n        Marionette.CollectionView.prototype._renderChildren.call(this);\n      }\n    },\n  \n    // Render the root template that the children\n    // views are appended to\n    _renderTemplate: function() {\n      var data = {};\n      data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      this.triggerMethod('before:render:template');\n  \n      var template = this.getTemplate();\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      // the ui bindings is done here and not at the end of render since they\n      // will not be available until after the model is rendered, but should be\n      // available before the collection is rendered.\n      this.bindUIElements();\n      this.triggerMethod('render:template');\n    },\n  \n    // Attaches the content of the root.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(compositeView, buffer) {\n      var $container = this.getChildViewContainer(compositeView);\n      $container.append(buffer);\n    },\n  \n    // Internal method. Append a view to the end of the $el.\n    // Overidden from CollectionView to ensure view is appended to\n    // childViewContainer\n    _insertAfter: function(childView) {\n      var $container = this.getChildViewContainer(this, childView);\n      $container.append(childView.el);\n    },\n  \n    // Internal method. Append reordered childView'.\n    // Overidden from CollectionView to ensure reordered views\n    // are appended to childViewContainer\n    _appendReorderedChildren: function(children) {\n      var $container = this.getChildViewContainer(this);\n      $container.append(children);\n    },\n  \n    // Internal method to ensure an `$childViewContainer` exists, for the\n    // `attachHtml` method to use.\n    getChildViewContainer: function(containerView, childView) {\n      if (!!containerView.$childViewContainer) {\n        return containerView.$childViewContainer;\n      }\n  \n      var container;\n      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');\n      if (childViewContainer) {\n  \n        var selector = Marionette._getValue(childViewContainer, containerView);\n  \n        if (selector.charAt(0) === '@' && containerView.ui) {\n          container = containerView.ui[selector.substr(4)];\n        } else {\n          container = containerView.$(selector);\n        }\n  \n        if (container.length <= 0) {\n          throw new Marionette.Error({\n            name: 'ChildViewContainerMissingError',\n            message: 'The specified \"childViewContainer\" was not found: ' + containerView.childViewContainer\n          });\n        }\n  \n      } else {\n        container = containerView.$el;\n      }\n  \n      containerView.$childViewContainer = container;\n      return container;\n    },\n  \n    // Internal method to reset the `$childViewContainer` on render\n    resetChildViewContainer: function() {\n      if (this.$childViewContainer) {\n        this.$childViewContainer = undefined;\n      }\n    }\n  });\n  \n  // Layout View\n  // -----------\n  \n  // Used for managing application layoutViews, nested layoutViews and\n  // multiple regions within an application or sub-application.\n  //\n  // A specialized view class that renders an area of HTML and then\n  // attaches `Region` instances to the specified `regions`.\n  // Used for composite view management and sub-application areas.\n  Marionette.LayoutView = Marionette.ItemView.extend({\n    regionClass: Marionette.Region,\n  \n    options: {\n      destroyImmediate: false\n    },\n  \n    // used as the prefix for child view events\n    // that are forwarded through the layoutview\n    childViewEventPrefix: 'childview',\n  \n    // Ensure the regions are available when the `initialize` method\n    // is called.\n    constructor: function(options) {\n      options = options || {};\n  \n      this._firstRender = true;\n      this._initializeRegions(options);\n  \n      Marionette.ItemView.call(this, options);\n    },\n  \n    // LayoutView's render will use the existing region objects the\n    // first time it is called. Subsequent calls will destroy the\n    // views that the regions are showing and then reset the `el`\n    // for the regions to the newly rendered DOM elements.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      if (this._firstRender) {\n        // if this is the first render, don't do anything to\n        // reset the regions\n        this._firstRender = false;\n      } else {\n        // If this is not the first render call, then we need to\n        // re-initialize the `el` for each region\n        this._reInitializeRegions();\n      }\n  \n      return Marionette.ItemView.prototype.render.apply(this, arguments);\n    },\n  \n    // Handle destroying regions, and then destroy the view itself.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n      // #2134: remove parent element before destroying the child views, so\n      // removing the child views doesn't retrigger repaints\n      if (this.getOption('destroyImmediate') === true) {\n        this.$el.remove();\n      }\n      this.regionManager.destroy();\n      return Marionette.ItemView.prototype.destroy.apply(this, arguments);\n    },\n  \n    showChildView: function(regionName, view, options) {\n      var region = this.getRegion(regionName);\n      return region.show.apply(region, _.rest(arguments));\n    },\n  \n    getChildView: function(regionName) {\n      return this.getRegion(regionName).currentView;\n    },\n  \n    // Add a single region, by name, to the layoutView\n    addRegion: function(name, definition) {\n      var regions = {};\n      regions[name] = definition;\n      return this._buildRegions(regions)[name];\n    },\n  \n    // Add multiple regions as a {name: definition, name2: def2} object literal\n    addRegions: function(regions) {\n      this.regions = _.extend({}, this.regions, regions);\n      return this._buildRegions(regions);\n    },\n  \n    // Remove a single region from the LayoutView, by name\n    removeRegion: function(name) {\n      delete this.regions[name];\n      return this.regionManager.removeRegion(name);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this.regionManager.get(region);\n    },\n  \n    // Get all regions\n    getRegions: function() {\n      return this.regionManager.getRegions();\n    },\n  \n    // internal method to build regions\n    _buildRegions: function(regions) {\n      var defaults = {\n        regionClass: this.getOption('regionClass'),\n        parentEl: _.partial(_.result, this, 'el')\n      };\n  \n      return this.regionManager.addRegions(regions, defaults);\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on this layoutView.\n    _initializeRegions: function(options) {\n      var regions;\n      this._initRegionManager();\n  \n      regions = Marionette._getValue(this.regions, this, [options]) || {};\n  \n      // Enable users to define `regions` as instance options.\n      var regionOptions = this.getOption.call(options, 'regions');\n  \n      // enable region options to be a function\n      regionOptions = Marionette._getValue(regionOptions, this, [options]);\n  \n      _.extend(regions, regionOptions);\n  \n      // Normalize region selectors hash to allow\n      // a user to use the @ui. syntax.\n      regions = this.normalizeUIValues(regions, ['selector', 'el']);\n  \n      this.addRegions(regions);\n    },\n  \n    // Internal method to re-initialize all of the regions by updating the `el` that\n    // they point to\n    _reInitializeRegions: function() {\n      this.regionManager.invoke('reset');\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the region manager\n    // and all regions in it\n    _initRegionManager: function() {\n      this.regionManager = this.getRegionManager();\n      this.regionManager._parent = this;\n  \n      this.listenTo(this.regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n  \n      this.listenTo(this.regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    },\n  \n    _getImmediateChildren: function() {\n      return _.chain(this.regionManager.getRegions())\n        .pluck('currentView')\n        .compact()\n        .value();\n    }\n  });\n  \n\n  // Behavior\n  // --------\n  \n  // A Behavior is an isolated set of DOM /\n  // user interactions that can be mixed into any View.\n  // Behaviors allow you to blackbox View specific interactions\n  // into portable logical chunks, keeping your views simple and your code DRY.\n  \n  Marionette.Behavior = Marionette.Object.extend({\n    constructor: function(options, view) {\n      // Setup reference to the view.\n      // this comes in handle when a behavior\n      // wants to directly talk up the chain\n      // to the view.\n      this.view = view;\n      this.defaults = _.result(this, 'defaults') || {};\n      this.options  = _.extend({}, this.defaults, options);\n      // Construct an internal UI hash using\n      // the views UI hash and then the behaviors UI hash.\n      // This allows the user to use UI hash elements\n      // defined in the parent view as well as those\n      // defined in the given behavior.\n      this.ui = _.extend({}, _.result(view, 'ui'), _.result(this, 'ui'));\n  \n      Marionette.Object.apply(this, arguments);\n    },\n  \n    // proxy behavior $ method to the view\n    // this is useful for doing jquery DOM lookups\n    // scoped to behaviors view.\n    $: function() {\n      return this.view.$.apply(this.view, arguments);\n    },\n  \n    // Stops the behavior from listening to events.\n    // Overrides Object#destroy to prevent additional events from being triggered.\n    destroy: function() {\n      this.stopListening();\n  \n      return this;\n    },\n  \n    proxyViewProperties: function(view) {\n      this.$el = view.$el;\n      this.el = view.el;\n    }\n  });\n  \n  /* jshint maxlen: 143 */\n  // Behaviors\n  // ---------\n  \n  // Behaviors is a utility class that takes care of\n  // gluing your behavior instances to their given View.\n  // The most important part of this class is that you\n  // **MUST** override the class level behaviorsLookup\n  // method for things to work properly.\n  \n  Marionette.Behaviors = (function(Marionette, _) {\n    // Borrow event splitter from Backbone\n    var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n  \n    function Behaviors(view, behaviors) {\n  \n      if (!_.isObject(view.behaviors)) {\n        return {};\n      }\n  \n      // Behaviors defined on a view can be a flat object literal\n      // or it can be a function that returns an object.\n      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));\n  \n      // Wraps several of the view's methods\n      // calling the methods first on each behavior\n      // and then eventually calling the method on the view.\n      Behaviors.wrap(view, behaviors, _.keys(methods));\n      return behaviors;\n    }\n  \n    var methods = {\n      behaviorTriggers: function(behaviorTriggers, behaviors) {\n        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);\n        return triggerBuilder.buildBehaviorTriggers();\n      },\n  \n      behaviorEvents: function(behaviorEvents, behaviors) {\n        var _behaviorsEvents = {};\n  \n        _.each(behaviors, function(b, i) {\n          var _events = {};\n          var behaviorEvents = _.clone(_.result(b, 'events')) || {};\n  \n          // Normalize behavior events hash to allow\n          // a user to use the @ui. syntax.\n          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, getBehaviorsUI(b));\n  \n          var j = 0;\n          _.each(behaviorEvents, function(behaviour, key) {\n            var match     = key.match(delegateEventSplitter);\n  \n            // Set event name to be namespaced using the view cid,\n            // the behavior index, and the behavior event index\n            // to generate a non colliding event namespace\n            // http://api.jquery.com/event.namespace/\n            var eventName = match[1] + '.' + [this.cid, i, j++, ' '].join('');\n            var selector  = match[2];\n  \n            var eventKey  = eventName + selector;\n            var handler   = _.isFunction(behaviour) ? behaviour : b[behaviour];\n  \n            _events[eventKey] = _.bind(handler, b);\n          }, this);\n  \n          _behaviorsEvents = _.extend(_behaviorsEvents, _events);\n        }, this);\n  \n        return _behaviorsEvents;\n      }\n    };\n  \n    _.extend(Behaviors, {\n  \n      // Placeholder method to be extended by the user.\n      // The method should define the object that stores the behaviors.\n      // i.e.\n      //\n      // ```js\n      // Marionette.Behaviors.behaviorsLookup: function() {\n      //   return App.Behaviors\n      // }\n      // ```\n      behaviorsLookup: function() {\n        throw new Marionette.Error({\n          message: 'You must define where your behaviors are stored.',\n          url: 'marionette.behaviors.html#behaviorslookup'\n        });\n      },\n  \n      // Takes care of getting the behavior class\n      // given options and a key.\n      // If a user passes in options.behaviorClass\n      // default to using that. Otherwise delegate\n      // the lookup to the users `behaviorsLookup` implementation.\n      getBehaviorClass: function(options, key) {\n        if (options.behaviorClass) {\n          return options.behaviorClass;\n        }\n  \n        // Get behavior class can be either a flat object or a method\n        return Marionette._getValue(Behaviors.behaviorsLookup, this, [options, key])[key];\n      },\n  \n      // Iterate over the behaviors object, for each behavior\n      // instantiate it and get its grouped behaviors.\n      parseBehaviors: function(view, behaviors) {\n        return _.chain(behaviors).map(function(options, key) {\n          var BehaviorClass = Behaviors.getBehaviorClass(options, key);\n  \n          var behavior = new BehaviorClass(options, view);\n          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));\n  \n          return [behavior].concat(nestedBehaviors);\n        }).flatten().value();\n      },\n  \n      // Wrap view internal methods so that they delegate to behaviors. For example,\n      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.\n      // i.e.\n      //\n      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`\n      wrap: function(view, behaviors, methodNames) {\n        _.each(methodNames, function(methodName) {\n          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);\n        });\n      }\n    });\n  \n    // Class to build handlers for `triggers` on behaviors\n    // for views\n    function BehaviorTriggersBuilder(view, behaviors) {\n      this._view      = view;\n      this._behaviors = behaviors;\n      this._triggers  = {};\n    }\n  \n    _.extend(BehaviorTriggersBuilder.prototype, {\n      // Main method to build the triggers hash with event keys and handlers\n      buildBehaviorTriggers: function() {\n        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);\n        return this._triggers;\n      },\n  \n      // Internal method to build all trigger handlers for a given behavior\n      _buildTriggerHandlersForBehavior: function(behavior, i) {\n        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};\n  \n        triggersHash = Marionette.normalizeUIKeys(triggersHash, getBehaviorsUI(behavior));\n  \n        _.each(triggersHash, _.bind(this._setHandlerForBehavior, this, behavior, i));\n      },\n  \n      // Internal method to create and assign the trigger handler for a given\n      // behavior\n      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {\n        // Unique identifier for the `this._triggers` hash\n        var triggerKey = trigger.replace(/^\\S+/, function(triggerName) {\n          return triggerName + '.' + 'behaviortriggers' + i;\n        });\n  \n        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);\n      }\n    });\n  \n    function getBehaviorsUI(behavior) {\n      return behavior._uiBindings || behavior.ui;\n    }\n  \n    return Behaviors;\n  \n  })(Marionette, _);\n  \n\n  // App Router\n  // ----------\n  \n  // Reduce the boilerplate code of handling route events\n  // and then calling a single method on another object.\n  // Have your routers configured to call the method on\n  // your object, directly.\n  //\n  // Configure an AppRouter with `appRoutes`.\n  //\n  // App routers can only take one `controller` object.\n  // It is recommended that you divide your controller\n  // objects in to smaller pieces of related functionality\n  // and have multiple routers / controllers, instead of\n  // just one giant router and controller.\n  //\n  // You can also add standard routes to an AppRouter.\n  \n  Marionette.AppRouter = Backbone.Router.extend({\n  \n    constructor: function(options) {\n      this.options = options || {};\n  \n      Backbone.Router.apply(this, arguments);\n  \n      var appRoutes = this.getOption('appRoutes');\n      var controller = this._getController();\n      this.processAppRoutes(controller, appRoutes);\n      this.on('route', this._processOnRoute, this);\n    },\n  \n    // Similar to route method on a Backbone Router but\n    // method is called on the controller\n    appRoute: function(route, methodName) {\n      var controller = this._getController();\n      this._addAppRoute(controller, route, methodName);\n    },\n  \n    // process the route event and trigger the onRoute\n    // method call, if it exists\n    _processOnRoute: function(routeName, routeArgs) {\n      // make sure an onRoute before trying to call it\n      if (_.isFunction(this.onRoute)) {\n        // find the path that matches the current route\n        var routePath = _.invert(this.getOption('appRoutes'))[routeName];\n        this.onRoute(routeName, routePath, routeArgs);\n      }\n    },\n  \n    // Internal method to process the `appRoutes` for the\n    // router, and turn them in to routes that trigger the\n    // specified method on the specified `controller`.\n    processAppRoutes: function(controller, appRoutes) {\n      if (!appRoutes) { return; }\n  \n      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n  \n      _.each(routeNames, function(route) {\n        this._addAppRoute(controller, route, appRoutes[route]);\n      }, this);\n    },\n  \n    _getController: function() {\n      return this.getOption('controller');\n    },\n  \n    _addAppRoute: function(controller, route, methodName) {\n      var method = controller[methodName];\n  \n      if (!method) {\n        throw new Marionette.Error('Method \"' + methodName + '\" was not found on the controller');\n      }\n  \n      this.route(route, methodName, _.bind(method, controller));\n    },\n  \n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    triggerMethod: Marionette.triggerMethod,\n  \n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Application\n  // -----------\n  \n  // Contain and manage the composite application as a whole.\n  // Stores and starts up `Region` objects, includes an\n  // event aggregator as `app.vent`\n  Marionette.Application = Marionette.Object.extend({\n    constructor: function(options) {\n      this._initializeRegions(options);\n      this._initCallbacks = new Marionette.Callbacks();\n      this.submodules = {};\n      _.extend(this, options);\n      this._initChannel();\n      Marionette.Object.apply(this, arguments);\n    },\n  \n    // Command execution, facilitated by Backbone.Wreqr.Commands\n    execute: function() {\n      this.commands.execute.apply(this.commands, arguments);\n    },\n  \n    // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n    request: function() {\n      return this.reqres.request.apply(this.reqres, arguments);\n    },\n  \n    // Add an initializer that is either run at when the `start`\n    // method is called, or run immediately if added after `start`\n    // has already been called.\n    addInitializer: function(initializer) {\n      this._initCallbacks.add(initializer);\n    },\n  \n    // kick off all of the application's processes.\n    // initializes all of the regions that have been added\n    // to the app, and runs all of the initializer functions\n    start: function(options) {\n      this.triggerMethod('before:start', options);\n      this._initCallbacks.run(options, this);\n      this.triggerMethod('start', options);\n    },\n  \n    // Add regions to your app.\n    // Accepts a hash of named strings or Region objects\n    // addRegions({something: \"#someRegion\"})\n    // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n    addRegions: function(regions) {\n      return this._regionManager.addRegions(regions);\n    },\n  \n    // Empty all regions in the app, without removing them\n    emptyRegions: function() {\n      return this._regionManager.emptyRegions();\n    },\n  \n    // Removes a region from your app, by name\n    // Accepts the regions name\n    // removeRegion('myRegion')\n    removeRegion: function(region) {\n      return this._regionManager.removeRegion(region);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this._regionManager.get(region);\n    },\n  \n    // Get all the regions from the region manager\n    getRegions: function() {\n      return this._regionManager.getRegions();\n    },\n  \n    // Create a module, attached to the application\n    module: function(moduleNames, moduleDefinition) {\n  \n      // Overwrite the module class if the user specifies one\n      var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n  \n      var args = _.toArray(arguments);\n      args.unshift(this);\n  \n      // see the Marionette.Module object for more information\n      return ModuleClass.create.apply(ModuleClass, args);\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business-specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on the application instance\n    _initializeRegions: function(options) {\n      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};\n  \n      this._initRegionManager();\n  \n      // Enable users to define `regions` in instance options.\n      var optionRegions = Marionette.getOption(options, 'regions');\n  \n      // Enable region options to be a function\n      if (_.isFunction(optionRegions)) {\n        optionRegions = optionRegions.call(this, options);\n      }\n  \n      // Overwrite current regions with those passed in options\n      _.extend(regions, optionRegions);\n  \n      this.addRegions(regions);\n  \n      return this;\n    },\n  \n    // Internal method to set up the region manager\n    _initRegionManager: function() {\n      this._regionManager = this.getRegionManager();\n      this._regionManager._parent = this;\n  \n      this.listenTo(this._regionManager, 'before:add:region', function() {\n        Marionette._triggerMethod(this, 'before:add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        Marionette._triggerMethod(this, 'add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'before:remove:region', function() {\n        Marionette._triggerMethod(this, 'before:remove:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'remove:region', function(name) {\n        delete this[name];\n        Marionette._triggerMethod(this, 'remove:region', arguments);\n      });\n    },\n  \n    // Internal method to setup the Wreqr.radio channel\n    _initChannel: function() {\n      this.channelName = _.result(this, 'channelName') || 'global';\n      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);\n      this.vent = _.result(this, 'vent') || this.channel.vent;\n      this.commands = _.result(this, 'commands') || this.channel.commands;\n      this.reqres = _.result(this, 'reqres') || this.channel.reqres;\n    }\n  });\n  \n  /* jshint maxparams: 9 */\n  \n  // Module\n  // ------\n  \n  // A simple module system, used to create privacy and encapsulation in\n  // Marionette applications\n  Marionette.Module = function(moduleName, app, options) {\n    this.moduleName = moduleName;\n    this.options = _.extend({}, this.options, options);\n    // Allow for a user to overide the initialize\n    // for a given module instance.\n    this.initialize = options.initialize || this.initialize;\n  \n    // Set up an internal store for sub-modules.\n    this.submodules = {};\n  \n    this._setupInitializersAndFinalizers();\n  \n    // Set an internal reference to the app\n    // within a module.\n    this.app = app;\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(moduleName, app, this.options);\n    }\n  };\n  \n  Marionette.Module.extend = Marionette.extend;\n  \n  // Extend the Module prototype with events / listenTo, so that the module\n  // can be used as an event aggregator or pub/sub.\n  _.extend(Marionette.Module.prototype, Backbone.Events, {\n  \n    // By default modules start with their parents.\n    startWithParent: true,\n  \n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic when extending Marionette.Module.\n    initialize: function() {},\n  \n    // Initializer for a specific module. Initializers are run when the\n    // module's `start` method is called.\n    addInitializer: function(callback) {\n      this._initializerCallbacks.add(callback);\n    },\n  \n    // Finalizers are run when a module is stopped. They are used to teardown\n    // and finalize any variables, references, events and other code that the\n    // module had set up.\n    addFinalizer: function(callback) {\n      this._finalizerCallbacks.add(callback);\n    },\n  \n    // Start the module, and run all of its initializers\n    start: function(options) {\n      // Prevent re-starting a module that is already started\n      if (this._isInitialized) { return; }\n  \n      // start the sub-modules (depth-first hierarchy)\n      _.each(this.submodules, function(mod) {\n        // check to see if we should start the sub-module with this parent\n        if (mod.startWithParent) {\n          mod.start(options);\n        }\n      });\n  \n      // run the callbacks to \"start\" the current module\n      this.triggerMethod('before:start', options);\n  \n      this._initializerCallbacks.run(options, this);\n      this._isInitialized = true;\n  \n      this.triggerMethod('start', options);\n    },\n  \n    // Stop this module by running its finalizers and then stop all of\n    // the sub-modules for this module\n    stop: function() {\n      // if we are not initialized, don't bother finalizing\n      if (!this._isInitialized) { return; }\n      this._isInitialized = false;\n  \n      this.triggerMethod('before:stop');\n  \n      // stop the sub-modules; depth-first, to make sure the\n      // sub-modules are stopped / finalized before parents\n      _.invoke(this.submodules, 'stop');\n  \n      // run the finalizers\n      this._finalizerCallbacks.run(undefined, this);\n  \n      // reset the initializers and finalizers\n      this._initializerCallbacks.reset();\n      this._finalizerCallbacks.reset();\n  \n      this.triggerMethod('stop');\n    },\n  \n    // Configure the module with a definition function and any custom args\n    // that are to be passed in to the definition function\n    addDefinition: function(moduleDefinition, customArgs) {\n      this._runModuleDefinition(moduleDefinition, customArgs);\n    },\n  \n    // Internal method: run the module definition function with the correct\n    // arguments\n    _runModuleDefinition: function(definition, customArgs) {\n      // If there is no definition short circut the method.\n      if (!definition) { return; }\n  \n      // build the correct list of arguments for the module definition\n      var args = _.flatten([\n        this,\n        this.app,\n        Backbone,\n        Marionette,\n        Backbone.$, _,\n        customArgs\n      ]);\n  \n      definition.apply(this, args);\n    },\n  \n    // Internal method: set up new copies of initializers and finalizers.\n    // Calling this method will wipe out all existing initializers and\n    // finalizers.\n    _setupInitializersAndFinalizers: function() {\n      this._initializerCallbacks = new Marionette.Callbacks();\n      this._finalizerCallbacks = new Marionette.Callbacks();\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n  \n  // Class methods to create modules\n  _.extend(Marionette.Module, {\n  \n    // Create a module, hanging off the app parameter as the parent object.\n    create: function(app, moduleNames, moduleDefinition) {\n      var module = app;\n  \n      // get the custom args passed in after the module definition and\n      // get rid of the module name and definition function\n      var customArgs = _.drop(arguments, 3);\n  \n      // Split the module names and get the number of submodules.\n      // i.e. an example module name of `Doge.Wow.Amaze` would\n      // then have the potential for 3 module definitions.\n      moduleNames = moduleNames.split('.');\n      var length = moduleNames.length;\n  \n      // store the module definition for the last module in the chain\n      var moduleDefinitions = [];\n      moduleDefinitions[length - 1] = moduleDefinition;\n  \n      // Loop through all the parts of the module definition\n      _.each(moduleNames, function(moduleName, i) {\n        var parentModule = module;\n        module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n      }, this);\n  \n      // Return the last module in the definition chain\n      return module;\n    },\n  \n    _getModule: function(parentModule, moduleName, app, def, args) {\n      var options = _.extend({}, def);\n      var ModuleClass = this.getClass(def);\n  \n      // Get an existing module of this name if we have one\n      var module = parentModule[moduleName];\n  \n      if (!module) {\n        // Create a new module if we don't have one\n        module = new ModuleClass(moduleName, app, options);\n        parentModule[moduleName] = module;\n        // store the module on the parent\n        parentModule.submodules[moduleName] = module;\n      }\n  \n      return module;\n    },\n  \n    // ## Module Classes\n    //\n    // Module classes can be used as an alternative to the define pattern.\n    // The extend function of a Module is identical to the extend functions\n    // on other Backbone and Marionette classes.\n    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.\n    getClass: function(moduleDefinition) {\n      var ModuleClass = Marionette.Module;\n  \n      if (!moduleDefinition) {\n        return ModuleClass;\n      }\n  \n      // If all of the module's functionality is defined inside its class,\n      // then the class can be passed in directly. `MyApp.module(\"Foo\", FooModule)`.\n      if (moduleDefinition.prototype instanceof ModuleClass) {\n        return moduleDefinition;\n      }\n  \n      return moduleDefinition.moduleClass || ModuleClass;\n    },\n  \n    // Add the module definition and add a startWithParent initializer function.\n    // This is complicated because module definitions are heavily overloaded\n    // and support an anonymous function, module class, or options object\n    _addModuleDefinition: function(parentModule, module, def, args) {\n      var fn = this._getDefine(def);\n      var startWithParent = this._getStartWithParent(def, module);\n  \n      if (fn) {\n        module.addDefinition(fn, args);\n      }\n  \n      this._addStartWithParent(parentModule, module, startWithParent);\n    },\n  \n    _getStartWithParent: function(def, module) {\n      var swp;\n  \n      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {\n        swp = module.constructor.prototype.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      if (_.isObject(def)) {\n        swp = def.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      return true;\n    },\n  \n    _getDefine: function(def) {\n      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {\n        return def;\n      }\n  \n      if (_.isObject(def)) {\n        return def.define;\n      }\n  \n      return null;\n    },\n  \n    _addStartWithParent: function(parentModule, module, startWithParent) {\n      module.startWithParent = module.startWithParent && startWithParent;\n  \n      if (!module.startWithParent || !!module.startWithParentIsConfigured) {\n        return;\n      }\n  \n      module.startWithParentIsConfigured = true;\n  \n      parentModule.addInitializer(function(options) {\n        if (module.startWithParent) {\n          module.start(options);\n        }\n      });\n    }\n  });\n  \n\n  return Marionette;\n}));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"backbone.babysitter\":2,\"backbone.wreqr\":3}],2:[function(require,module,exports){\n(function (global){\n// Backbone.BabySitter\n// -------------------\n// v0.1.10\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.babysitter\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  'use strict';\n\n  var previousChildViewContainer = Backbone.ChildViewContainer;\n\n  // BabySitter.ChildViewContainer\n  // -----------------------------\n  //\n  // Provide a container to store, retrieve and\n  // shut down child views.\n  \n  Backbone.ChildViewContainer = (function (Backbone, _) {\n  \n    // Container Constructor\n    // ---------------------\n  \n    var Container = function(views){\n      this._views = {};\n      this._indexByModel = {};\n      this._indexByCustom = {};\n      this._updateLength();\n  \n      _.each(views, this.add, this);\n    };\n  \n    // Container Methods\n    // -----------------\n  \n    _.extend(Container.prototype, {\n  \n      // Add a view to this container. Stores the view\n      // by `cid` and makes it searchable by the model\n      // cid (and model itself). Optionally specify\n      // a custom key to store an retrieve the view.\n      add: function(view, customIndex){\n        var viewCid = view.cid;\n  \n        // store the view\n        this._views[viewCid] = view;\n  \n        // index it by model\n        if (view.model){\n          this._indexByModel[view.model.cid] = viewCid;\n        }\n  \n        // index by custom\n        if (customIndex){\n          this._indexByCustom[customIndex] = viewCid;\n        }\n  \n        this._updateLength();\n        return this;\n      },\n  \n      // Find a view by the model that was attached to\n      // it. Uses the model's `cid` to find it.\n      findByModel: function(model){\n        return this.findByModelCid(model.cid);\n      },\n  \n      // Find a view by the `cid` of the model that was attached to\n      // it. Uses the model's `cid` to find the view `cid` and\n      // retrieve the view using it.\n      findByModelCid: function(modelCid){\n        var viewCid = this._indexByModel[modelCid];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find a view by a custom indexer.\n      findByCustom: function(index){\n        var viewCid = this._indexByCustom[index];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find by index. This is not guaranteed to be a\n      // stable index.\n      findByIndex: function(index){\n        return _.values(this._views)[index];\n      },\n  \n      // retrieve a view by its `cid` directly\n      findByCid: function(cid){\n        return this._views[cid];\n      },\n  \n      // Remove a view\n      remove: function(view){\n        var viewCid = view.cid;\n  \n        // delete model index\n        if (view.model){\n          delete this._indexByModel[view.model.cid];\n        }\n  \n        // delete custom index\n        _.any(this._indexByCustom, function(cid, key) {\n          if (cid === viewCid) {\n            delete this._indexByCustom[key];\n            return true;\n          }\n        }, this);\n  \n        // remove the view from the container\n        delete this._views[viewCid];\n  \n        // update the length\n        this._updateLength();\n        return this;\n      },\n  \n      // Call a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.call`.\n      call: function(method){\n        this.apply(method, _.tail(arguments));\n      },\n  \n      // Apply a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.apply`.\n      apply: function(method, args){\n        _.each(this._views, function(view){\n          if (_.isFunction(view[method])){\n            view[method].apply(view, args || []);\n          }\n        });\n      },\n  \n      // Update the `.length` attribute on this container\n      _updateLength: function(){\n        this.length = _.size(this._views);\n      }\n    });\n  \n    // Borrowing this code from Backbone.Collection:\n    // http://backbonejs.org/docs/backbone.html#section-106\n    //\n    // Mix in methods from Underscore, for iteration, and other\n    // collection related features.\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck', 'reduce'];\n  \n    _.each(methods, function(method) {\n      Container.prototype[method] = function() {\n        var views = _.values(this._views);\n        var args = [views].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  \n    // return the public API\n    return Container;\n  })(Backbone, _);\n  \n\n  Backbone.ChildViewContainer.VERSION = '0.1.10';\n\n  Backbone.ChildViewContainer.noConflict = function () {\n    Backbone.ChildViewContainer = previousChildViewContainer;\n    return this;\n  };\n\n  return Backbone.ChildViewContainer;\n\n}));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],3:[function(require,module,exports){\n(function (global){\n// Backbone.Wreqr (Backbone.Marionette)\n// ----------------------------------\n// v1.3.5\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.wreqr\n\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  \"use strict\";\n\n  var previousWreqr = Backbone.Wreqr;\n\n  var Wreqr = Backbone.Wreqr = {};\n\n  Backbone.Wreqr.VERSION = '1.3.5';\n\n  Backbone.Wreqr.noConflict = function () {\n    Backbone.Wreqr = previousWreqr;\n    return this;\n  };\n\n  // Handlers\n  // --------\n  // A registry of functions to call, given a name\n  \n  Wreqr.Handlers = (function(Backbone, _){\n    \"use strict\";\n    \n    // Constructor\n    // -----------\n  \n    var Handlers = function(options){\n      this.options = options;\n      this._wreqrHandlers = {};\n      \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    Handlers.extend = Backbone.Model.extend;\n  \n    // Instance Members\n    // ----------------\n  \n    _.extend(Handlers.prototype, Backbone.Events, {\n  \n      // Add multiple handlers using an object literal configuration\n      setHandlers: function(handlers){\n        _.each(handlers, function(handler, name){\n          var context = null;\n  \n          if (_.isObject(handler) && !_.isFunction(handler)){\n            context = handler.context;\n            handler = handler.callback;\n          }\n  \n          this.setHandler(name, handler, context);\n        }, this);\n      },\n  \n      // Add a handler for the given name, with an\n      // optional context to run the handler within\n      setHandler: function(name, handler, context){\n        var config = {\n          callback: handler,\n          context: context\n        };\n  \n        this._wreqrHandlers[name] = config;\n  \n        this.trigger(\"handler:add\", name, handler, context);\n      },\n  \n      // Determine whether or not a handler is registered\n      hasHandler: function(name){\n        return !! this._wreqrHandlers[name];\n      },\n  \n      // Get the currently registered handler for\n      // the specified name. Throws an exception if\n      // no handler is found.\n      getHandler: function(name){\n        var config = this._wreqrHandlers[name];\n  \n        if (!config){\n          return;\n        }\n  \n        return function(){\n          return config.callback.apply(config.context, arguments);\n        };\n      },\n  \n      // Remove a handler for the specified name\n      removeHandler: function(name){\n        delete this._wreqrHandlers[name];\n      },\n  \n      // Remove all handlers from this registry\n      removeAllHandlers: function(){\n        this._wreqrHandlers = {};\n      }\n    });\n  \n    return Handlers;\n  })(Backbone, _);\n  \n  // Wreqr.CommandStorage\n  // --------------------\n  //\n  // Store and retrieve commands for execution.\n  Wreqr.CommandStorage = (function(){\n    \"use strict\";\n  \n    // Constructor function\n    var CommandStorage = function(options){\n      this.options = options;\n      this._commands = {};\n  \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    // Instance methods\n    _.extend(CommandStorage.prototype, Backbone.Events, {\n  \n      // Get an object literal by command name, that contains\n      // the `commandName` and the `instances` of all commands\n      // represented as an array of arguments to process\n      getCommands: function(commandName){\n        var commands = this._commands[commandName];\n  \n        // we don't have it, so add it\n        if (!commands){\n  \n          // build the configuration\n          commands = {\n            command: commandName, \n            instances: []\n          };\n  \n          // store it\n          this._commands[commandName] = commands;\n        }\n  \n        return commands;\n      },\n  \n      // Add a command by name, to the storage and store the\n      // args for the command\n      addCommand: function(commandName, args){\n        var command = this.getCommands(commandName);\n        command.instances.push(args);\n      },\n  \n      // Clear all commands for the given `commandName`\n      clearCommands: function(commandName){\n        var command = this.getCommands(commandName);\n        command.instances = [];\n      }\n    });\n  \n    return CommandStorage;\n  })();\n  \n  // Wreqr.Commands\n  // --------------\n  //\n  // A simple command pattern implementation. Register a command\n  // handler and execute it.\n  Wreqr.Commands = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      // default storage type\n      storageType: Wreqr.CommandStorage,\n  \n      constructor: function(options){\n        this.options = options || {};\n  \n        this._initializeStorage(this.options);\n        this.on(\"handler:add\", this._executeCommands, this);\n  \n        Wreqr.Handlers.prototype.constructor.apply(this, arguments);\n      },\n  \n      // Execute a named command with the supplied args\n      execute: function(name){\n        name = arguments[0];\n        var args = _.rest(arguments);\n  \n        if (this.hasHandler(name)){\n          this.getHandler(name).apply(this, args);\n        } else {\n          this.storage.addCommand(name, args);\n        }\n  \n      },\n  \n      // Internal method to handle bulk execution of stored commands\n      _executeCommands: function(name, handler, context){\n        var command = this.storage.getCommands(name);\n  \n        // loop through and execute all the stored command instances\n        _.each(command.instances, function(args){\n          handler.apply(context, args);\n        });\n  \n        this.storage.clearCommands(name);\n      },\n  \n      // Internal method to initialize storage either from the type's\n      // `storageType` or the instance `options.storageType`.\n      _initializeStorage: function(options){\n        var storage;\n  \n        var StorageType = options.storageType || this.storageType;\n        if (_.isFunction(StorageType)){\n          storage = new StorageType();\n        } else {\n          storage = StorageType;\n        }\n  \n        this.storage = storage;\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Wreqr.RequestResponse\n  // ---------------------\n  //\n  // A simple request/response implementation. Register a\n  // request handler, and return a response from it\n  Wreqr.RequestResponse = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      request: function(name){\n        if (this.hasHandler(name)) {\n          return this.getHandler(name).apply(this, _.rest(arguments));\n        }\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Event Aggregator\n  // ----------------\n  // A pub-sub object that can be used to decouple various parts\n  // of an application through event-driven architecture.\n  \n  Wreqr.EventAggregator = (function(Backbone, _){\n    \"use strict\";\n    var EA = function(){};\n  \n    // Copy the `extend` function used by Backbone's classes\n    EA.extend = Backbone.Model.extend;\n  \n    // Copy the basic Backbone.Events on to the event aggregator\n    _.extend(EA.prototype, Backbone.Events);\n  \n    return EA;\n  })(Backbone, _);\n  \n  // Wreqr.Channel\n  // --------------\n  //\n  // An object that wraps the three messaging systems:\n  // EventAggregator, RequestResponse, Commands\n  Wreqr.Channel = (function(Wreqr){\n    \"use strict\";\n  \n    var Channel = function(channelName) {\n      this.vent        = new Backbone.Wreqr.EventAggregator();\n      this.reqres      = new Backbone.Wreqr.RequestResponse();\n      this.commands    = new Backbone.Wreqr.Commands();\n      this.channelName = channelName;\n    };\n  \n    _.extend(Channel.prototype, {\n  \n      // Remove all handlers from the messaging systems of this channel\n      reset: function() {\n        this.vent.off();\n        this.vent.stopListening();\n        this.reqres.removeAllHandlers();\n        this.commands.removeAllHandlers();\n        return this;\n      },\n  \n      // Connect a hash of events; one for each messaging system\n      connectEvents: function(hash, context) {\n        this._connect('vent', hash, context);\n        return this;\n      },\n  \n      connectCommands: function(hash, context) {\n        this._connect('commands', hash, context);\n        return this;\n      },\n  \n      connectRequests: function(hash, context) {\n        this._connect('reqres', hash, context);\n        return this;\n      },\n  \n      // Attach the handlers to a given message system `type`\n      _connect: function(type, hash, context) {\n        if (!hash) {\n          return;\n        }\n  \n        context = context || this;\n        var method = (type === 'vent') ? 'on' : 'setHandler';\n  \n        _.each(hash, function(fn, eventName) {\n          this[type][method](eventName, _.bind(fn, context));\n        }, this);\n      }\n    });\n  \n  \n    return Channel;\n  })(Wreqr);\n  \n  // Wreqr.Radio\n  // --------------\n  //\n  // An object that lets you communicate with many channels.\n  Wreqr.radio = (function(Wreqr, _){\n    \"use strict\";\n  \n    var Radio = function() {\n      this._channels = {};\n      this.vent = {};\n      this.commands = {};\n      this.reqres = {};\n      this._proxyMethods();\n    };\n  \n    _.extend(Radio.prototype, {\n  \n      channel: function(channelName) {\n        if (!channelName) {\n          throw new Error('Channel must receive a name');\n        }\n  \n        return this._getChannel( channelName );\n      },\n  \n      _getChannel: function(channelName) {\n        var channel = this._channels[channelName];\n  \n        if(!channel) {\n          channel = new Wreqr.Channel(channelName);\n          this._channels[channelName] = channel;\n        }\n  \n        return channel;\n      },\n  \n      _proxyMethods: function() {\n        _.each(['vent', 'commands', 'reqres'], function(system) {\n          _.each( messageSystems[system], function(method) {\n            this[system][method] = proxyMethod(this, system, method);\n          }, this);\n        }, this);\n      }\n    });\n  \n  \n    var messageSystems = {\n      vent: [\n        'on',\n        'off',\n        'trigger',\n        'once',\n        'stopListening',\n        'listenTo',\n        'listenToOnce'\n      ],\n  \n      commands: [\n        'execute',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ],\n  \n      reqres: [\n        'request',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ]\n    };\n  \n    var proxyMethod = function(radio, system, method) {\n      return function(channelName) {\n        var messageSystem = radio._getChannel(channelName)[system];\n  \n        return messageSystem[method].apply(messageSystem, _.rest(arguments));\n      };\n    };\n  \n    return new Radio();\n  \n  })(Wreqr, _);\n  \n\n  return Backbone.Wreqr;\n\n}));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],4:[function(require,module,exports){\n(function (global){\n( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery', 'modui-base' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null), require( 'modui-base' ) );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ), root.Backbone.ModuiBase );\n\t}\n}( this, function( _, Backbone, $, Super ) {\n\nvar lastPossibleViewElement = $( 'body' )[ 0 ];\nvar mOpenPopups = [];\n\nvar kState_Closed = 'closed';\nvar kState_Open = 'open';\nvar kState_Closing = 'closing';\n\nvar kFadeTime = 100;\nvar kMinTimeAfterOpenBeforeCloseOnOutsideClick = 100;\n\nvar kPositions = [\n\t'bottom center',\n\t'top center',\n\t'right center',\n\t'left center',\n\t'bottom center right',\n\t'bottom center left',\n\t'top center right',\n\t'top center left',\n\t'bottom left',\n\t'bottom right',\n\t'top left',\n\t'top right',\n\t'right top',\n\t'right bottom',\n\t'left top',\n\t'left bottom'\n];\n\nvar kPositionClasses = _.map( kPositions, function( thisPosition ) {\n\treturn thisPosition.replace( /\\ /g, '-' );\n} );\n\nvar mWindowEventListenersAttached = false;\n\nBackbone.ModuiPopup = Super.extend( {\n\toptions : [\n\t\t'target!',\n\t\t'contents',\n\t\t{ position : 'bottom center' },\n\t\t{ strictPositioning : false },\n\t\t{ distanceAway : 12 }, // margin / pointer is 10 pixels. With this default the tip of the pointer ends up 2 pixels from target\n\t\t{ pointerOffset : 0 },\n\t\t{ keepWithinRect : function() { return {\n\t\t\ttop : $( window ).scrollTop(),\n\t\t\tbottom : $( window ).scrollTop() + $( window ).height(),\n\t\t\tleft   : 0,\n\t\t\tright  : $( window ).width()\n\t\t}; } },\n\t\t{ closeOnOutsideClick : true },\n\t\t'onClose',\n\t\t'signature',\n\t\t'zIndex',\n\t\t{ 'extraClassName' : '' }, // appended to regular class names to facilitate styling\n\t\t{ 'kPointerHeight' : 10 }\n\t],\n\n\tpassMessages : { '*' : '.' }, // pass all courier messages directly through to parent view\n\n\tclassName : 'modui-popup',\n\n\tinitialize : function() {\n\t\tvar _this = this;\n\n\t\tthis._setupTargetEl();\n\n\t\tthis._setState( kState_Closed );\n\n\t\tif( this.closeOnOutsideClick ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\t// in case this popup is triggered by a click, we need to wait\n\t\t\t\t// until the next event loop before we bind the outside click\n\t\t\t\t// event to closing the popup. otherwise would close right away\n\t\t\t\t_this.$el.bind( 'clickoutside', function( e ) {\n\t\t\t\t\t// we do not close the popup if the clicked element is within the original\n\t\t\t\t\t// target element that this popup is pointing at (or IS that element)\n\t\t\t\t\tif( e.target !== _this.targetEl.get( 0 ) && ! $.contains( _this.targetEl.get( 0 ), e.target ) ) {\n\t\t\t\t\t\t_this.close();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tif( ! mWindowEventListenersAttached ) {\n\t\t\t_attachWindowEventListeners();\n\t\t\tmWindowEventListenersAttached = true;\n\t\t}\n\t},\n\n\trender : function() {\n\t\tif( _.isString( this.contents ) ) {\n\t\t\tthis.$el.html( '<div class=\"html-contents\">' + this.contents + '</div>' );\n\t\t} else if( _.isObject( this.contents ) && _.isFunction( this.contents.render ) ) {\n\t\t\tthis.$el.html( '' );\n\t\t\tthis.$el.append( this.contents.$el );\n\t\t\tthis.contents.render();\n\t\t\tthis.contents.delegateEvents();\n\t\t} else {\n\t\t\t// if we don't have any contents specified, assume that this is\n\t\t\t// a derived class that defines its own contents with its own render.\n\t\t\tSuper.prototype.render.apply( this, arguments );\n\t\t}\n\n\t\tif( ! _.isUndefined( this.zIndex ) ) this.$el.css( 'z-index', this.zIndex );\n\t\telse if( this.targetEl.zIndex ) {\n\t\t\t// if no explicit z-index is supplied, make sure we are in front of\n\t\t\t// our target (being mindful over browser support).\n\n\t\t\tvar popupZIndex = parseInt( this.$el.css( 'z-index' ), 10 );\n\t\t\tif( _.isNaN( popupZIndex ) || popupZIndex <= this.targetEl.zIndex() ) {\n\t\t\t\tthis.$el.css( 'z-index', this.targetEl.zIndex() + 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\tclose : function() {\n\t\tvar _this = this;\n\n\t\tif( this.state !== kState_Open ) return;\n\n\t\tthis.$el.unbind( 'clickoutside' );\n\t\tthis._setState( kState_Closing );\n\n\t\tthis.spawn( 'closing' );\n\n\t\tsetTimeout( function() {\n\t\t\tif( _this.state === kState_Closing ) {\n\t\t\t\t_this.remove();\n\t\t\t\tmOpenPopups = _.without( mOpenPopups, _this );\n\t\t\t\t_this.spawn( 'closed' );\n\t\t\t}\n\t\t}, kFadeTime );\n\n\t\tif( _.isFunction( this.onClose ) ) this.onClose.apply( this, arguments );\n\t},\n \n\treposition : function( allowedPositions, tryAgainIfDimentionsChange ) {\n\t\tvar _this = this;\n\n\t\tif( _.isUndefined( allowedPositions ) ) {\n\t\t\tallowedPositions = [];\n\t\t\tif( this.currentPosition && this.state === 'open' ) allowedPositions.push( this.currentPosition );\n\n\t\t\tif( _.isArray( this.position ) ) allowedPositions = allowedPositions.concat( this.position )\n\t\t\telse allowedPositions.push( this.position );\n\n\t\t\tif( ! this.strictPositioning ) allowedPositions = _.union( allowedPositions, kPositions );\n\t\t}\n\n\t\tallowedPositions = _.unique( allowedPositions );\n\n\t\tif( _.isUndefined( tryAgainIfDimentionsChange ) ) tryAgainIfDimentionsChange = true;\n\n\t\tvar targetWidth = Math.round( this.targetEl.outerWidth() );\n\t\tvar targetHeight = Math.round( this.targetEl.outerHeight() );\n\n\t\tvar popupWidth  = Math.round( this.$el.outerWidth() );\n\t\tvar popupHeight = Math.round( this.$el.outerHeight() );\n\t\tvar popupMargin = Math.round( ( this.$el.outerWidth( true ) - this.$el.outerWidth() ) / 2 ); // later we assume vertical is the same as this horizontal margin\n\n\t\tvar kPointerHeight = this.kPointerHeight;\n\t\tvar pointerInsetForSidePositions = Math.round( kPointerHeight + kPointerHeight * .66 );\n\n\t\tvar offsetParent = $( window );\n\t\tvar parentWidth = Math.round( offsetParent.outerWidth() );\n\t\tvar parentHeight = Math.round( offsetParent.outerHeight() );\n\n\t\tvar distanceAway = this.distanceAway;\n\n\t\tvar targetOffset = this.targetEl.offset();\n\t\tvar pointerOffset = this.pointerOffset;\n\n\t\tvar cssPositionProps;\n\n\t\tvar firstPositionTried;\n\t\tvar currentPositionBeingTried = firstPositionTried = _.first( allowedPositions );\n\t\tvar haveTriedOtherPositions = false;\n\t\tvar degreeOfUndesirabilityByPosition = {};\n\t\tvar allPositionsAreOutOfBounds = false;\n\t\tvar done = false;\n\n\t\tdo {  // run through all our different positions to find one that works\n\t\t\tif( ! _.contains( kPositions, currentPositionBeingTried ) ) {\n\t\t\t\tthrow new Error( 'Invalid position for popup: ' + currentPositionBeingTried );\n\t\t\t}\n\n\t\t\tswitch( currentPositionBeingTried ) {\n\t\t\t\tcase 'bottom center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + ( targetWidth / 2 ) - ( popupWidth / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + ( targetWidth / 2 ) - ( popupWidth / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right top':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right bottom':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + targetHeight + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + ( targetHeight / 2 ) - ( popupHeight / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left top':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left bottom':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + targetHeight + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + ( targetHeight / 2 ) - ( popupHeight / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom center right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom center left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tright : parentWidth - Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tright : parentWidth - Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tright : parentWidth - ( targetOffset.left + targetWidth ) + pointerOffset - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + pointerOffset - popupMargin,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : parentWidth - ( targetOffset.left + targetWidth ) + pointerOffset - popupMargin,\n\t\t\t\t\t\tleft : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : targetOffset.left + pointerOffset - popupMargin,\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.$el\n\t\t\t\t.css( cssPositionProps )\n\t\t\t\t.removeClass( 'top left bottom right' )\n\t\t\t\t.removeClass( kPositionClasses.join( ' ' ) )\n\t\t\t\t.addClass( currentPositionBeingTried.split( ' ' )[ 0 ] )\n\t\t\t\t.addClass( currentPositionBeingTried.replace( /\\ /g, '-' ) )\n\t\t\t;\n\n\t\t\tdegreeOfUndesirabilityByPosition[ currentPositionBeingTried ] = this._getDegreeOfUndesirabilityOfCurrentPosition();\n\t\t\tvar cantFitIntoKeepWithinRectInThisPosition = degreeOfUndesirabilityByPosition[ currentPositionBeingTried ] !== 0;\n\n\t\t\tif( cantFitIntoKeepWithinRectInThisPosition ) {\n\t\t\t\tif( currentPositionBeingTried === firstPositionTried && haveTriedOtherPositions ) {\n\t\t\t\t\t// if we have tried all the different positions and are now are back at our\n\t\t\t\t\t// original 'preferred' position, then, shit, all positions were out of bounds.\\\n\t\t\t\t\t// just leave the popup in its default position, eventhough it is also out of bounds.\n\n\t\t\t\t\tallPositionsAreOutOfBounds = true;\n\t\t\t\t\tdone = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Popup is outside bounding rect. try a new position.\n\t\t\t\t\thaveTriedOtherPositions = true;\n\t\t\t\t\tcurrentPositionBeingTried = _getNextPositionToTry( currentPositionBeingTried, allowedPositions );\n\t\t\t\t}\n\t\t\t} else done = true;\n\t\t} while( ! done );\n\n\n\t\tif( allPositionsAreOutOfBounds && allowedPositions.length > 1 ) {\n\t\t\tvar bestOfTheBadPositions = _.first( _.sortBy( _.pairs( degreeOfUndesirabilityByPosition ), function( thisPosition ) {\n\t\t\t\t// if the current position and another position are tied, give preference to the current position\n\t\t\t\treturn thisPosition[ 1 ] + ( thisPosition[ 0 ] === _this.currentPosition && _this.state === 'open' ? -1 : 0 );\n\t\t\t} ) )[ 0 ];\n\n\t\t\tallPositionsAreOutOfBounds = this.reposition( [ bestOfTheBadPositions ] )\n\t\t}\n\n\t\tif( popupWidth !== Math.round( this.$el.outerWidth() ) || popupHeight !== Math.round( this.$el.outerHeight() ) ) {\n\t\t\t// there is a fringe case in which positining the popup actually changes its width and / or height.\n\t\t\t// for example, if the popup is placed just a few pixels from the edge of the view port, it might shrink\n\t\t\t// and text will wrap. so we have to check to see if the width or height of the popup has changed since\n\t\t\t// we started this re-positioning process. if so, try repositioning it once at the same position. if that\n\t\t\t// doesn't work, then move on to another position to see if we have better luck.\n\t\t\tif( ! tryAgainIfDimentionsChange ) return false;\n\n\t\t\tallPositionsAreOutOfBounds = this.reposition( [ currentPositionBeingTried ], false );\n\n\t\t\t// try one more time, with our new width and height.\n\t\t\t// if( ! this.reposition( [ currentPositionBeingTried ], false ) ) {\n\t\t\t// \t// if that doesn't work, then give up on this position\n\t\t\t// \tnewAllowedPositions = _.without( allowedPositions, currentPositionBeingTried );\n\t\t\t// \tif( newAllowedPositions.length > 0 ) allPositionsAreOutOfBounds = this.reposition( newAllowedPositions );\n\t\t\t// }\n\t\t}\n\n\t\tthis.currentPosition = currentPositionBeingTried;\n\n\t\treturn ! allPositionsAreOutOfBounds;\n\t},\n\n\t_onSubviewsRendered : function() {\n\t\tif( ! _.isUndefined( this.extraClassName ) ) this.$el.addClass( this.extraClassName );\n\t},\n\n\t_getDegreeOfUndesirabilityOfCurrentPosition : function() {\n\t\tvar myOffset = this.$el.offset();\n\t\tif( ! myOffset ) return false; // hidden elements have undefined offsets, not much we can do\n\n\t\tvar myWidth = this.$el.outerWidth();\n\t\tvar myHeight = this.$el.outerHeight();\n\n\t\tvar myRect = {\n\t\t\ttop : myOffset.top,\n\t\t\tright : myOffset.left + myWidth,\n\t\t\tbottom : myOffset.top + myHeight,\n\t\t\tleft : myOffset.left\n\t\t};\n\n\t\tvar keepWithinRect = _.result( this, 'keepWithinRect' );\n\n\t\tvar horizontalOverlap = Math.max( 0, Math.min( myRect.right, keepWithinRect.right ) - Math.max( myRect.left, keepWithinRect.left ) )\n\t\tvar veritcalOverlap = Math.max( 0, Math.min( myRect.bottom, keepWithinRect.bottom ) - Math.max( myRect.top, keepWithinRect.top ) );\n\n\t\tvar myRectArea = myWidth * myHeight;\n\n\t\tvar amountOutsideBoundingRect = myRectArea - horizontalOverlap * veritcalOverlap;\n\n\t\tvar documentRect = {\n\t\t\ttop : 0,\n\t\t\tleft : 0,\n\t\t\tright : $( document ).width(),\n\t\t\tbottom : $( document ).height()\n\t\t};\n\n\t\thorizontalOverlap = Math.max( 0, Math.min( myRect.right, documentRect.right ) - Math.max( myRect.left, documentRect.left ) )\n\t\tveritcalOverlap = Math.max( 0, Math.min( myRect.bottom, documentRect.bottom ) - Math.max( myRect.top, documentRect.top ) );\n\t\t\n\t\tvar amountOutsideDocument = myRectArea - horizontalOverlap * veritcalOverlap;\n\t\t\n\t\treturn amountOutsideBoundingRect + amountOutsideDocument * 10;\n\t},\n\n\t_onOptionsChanged : function( changedOptions ) {\n\t\tif( 'target' in changedOptions ) this._setupTargetEl();\n\t\tif( 'contents' in changedOptions ) this.render();\n\n\t\tthis.reposition();\n\t},\n\n\t_getParentView : function() {\n\t\tvar parent = null;\n\n\t\tvar curElement = this.targetEl;\n\t\twhile( curElement.length > 0 && curElement[0] !== lastPossibleViewElement ) {\n\t\t\tvar view = curElement.data( 'view' );\n\t\t\tif( view && _.isFunction( view.render ) ) {\n\t\t\t\tparent = view;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcurElement = curElement.parent();\n\t\t}\n\n\t\treturn parent;\n\t},\n\n\t_setState : function( newState ) {\n\t\tthis.state = newState;\n\t\tthis.$el.attr( 'data-state', this.state );\n\n\t\tif( newState === kState_Open ) this.timeOpened = (new Date()).getTime();\n\t},\n\n\t_setupTargetEl : function() {\n\t\tvar _this = this;\n\n\t\tthis.targetEl = _.isObject( this.target ) && _.isFunction( this.target.render ) ? this.target.$el : this.target;\n\n\t\tthis.targetEl.on( 'remove', function() {\n\t\t\t_this.close();\n\t\t} );\n\t}\n}, {\n\topen : function( options ) {\n\t\tvar popupInstance;\n\n\t\tif( options.signature ) {\n\t\t\tvar existingPopupsOfThisSignature = _.filter( mOpenPopups, function( thisPopup ) {\n\t\t\t\treturn thisPopup.signature === options.signature && thisPopup.state === kState_Open;\n\t\t\t} );\n\n\t\t\tif( existingPopupsOfThisSignature.length ) {\n\t\t\t\tvar popupWeAreGoingTokeep = existingPopupsOfThisSignature.pop();\n\n\t\t\t\tpopupInstance = popupWeAreGoingTokeep;\n\t\t\t\tpopupInstance.setOptions( options );\n\n\t\t\t\t_.each( existingPopupsOfThisSignature, function( thisExtraPopup ) {\n\t\t\t\t\tthisExtraPopup.close();\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif( ! popupInstance ) {\n\t\t\tpopupInstance = new this( options );\n\n\t\t\t$( 'body' ).append( popupInstance.$el );\n\n\t\t\tpopupInstance.render();\n\t\t\tpopupInstance.reposition();\n\t\t\tmOpenPopups.push( popupInstance );\n\t\t}\n\n\t\tpopupInstance._setState( kState_Open );\n\n\t\treturn popupInstance;\n\t}\n} );\n\n$( document ).bind( 'mousedown', function( e ) {\n\t_.each( mOpenPopups, function( thisPopup ) {\n\t\tif( thisPopup.closeOnOutsideClick &&\n\t\t\tthisPopup.state === kState_Open &&\n\t\t\t( new Date() ).getTime() - thisPopup.timeOpened > kMinTimeAfterOpenBeforeCloseOnOutsideClick ) {\n\t\t\tvar thisPopupEl = thisPopup.$el.get( 0 );\n\t\t\tif( thisPopupEl !== e.target && ! $.contains( thisPopupEl, e.target ) ) {\n\t\t\t\tthisPopup.close();\n\t\t\t}\n\t\t}\n\t} );\n} );\n\nfunction _attachWindowEventListeners() {\n\t$( window ).scroll( function() {\n\t\t_.each( mOpenPopups, function( thisPopup ) {\n\t\t\tthisPopup.reposition();\n\t\t} );\n\t} );\n\n\t$( window ).resize( function() {\n\t\t_.each( mOpenPopups, function( thisPopup ) {\n\t\t\tthisPopup.reposition();\n\t\t} );\n\t} );\n\n};\n\nfunction _elementPositionIsFixed( ele ) {\n\tif( ele.prop( 'tagName' ) === 'HTML' ) return false;\n\n\treturn ( ele.css( 'position' ) !== 'fixed' ) ? _elementPositionIsFixed( ele.offsetParent() ) : true;\n};\n\nfunction _getNextPositionToTry( position, positionsToTry ) {\n\tpositionIndex = _.indexOf( positionsToTry, position );\n\tif( positionIndex === -1 ) throw new Error( 'Could not find position \"' + position + '\" in the allowed positions.' );\n\n\treturn positionIndex === positionsToTry.length - 1 ? positionsToTry[ 0 ] : positionsToTry[ positionIndex + 1 ];\n}\n\n// return UMD\nreturn Backbone.ModuiPopup;\n\n} ) );\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"modui-base\":5}],5:[function(require,module,exports){\n(function (global){\n( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'backbone.View', 'backbone-view-options', 'backbone-courier', 'backbone-handle', 'backbone-subviews' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).View, require( 'backbone-view-options' ), require( 'backbone-courier' ), require( 'backbone-handle' ), require( 'backbone-subviews' ) );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, root.Backbone.View, root.Backbone.ViewOptions, root.Backbone.Courier, root.Backbone.Handle, root.Backbone.Subviews );\n\t}\n}( this, function( _, Backbone, Super, viewOptions, courier, handle, subviews ) {\n\nBackbone.ModuiBase = Super.extend( {\n\tclassName : 'view',\n\t\n\toptions : [],\n\n\tconstructor : function( options ) {\n\t\t//handle.add( Super.prototype ); // needs to be added to view prototype, so that logic executes before render() in derived classes\n\t\thandle.add( this ); // needs to be added to view prototype, so that logic executes before render() in derived classes\n\n\t\tviewOptions.add( this );\n\t\tthis.setOptions( options );\n\t\t\n\t\t// needs to be done before super is called, since super calls view#initialize,\n\t\t// and view#initialize might spawn events\n\t\tcourier.add( this );\n\n\t\t// must be done before super is called, since if this.render is referenced\n\t\t// in view#initialize (for example, if we bind an event to this.render),\n\t\t// we want it to reference the wrapped version (post subview) of render.\n\t\tsubviews.add( this );\n\n\t\tvar returnValue = Super.prototype.constructor.apply( this, arguments );\n\n\t\treturn returnValue;\n\t},\n\n\trender : function() {\n\t\tif( this.template ) {\n\t\t\tvar templateData = this.getOptions();\n\t\t\tif( this.model ) _.extend( templateData , this.model.attributes );\n\t\t\t_.extend( templateData , this._getTemplateData() );\n\n\t\t\tthis.$el.html( this._renderTemplate( templateData ) );\n\t\t}\n\t\t\n\t\tthis.resolveHandles();\n\t\t\n\t\treturn this;\n\t},\n\n\t_getTemplateData : function() {\n\t\t// this function may be overridden to add additional properties\n\t\t// to the object passed to the template's rendering function\n\t\treturn {};\n\t},\n\n\t_renderTemplate : function( templateData ) {\n\t\tvar html;\n\t\t\n\t\tif( _.isFunction( this.template ) )\n\t\t\thtml = this.template( templateData );\n\t\telse if( this.template.render )\n\t\t\thtml = this.template.render( templateData );\n\n\t\treturn html;\n\t},\n\n\t_onSubviewsRendered : function() {\n\t\t// override in derived classes\n\t}\n} );\n\nreturn Backbone.ModuiBase;\n\n} ) );\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"backbone-courier\":6,\"backbone-handle\":7,\"backbone-subviews\":8,\"backbone-view-options\":9}],6:[function(require,module,exports){\n(function (global){\n( function( root, factory ) {\n\t// UMD wrapper.\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tvar delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\tvar lastPossibleViewElement = _.isFunction( $ ) ? $( \"body\" )[ 0 ] : null;\n\n\tBackbone.Courier = {};\n\n\tBackbone.Courier.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\tsetElement : view.setElement\n\t\t};\n\n\t\t// ****************** Public Courier functions ****************** \n\n\t\tview.spawn = function( message, data ) {\n\t\t\t// can be called with message argument as an object, in which case message.name is required,\n\t\t\t// or can be called with message as a string that represents the name of the message and\n\t\t\t// data object which will be added to message object at message.data\n\t\t\tif( _.isString( message ) ) {\n\t\t\t\tmessage = {\n\t\t\t\t\tname : message,\n\t\t\t\t\tdata : data\n\t\t\t\t};\n\t\t\t} else if( _.isUndefined( message.name ) ) throw new Error( \"Undefined message name.\" );\n\n\t\t\tmessage.source = view;\n\t\t\tmessage.data = _.isUndefined( message.data ) ? {} : message.data;\n\n\t\t\tthis.trigger( message.name, message.data );\n\n\t\t\tvar isRoundTripMessage = message.name.charAt(message.name.length - 1) === \"!\";\n\n\t\t\tvar curParent = this._getParentView();\n\t\t\tvar messageShouldBePassed;\n\t\t\tvar value;\n\n\t\t\tif( message.name === 'removeButtonClicked' ) console.log( 'gotit' ); // REMOVEME\n\t\n\t\t\twhile( curParent ) {\n\t\t\t\t// check to see if curParent has an action to perform when this message is received.\n\t\t\t\tif( _.isObject( curParent.onMessages ) ) {\n\t\t\t\t\tvalue = getValueOfBestMatchingHashEntry( curParent.onMessages, message, curParent );\n\t\t\t\t\tif( value !== null ) {\n\t\t\t\t\t\tvar method = value;\n\t\t\t\t\t\tif( ! _.isFunction( method ) ) method = curParent[ value ];\n\t\t\t\t\t\tif( ! method ) throw new Error( \"Method \\\"\" + value + \"\\\" does not exist\" );\n\n\t\t\t\t\t\tvar returnValue = method.call( curParent, message.data, message.source, message.name );\n\t\t\t\t\t\tif( isRoundTripMessage ) return returnValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmessageShouldBePassed = isRoundTripMessage;\n\n\t\t\t\t// execute `passMessages` if its configured as a function\n\t\t\t\tvar passMessages = _.result( curParent, \"passMessages\" );\n\t\t\t\t// check to see if this message should be passed up a level\n\t\t\t\tif( _.isObject( passMessages ) ) {\n\t\t\t\t\tvalue = getValueOfBestMatchingHashEntry( passMessages, message, curParent );\n\t\t\t\t\tif( value !== null ) {\n\t\t\t\t\t\t\n\n\t\t\t\t\t\tif( value === \".\" )\n\t\t\t\t\t\t\t; // noop - pass this message through exactly as-is\n\t\t\t\t\t\telse if( _.isString( value ) ) {\n\t\t\t\t\t\t\t// if value is a string, we pass the existing message but\n\t\t\t\t\t\t\t// change the name to the supplied string\n\t\t\t\t\t\t\tmessage.name = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse throw new TypeError( \"Values of passMessages hash should be strings.\" );\n\n\t\t\t\t\t\tmessageShouldBePassed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif( ! messageShouldBePassed ) break; // if this message should not be passed, then we are done\n\n\t\t\t\tmessage.source = curParent; // keep the source of the message current as the message bubbles up the view hierarchy\n\t\t\t\tcurParent = curParent._getParentView();\n\t\t\t}\n\n\t\t\tif( isRoundTripMessage ) return undefined;\n\t\t};\n\n\t\t// supply your own _getParentView function on your view objects\n\t\t// if you would like to use custom means to determine a view's\n\t\t// \"parent\". The default means is to traverse the DOM tree and return\n\t\t// the closest parent element that has a view object attached in el.data( \"view\" )\n\t\tif( ! _.isFunction( view._getParentView ) )\n\t\t\tview._getParentView = function() {\n\t\t\t\tvar parent = null;\n\t\t\t\tvar curElement = this.$el.parent();\n\t\t\t\twhile( curElement.length > 0 && curElement[0] !== lastPossibleViewElement ) {\n\t\t\t\t\tvar view = curElement.data( \"view\" );\n\t\t\t\t\tif( view && _.isFunction( view.render ) ) {\n\t\t\t\t\t\tparent = view;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcurElement = curElement.parent();\n\t\t\t\t}\n\n\t\t\t\treturn parent;\n\t\t\t};\n\n\t\t// supply your own _getChildViewNamed function on your view objects\n\t\t// if you would like to use another means to test the source of your\n\t\t// messages (used for keys of onMessages and passMessages of the form\n\t\t// { \"message source\" : handler }). By default, child views are looked\n\t\t// up by name in view.subviews[ childViewName ] (and then tested against message.source)\n\t\tif( ! _.isFunction( view._getChildViewNamed ) )\n\t\t\tview._getChildViewNamed = function( childViewName ) {\n\t\t\t\tif( ! _.isObject( this.subviews ) ) return null;\n\t\t\t\treturn this.subviews[ childViewName ];\n\t\t\t};\n\n\t\t// ****************** Overridden Backbone.View functions ****************** \n\n\t\tview.setElement = function( element, delegate ) {\n\t\t\tvar retval = overriddenViewMethods.setElement.call( this, element, delegate );\n\t\t\tprepareViewElement( view );\n\t\t\treturn retval;\n\t\t};\n\n\t\t// ****************** Body of Backbone.Courier.add() function ****************** \n\n\t\tif( view.$el ) prepareViewElement( view ); // otherwise this will be done when #setElement is called\n\n\t\t// ****************** Private Utility Functions ****************** \n\n\t\tfunction prepareViewElement( view ) {\n\t\t\t// store a reference to the view object in the DOM element's jQuery data. Make sure it is supported.\n\t\t\tif( _.isFunction( view.$el.data ) && ! view.$el.data( \"view\" ) ) view.$el.data( \"view\", view );\n\t\t}\n\n\t\tfunction getValueOfBestMatchingHashEntry( hash, message, view ) {\n\t\t\t// return the value of the entry in a onMessages or passMessages hash that is the \n\t\t\t// \"most specific\" match for this message, or null, if there are no matches.\n\n\t\t\tvar matchingEntries = [];\n\n\t\t\tfor( var key in hash ) {\n\t\t\t\t// We are looking for keys in the hash that have the `message` argument\n\t\t\t\t// as the first word of their key. If we find one, they either need\n\t\t\t\t// no source qualifier as the second word of the key (in which case\n\t\t\t\t// we will pass this message regardless of where it comes from),\n\t\t\t\t// or we need this the name of the subview that is the source of the\n\t\t\t\t// message second word of the key.\n\n\t\t\t\tvar match = key.match( delegateEventSplitter );\n\n\t\t\t\tvar eventName = match[ 1 ], subviewName = match[ 2 ];\n\t\t\t\tvar eventNameRegEx = new RegExp( '^' + eventName.replace( /\\*/g, \"[\\\\w]*\" ) + '$' );\n\t\t\t\tif( ! eventNameRegEx.test( message.name ) ) continue;\n\n\t\t\t\tif( subviewName !== \"\" && view._getChildViewNamed( subviewName ) !== message.source ) continue;\n\n\t\t\t\tmatchingEntries.push( { eventName : eventName, subviewName : subviewName, value : hash[ key ] } );\n\t\t\t}\n\n\t\t\t// if more than one hash keys match, order them by specificity, that is,\n\t\t\t// in descending order of how many non-wild card characters they contain,\n\t\t\t// so that entry with most specificity is at index 0. Also, consider any\n\t\t\t// entries that have subview qualifier more specific than those that do not.\n\t\t\tif( matchingEntries.length > 1 )\n\t\t\t\tmatchingEntries = _.sortBy( matchingEntries, function( thisEntry ) {\n\t\t\t\t\tvar nonWildcardCharactersInEventName = thisEntry.eventName.replace( \"*\", \"\" );\n\t\t\t\t\tvar hasSubviewQualifier = thisEntry.subviewName !== \"\";\n\n\t\t\t\t\t// promote all entries with subview qualifiers to a higher level of specificity.\n\t\t\t\t\t// Figure there will never, ever be a 1000 character long event name\n\t\t\t\t\tvar specificity = ( hasSubviewQualifier ? 1000 : 0 ) + nonWildcardCharactersInEventName.length;\n\n\t\t\t\t\t// negate to sort in descending order\n\t\t\t\t\treturn( - specificity );\n\t\t\t\t} );\n\n\t\t\treturn matchingEntries.length ? matchingEntries[ 0 ].value : null;\n\t\t}\n\t};\n\n\treturn Backbone.Courier;\n} ) );\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],7:[function(require,module,exports){\n(function (global){\nvar delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n/*\n * Backbone.Handle, v0.1\n * Copyright (c)2014 Rotunda Software, LLC.\n * Parts adapted from Backbone.Marionette, Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.handle\n */\n\n( function( root, factory ) {\n\t// UMD wrapper.\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tBackbone.Handle = {};\n\n\tBackbone.Handle.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\tdelegateEvents : view.delegateEvents\n\t\t};\n\n\t\tview.resolveHandles = function() {\n\t\t\tvar _this = this;\n\n\t\t\tif( this.ui ) {\n\t\t\t\tif( ! this.uiBindings ) {\n\t\t\t\t\t// We want to store a copy of the ui hash in uiBindings, since afterwards the values \n\t\t\t\t\t// in the ui hash will be overridden with jQuery selectors, and we may need then again.\n\t\t\t\t\tthis.uiBindings = _.result( this, \"ui\" );\n\t\t\t\t}\n\n\t\t\t\t// refreshing the associated selectors since they should point to the newly rendered elements.\n\t\t\t\tthis.ui = {};\n\t\t\t\t_.each( _.keys( this.uiBindings ), function( key ) {\n\t\t\t\t\tvar selector = _this.uiBindings[ key ];\n\n\t\t\t\t\t// if the selector ends with \"!\", we assert that there is exactly one DOM element that matches\n\t\t\t\t\t// the selector. That is, we through an error if the number of matches elements != 1.\n\t\t\t\t\tvar assertOneAndOnlyOne = selector[ selector.length - 1 ] === \"!\";\n\t\t\t\t\tif( assertOneAndOnlyOne ) selector = selector.slice( 0, selector.length - 1 );\n\t\t\t\t\t_this.ui[ key ] = _this.$( selector );\n\t\t\t\t\tif( assertOneAndOnlyOne ) {\n\t\t\t\t\t\tif( _this.ui[ key ].length !== 1 )\n\t\t\t\t\t\t\tthrow new Error( \"Expected selector \\\"\" + selector + \"\\\" to match 1 element, but \" + _this.ui[ key ].length + \" found.\" );\n\t\t\t\t\t\t_this.uiBindings[ key ] = selector;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\n\t\tview.delegateEvents = function( events ) {\n\t\t\tvar _this = this;\n\n\t\t\tif( _.isFunction( this.events ) ) this.events = this.events.call( this.events );\n\t\t\tevents = events || _.clone( this.events ) || {};\n\n\t\t\tevents = this._exapandUIHandlesInHash.call( this, events );\n\n\t\t\treturn overriddenViewMethods.delegateEvents.call( this, events );\n\t\t};\n\n\t\tview._exapandUIHandlesInHash = function( events ) {\n\t\t\tvar newEvents = {};\n\n\t\t\tvar uiBindings = this.uiBindings || _.result( this, \"ui\" );\n\t\t\tif( ! uiBindings ) { return events; }\n\n\t\t\t_.each( events, function( value, key ) {\n\t\t\t\tvar match = key.match( delegateEventSplitter );\n\t\t\t\tvar eventName = match[ 1 ], uiElName = match[ 2 ];\n\n\t\t\t\tif( uiElName !== \"\" && ! _.isUndefined( uiBindings[ uiElName ] ) ) {\n\t\t\t\t\tvar selector = uiBindings[ uiElName ];\n\t\t\t\t\tif( selector[ selector.length - 1 ] === \"!\" )\n\t\t\t\t\tselector = selector.slice( 0, selector.length - 1 );\n\n\t\t\t\t\tkey = eventName + \" \" + selector;\n\t\t\t\t}\n\n\t\t\t\tnewEvents[ key ] = value;\n\t\t\t} );\n\n\t\t\treturn newEvents;\n\t\t};\n\t};\n\n\treturn Backbone.Handle;\n} ) );\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],8:[function(require,module,exports){\n(function (global){\n/*\n * Backbone.Subviews, v0.7.4\n * Copyright (c)2013-2014 Rotunda Software, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.subviews\n*/\n( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tBackbone.Subviews = {};\n\n\tBackbone.Subviews.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\trender : view.render,\n\t\t\tremove : view.remove\n\t\t};\n\n\t\t// ****************** Overridden Backbone.View methods ****************** \n\n\t\tview.render = function() {\n\t\t\tvar args = Array.prototype.slice.call( arguments );\n\n\t\t\t_prerender.call( this );\n\t\t\tvar returnValue = overriddenViewMethods.render.apply( this, args );\n\t\t\t_postrender.call( this );\n\n\t\t\treturn returnValue;\n\t\t};\n\n\t\tview.remove = function() {\n\t\t\tthis.removeSubviews();\n\t\t\treturn overriddenViewMethods.remove.call( this );\n\t\t};\n\n\t\t// ****************** Additional public methods ****************** \n\n\t\tview.removeSubviews = function() {\n\t\t\t// Removes all subviews and cleans up references in this.subviews.\n\n\t\t\tif( this.subviews ) {\n\t\t\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\t\t\tthisSubview.remove();\n\t\t\t\t} );\n\n\t\t\t\tdelete this.subviews;\n\t\t\t}\n\t\t};\n\n\t\t// ****************** Additional private methods ****************** \n\n\t\tview._createSubview = function( subviewName, placeHolderDiv ) {\n\t\t\t// Return a new subview instance given a subview name and its placeHolderDiv.\n\t\t\t// Implemented as instance method so that this behavior may be customized / overridden.\n\t\t\tvar subviewCreator = this.subviewCreators[ subviewName ];\n\t\t\tif( _.isUndefined( subviewCreator ) ) throw new Error( \"Can not find subview creator for subview named: \" + subviewName );\n\n\t\t\treturn subviewCreator.apply( this );\n\t\t};\n\t};\n\n\t// ****************** Private utility functions ****************** \n\n\tfunction _prerender() {\n\t\tif( ! this.subviews ) this.subviews = {};\n\n\t\t// Detach each of our subviews that we have already created during previous\n\t\t// renders from the DOM, so that they do not loose their DOM events when\n\t\t// we re-render the contents of this view's DOM element.\n\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\tthisSubview.$el.detach();\n\t\t} );\n\t}\n\n\tfunction _postrender() {\n\t\tvar _this = this;\n\t\tthis.subviewCreators = this.subviewCreators || {};\n\n\t\t// Support subviewCreators as both objects and functions.\n\t\tthis.subviewCreators = _.result( this, \"subviewCreators\" );\n\t\t\n\t\tthis.$( \"[data-subview]\" ).each( function() {\n\t\t\tvar thisPlaceHolderDiv = $( this );\n\t\t\tvar subviewName = thisPlaceHolderDiv.attr( \"data-subview\" );\n\t\t\tvar newSubview;\n\n\t\t\tif( _.isUndefined( _this.subviews[ subviewName ] ) ) {\n\t\t\t\tnewSubview = _this._createSubview( subviewName, thisPlaceHolderDiv );\n\t\t\t\tif( newSubview === null ) return;  // subview creators can return null to indicate that the subview should not be created\n\t\t\t\t_this.subviews[ subviewName ] = newSubview;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// If the subview is already defined, then use the existing subview instead\n\t\t\t\t// of creating a new one. This allows us to re-render a parent view without\n\t\t\t\t// loosing any dynamic state data on the existing subview objects. To force\n\t\t\t\t// re-initialization of subviews, call view.removeSubviews before re-rendering.\n\n\t\t\t\tnewSubview = _this.subviews[ subviewName ];\n\t\t\t}\n\n\t\t\tthisPlaceHolderDiv.replaceWith( newSubview.$el );\n\t\t} );\n\n\t\t// Now that all subviews have been created, render them one at a time, in the\n\t\t// order they occur in the DOM.\n\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\tthisSubview.render();\n\t\t} );\n\n\t\t// Call this.onSubviewsRendered after everything is done (hook for application defined logic)\n\t\tif( _.isFunction( this.onSubviewsRendered ) ) this.onSubviewsRendered.call( this );\n\t\tif( _.isFunction( this._onSubviewsRendered ) ) this._onSubviewsRendered.call( this ); // depreciated. backwards compatibility for versions < 0.6.\n\t}\n\n\treturn Backbone.Subviews;\n} ) );\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],9:[function(require,module,exports){\n(function (global){\n/*\n * Backbone.ViewOptions, v0.2.4\n * Copyright (c)2014 Rotunda Software, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.viewOptions\n*/\n\n( function( root, factory ) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine([ 'underscore', 'backbone' ], factory );\n\t} else if (typeof exports === 'object') {\n\t\t// Node\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null) );\n\t} else {\n\t\t// Browser globals\n\t\troot.returnExports = factory( root._, root.Backbone );\n\t}\n} ( this, function( _, Backbone ) {\n\tBackbone.ViewOptions = {};\n\n\tBackbone.ViewOptions.add = function( view, optionsDeclarationsProperty ) {\n\t\tif( _.isUndefined( optionsDeclarationsProperty ) ) optionsDeclarationsProperty = \"options\";\n\n\t\t// ****************** Public methods added to view ******************\n\n\t\tview.setOptions = function( options ) {\n\t\t\tvar _this = this;\n\t\t\tvar optionsThatWereChanged = {};\n\t\t\tvar optionsThatWereChangedPreviousValues = {};\n\n\t\t\tvar optionDeclarations = _.result( this, optionsDeclarationsProperty );\n\n\t\t\tif( ! _.isUndefined( optionDeclarations ) ) {\n\t\t\t\tvar normalizedOptionDeclarations = _normalizeOptionDeclarations( optionDeclarations );\n\n\t\t\t\t_.each( normalizedOptionDeclarations, function( thisOptionProperties, thisOptionName ) {\n\t\t\t\t\tvar thisOptionRequired = thisOptionProperties.required;\n\t\t\t\t\tvar thisOptionDefaultValue = thisOptionProperties.defaultValue;\n\n\t\t\t\t\tif( thisOptionRequired ) {\n\t\t\t\t\t\t// note we do not throw an error if a required option is not supplied, but it is\n\t\t\t\t\t\t// found on the object itself (due to a prior call of view.setOptions, most likely)\n\n\t\t\t\t\t\tif( ( ! options || ! _.contains( _.keys( options ), thisOptionName ) ) && _.isUndefined( _this[ thisOptionName ] ) )\n\t\t\t\t\t\t\tthrow new Error( \"Required option \\\"\" + thisOptionName + \"\\\" was not supplied.\" );\n\n\t\t\t\t\t\tif( options && _.contains( _.keys( options ), thisOptionName ) && _.isUndefined( options[ thisOptionName ] ) )\n\t\t\t\t\t\t\tthrow new Error( \"Required option \\\"\" + thisOptionName + \"\\\" can not be set to undefined.\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// attach the supplied value of this option, or the appropriate default value, to the view object\n\t\t\t\t\tif( options && thisOptionName in options && ! _.isUndefined( options[ thisOptionName ] ) ) {\n\t\t\t\t\t\tvar oldValue = _this[ thisOptionName ];\n\t\t\t\t\t\tvar newValue = options[ thisOptionName ];\n\t\t\t\t\t\t// if this option already exists on the view, and the new value is different,\n\t\t\t\t\t\t// make a note that we will be changing it\n\t\t\t\t\t\tif( ! _.isUndefined( oldValue ) && oldValue !== newValue ) {\n\t\t\t\t\t\t\toptionsThatWereChangedPreviousValues[ thisOptionName ] = oldValue;\n\t\t\t\t\t\t\toptionsThatWereChanged[ thisOptionName ] = newValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this[ thisOptionName ] = newValue;\n\t\t\t\t\t\t// note we do NOT delete the option off the options object here so that\n\t\t\t\t\t\t// multiple views can be passed the same options object without issue.\n\t\t\t\t\t}\n\t\t\t\t\telse if( _.isUndefined( _this[ thisOptionName ] ) ) {\n\t\t\t\t\t\t// note defaults do not write over any existing properties on the view itself.\n\t\t\t\t\t\t_this[ thisOptionName ] = thisOptionDefaultValue;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif( _.keys( optionsThatWereChanged ).length > 0 ) {\n\t\t\t\tif( _.isFunction( _this.onOptionsChanged ) )\n\t\t\t\t\t_this.onOptionsChanged( optionsThatWereChanged, optionsThatWereChangedPreviousValues );\n\t\t\t\telse if( _.isFunction( _this._onOptionsChanged ) )\n\t\t\t\t\t_this._onOptionsChanged( optionsThatWereChanged, optionsThatWereChangedPreviousValues );\n\t\t\t}\n\t\t};\n\n\t\tview.getOptions = function() {\n\t\t\tvar optionDeclarations = _.result( this, optionsDeclarationsProperty );\n\t\t\tif( _.isUndefined( optionDeclarations ) ) return {};\n\n\t\t\tvar normalizedOptionDeclarations = _normalizeOptionDeclarations( optionDeclarations );\n\t\t\tvar optionsNames = _.keys( normalizedOptionDeclarations );\n\n\t\t\treturn _.pick( this, optionsNames );\n\t\t};\n\t};\n\n\t// ****************** Private Utility Functions ******************\n\n\tfunction _normalizeOptionDeclarations( optionDeclarations ) {\n\t\t// convert our short-hand option syntax (with exclamation marks, etc.)\n\t\t// to a simple array of standard option declaration objects.\n\n\t\tvar normalizedOptionDeclarations = {};\n\n\t\tif( ! _.isArray( optionDeclarations ) ) throw new Error( \"Option declarations must be an array.\" );\n\n\t\t_.each( optionDeclarations, function( thisOptionDeclaration ) {\n\t\t\tvar thisOptionName, thisOptionRequired, thisOptionDefaultValue;\n\n\t\t\tthisOptionRequired = false;\n\t\t\tthisOptionDefaultValue = undefined;\n\n\t\t\tif( _.isString( thisOptionDeclaration ) )\n\t\t\t\tthisOptionName = thisOptionDeclaration;\n\t\t\telse if( _.isObject( thisOptionDeclaration ) ) {\n\t\t\t\tthisOptionName = _.first( _.keys( thisOptionDeclaration ) );\n\t\t\t\tif( _.isFunction( thisOptionDeclaration[ thisOptionName ] ) )\n\t\t\t\t\tthisOptionDefaultValue = thisOptionDeclaration[ thisOptionName ];\n\t\t\t\telse\n\t\t\t\t\tthisOptionDefaultValue = _.clone( thisOptionDeclaration[ thisOptionName ] );\n\t\t\t}\n\t\t\telse throw new Error( \"Each element in the option declarations array must be either a string or an object.\" );\n\n\t\t\tif( thisOptionName[ thisOptionName.length - 1 ] === \"!\" ) {\n\t\t\t\tthisOptionRequired = true;\n\t\t\t\tthisOptionName = thisOptionName.slice( 0, thisOptionName.length - 1 );\n\t\t\t}\n\n\t\t\tnormalizedOptionDeclarations[ thisOptionName ] = normalizedOptionDeclarations[ thisOptionName ] || {};\n\t\t\tnormalizedOptionDeclarations[ thisOptionName ].required = thisOptionRequired;\n\t\t\tif( ! _.isUndefined( thisOptionDefaultValue ) ) normalizedOptionDeclarations[ thisOptionName ].defaultValue = thisOptionDefaultValue;\n\t\t} );\n\n\t\treturn normalizedOptionDeclarations;\n\t}\n\n\treturn Backbone.ViewOptions;\n\n} ) );\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],10:[function(require,module,exports){\n(function (global){\n/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory((typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory((typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],11:[function(require,module,exports){\n/* Citation controller */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n\n  var $els = {\n    output: $('#citation-output')\n  };\n\n  var citation1 = [\n    {\n      author: 'Copeland, Edward',\n      title: '“Money”',\n      container: false,\n      callouts: {\n        author: 'The author (21) and title (27) of the source, found on the first page of the essay.',\n        title: 'The author (21) and title (27) of the source, found on the first page of the essay.'\n      }\n    },\n    {\n      author: 'edited by Copeland and Juliet McMaster',\n      title: '_The Cambridge Companion to Jane Austen_',\n      publisher: 'Cambridge UP',\n      pubdate: '1997',\n      location: 'pp. 131–48',\n      callouts: {\n        author: 'The book has two editors, one of whom is Copeland. ' +\n          'They are <strong>other contributors</strong>. Since Edward ' +\n          'Copeland is named twice, his first name is omitted in the ' +\n          'second occurrence. See p. xxx.',\n        title: 'The essay is contained in a book titled <em>The Cambridge ' +\n          'Companion to Jane Austen</em>. The book is thus the container ' +\n          'of the essay. In this tool, we use underscores to impart <em>_italics_</em>.',\n        version: 'The book shows no sign of being a <strong>version</strong> ' +\n          '(such as a second edition). See p. xxx.',\n        number: 'No <strong>number</strong> is displayed (such as a ' +\n          'volume number). See p. xxx.',\n        publisher: 'The <strong>publisher</strong> is identified on the title page.',\n        pubdate: 'The <strong>publication date</strong> doesn’t appear ' +\n          'on the title page, but a copyright date is given on the reverse. ' +\n          'The latest copyright date should usually be treated as the publication ' +\n          'date unless the copyright page indicates that the book was significantly ' +\n          'changed at a later date (not just reprinted)',\n        location: 'For an essay in a book anthology, the <strong>location</strong> is ' +\n          'the range of page numbers from the starting one to the' +\n          'ending one. See p. xxx.'\n      }\n    }\n  ];\n\n  var showCitationIntro = function () {\n\n    $els.output.hide();\n\n    App.Content.show(Module.Views.Layout, {\n      forceShow: true,\n      preventDestroy: true\n    });\n\n    Module.Views.Layout.showChildView('intro', new Module.Views.Intro());\n    Module.Views.Layout.showChildView('form', new Module.Views.Citation.CollectionView({\n      collection: new Module.Models.Citation.Collection([{container: false}, {}])\n    }));\n\n  };\n\n  var showCitationForm = function () {\n\n    $els.output.show();\n\n    App.Content.show(Module.Views.Layout, {\n      forceShow: true,\n      preventDestroy: true\n    });\n\n    Module.Views.Layout.showChildView('intro', new Module.Views.Step1());\n    Module.Views.Layout.showChildView('form', new Module.Views.Citation.CollectionView({\n      collection: new Module.Models.Citation.Collection(citation1)\n    }));\n\n  };\n\n  return Backbone.Marionette.Controller.extend({\n    showCitationIntro: showCitationIntro,\n    showCitationForm: showCitationForm\n  });\n\n};\n\n},{}],12:[function(require,module,exports){\n/* Citation module */\n\nmodule.exports = function (Module, App, Backbone) {\n\n  'use strict';\n\n  require('./links')(Module, App, Backbone);\n  require('./models/citation-model.js')(Module, App, Backbone);\n  require('./views/citation-view.js')(Module, App, Backbone);\n  require('./views/citation-intro-view.js')(Module, App, Backbone);\n  require('./views/citation-step1-view.js')(Module, App, Backbone);\n  require('./views/layout-view.js')(Module, App, Backbone);\n\n  var Router = require('./routers')(Module, App, Backbone);\n  var Controller = require('./controllers')(Module, App, Backbone);\n\n  App.addInitializer(function () {\n    Module.router = new Router({\n      controller: new Controller()\n    });\n  });\n\n};\n\n},{\"./controllers\":11,\"./links\":13,\"./models/citation-model.js\":14,\"./routers\":15,\"./views/citation-intro-view.js\":21,\"./views/citation-step1-view.js\":22,\"./views/citation-view.js\":23,\"./views/layout-view.js\":24}],13:[function(require,module,exports){\n/* Link handler module */\n\n/*global window*/\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n\n  // Listen for internal links when pushState is enabled.\n  $('body').on('click', 'a', function (e) {\n\n    if (Backbone.history.options && Backbone.history.options.pushState) {\n\n      // Only act on internal links.\n      var href = $(this).attr('href');\n\n      if (href && href.charAt(0) === '#') {\n\n        // Disable link and route manually.\n        e.preventDefault();\n\n        href = (href === '#') ? '/' : href;\n        Backbone.history.navigate(href.substring(1), true);\n        window.scrollTo(0, 0);\n\n      }\n\n    }\n\n  });\n\n};\n\n},{}],14:[function(require,module,exports){\n/* Citation model */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  Module.Models = Module.Models || {};\n\n  var _ = Backbone._;\n\n  var Model = Backbone.Model.extend({\n\n    defaults: function () {\n      return {\n        title: '',\n        author: '',\n        version: '',\n        number: '',\n        publisher: '',\n        pubdate: '',\n        location: '',\n        container: true,\n        containerNumber: 1,\n        callouts: {},\n        order: this.collection.nextOrder()\n      };\n    },\n\n    getCitationString: function () {\n\n      var modelAttrs = this.attributes;\n\n      var containerAttrs = [\n        'title',\n        'author',\n        'version',\n        'number',\n        'publisher',\n        'pubdate',\n        'location'\n      ];\n\n      var sourceAttrs = [\n        'author',\n        'title'\n      ];\n\n      var formatAttribute = function (attr, str, separator) {\n        str = (str + separator).replace(/^[\\\"]/, '“').replace(/[\\\"”]$/, separator + '”');\n        return str.replace(/_([^_]+)_/g, '<em>$1</em>');\n      };\n\n      var filterAttrs = (this.attributes.container) ? containerAttrs : sourceAttrs;\n\n      // Filter attributes for valid string values, then reduce to a\n      // citation string.\n      var attrs = _.filter(filterAttrs, function (attr) {\n        var val = modelAttrs[attr];\n        return (typeof val === 'string' && val.replace(/\\s/g, '') !== '');\n      });\n\n      var last = attrs.length - 1;\n      var citation = attrs.map(function (attr, i) {\n        var separator = (i === last) ? '.' : ',';\n        return '<span class=\"field-' + attr + '\">' + formatAttribute(attr, modelAttrs[attr], separator) + '</span>';\n      });\n\n      // Wrap in span.\n      return '<span class=\"container-' + this.attributes.order + '\">' + citation.join(' ') + '</span> ';\n\n    }\n\n  });\n\n  var Collection = Backbone.Collection.extend({\n\n    model: Model,\n    comparator: 'order',\n\n    initialize: function () {\n      this.bind('add remove', this.updateNumbers);\n    },\n\n    updateNumbers: function () {\n      this.each(function (model, i) {\n        model.set('containerNumber', i);\n      });\n    },\n\n    counter: 0,\n\n    nextOrder: function () {\n      this.counter = this.counter + 1;\n      return this.counter;\n    }\n\n  });\n\n  Module.Models.Citation = {\n    Model: Model,\n    Collection: Collection\n  };\n\n};\n\n},{}],15:[function(require,module,exports){\n/* Citation router */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n  return Backbone.Marionette.AppRouter.extend({\n    appRoutes: {\n      '': 'showCitationIntro',\n      'step-1': 'showCitationForm'\n    }\n  });\n};\n\n},{}],16:[function(require,module,exports){\n(function (global){\nvar _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div> <p>This section will allow you to explore MLA citation style and the <strong>list of core elements</strong> through a series of examples. At the end of the steps, you will be able to explore the list of core elements interactively.</p> <p>This tool demonstrates the basic concepts of MLA citation style and makes reference to sections of the <em>Handbook</em> where concepts are explained in greater detail and many additional examples are given. If you already have the <em>Handbook</em>, you may want to keep it on hand as you proceed.</p> <p>This is the <strong>list of core elements</strong>:</p> </div>';\n}\nreturn __p;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],17:[function(require,module,exports){\n(function (global){\nvar _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"citation-output\"> <h4>Assembled citation</h4> <p id=\"citation-el\"></p> </div> <div id=\"citation-intro\"></div> <div id=\"citation-form\"></div> <div id=\"citation-thread\"><a class=\"button\" href=\"#step-1\">Next &gt;</a></div>';\n}\nreturn __p;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],18:[function(require,module,exports){\n(function (global){\nvar _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div> <h3>Citing an essay in a book collection</h3> </div>';\n}\nreturn __p;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],19:[function(require,module,exports){\n(function (global){\nvar _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<h3>Container '+\n((__t=( containerNumber ))==null?'':__t)+\n' </h3> <p class=\"field\"> <input id=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"title\" type=\"text\" '+\n((__t=( (title) ? ' value=\"' + title + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Title of container\"> <label for=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \">Title of container</label> </p> <p class=\"field\"> <input id=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"author\" type=\"text\" '+\n((__t=( (author) ? ' value=\"' + author + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Other contributor or contributors\"> <label for=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \">Other contributors</label> </p> <p class=\"field\"> <input id=\"container-version- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"version\" type=\"text\" '+\n((__t=( (version) ? ' value=\"' + version + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Version number\"> <label for=\"container-version- '+\n((__t=( order ))==null?'':__t)+\n' \">Version</label> </p> <p class=\"field\"> <input id=\"container-number- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"number\" type=\"text\" '+\n((__t=( (number) ? ' value=\"' + number + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Volume, issue, or record number\"> <label for=\"container-number- '+\n((__t=( order ))==null?'':__t)+\n' \">Number</label> </p> <p class=\"field\"> <input id=\"container-publisher- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"publisher\" type=\"text\" '+\n((__t=( (publisher) ? ' value=\"' + publisher + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Publisher\"> <label for=\"container-publisher- '+\n((__t=( order ))==null?'':__t)+\n' \">Publisher</label> </p> <p class=\"field\"> <input id=\"container-pubdate- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"pubdate\" type=\"text\" '+\n((__t=( (pubdate) ? ' value=\"' + pubdate + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Publication date\"> <label for=\"container-pubdate- '+\n((__t=( order ))==null?'':__t)+\n' \">Publication date</label> </p> <p class=\"field final-element\"> <input id=\"container-location- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"location\" type=\"text\" '+\n((__t=( (location) ? ' value=\"' + location + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Page numbers, DOI, URL\"> <label for=\"container-location- '+\n((__t=( order ))==null?'':__t)+\n' \">Location</label> </p> <p class=\"form-controls\"> <button class=\"add-container\" type=\"button\">+ Add a larger container</button> <button class=\"remove-container\" type=\"button\"></button> </p>';\n}\nreturn __p;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],20:[function(require,module,exports){\n(function (global){\nvar _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"field final-element\"> <input id=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"author\" type=\"text\" '+\n((__t=( (author) ? ' value=\"' + author + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Author of source\"> <label for=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \">Author</label> </p> <p class=\"field final-element\"> <input id=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"title\" type=\"text\" '+\n((__t=( (title) ? ' value=\"' + title + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Title of source\"> <label for=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \">Title of source</label> </p> <p class=\"form-controls\"> <button class=\"add-container\" type=\"button\">+ Add a larger container</button> </p>';\n}\nreturn __p;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],21:[function(require,module,exports){\n/* Intro view */\n\n'use strict';\n\nvar introTemplate = require('../templates/citation-intro.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n    getTemplate: introTemplate\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Intro = ItemView;\n\n};\n\n},{\"../templates/citation-intro.tpl\":16}],22:[function(require,module,exports){\n/* Intro view */\n\n'use strict';\n\nvar template = require('../templates/citation-step-1.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n    getTemplate: template\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Step1 = ItemView;\n\n};\n\n},{\"../templates/citation-step-1.tpl\":18}],23:[function(require,module,exports){\n/* Citation views */\n\n'use strict';\n\nvar popup = require('modui-popup');\n\nvar sourceTemplate = require('../templates/source-form.tpl');\nvar containerTemplate = require('../templates/container-form.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n  var _ = Backbone._;\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n\n    tagName: 'fieldset',\n\n    getTemplate: function () {\n      return this.model.get('container') ? containerTemplate : sourceTemplate;\n    },\n\n    className: function () {\n      return this.model.get('container') ? 'container' : 'source';\n    },\n\n    events: {\n      'click .remove-container': 'removeContainer',\n      'focus input': 'showPopup',\n      'blur input': 'hideHilite',\n      'keyup input': 'updateField'\n    },\n\n    updateField: function (evt) {\n      var $field = $(evt.target);\n      var newAttr = {};\n      newAttr[$field.attr('name')] = $field.val();\n      this.model.set(newAttr);\n    },\n\n    removeContainer: function () {\n      this.model.collection.remove(this.model);\n    },\n\n    showPopup: function (evt) {\n\n      var fieldName = $(evt.target).attr('name');\n      if (this.model.attributes.callouts[fieldName]) {\n        popup.open({\n          target: $(evt.target).closest('.field'),\n          position: 'right center',\n          contents: this.model.attributes.callouts[fieldName]\n        });\n        console.log(fieldName);\n      }\n\n      $('.citation-output span').removeClass('hilite');\n      $('.container-' + this.model.attributes.order + ' .field-' + fieldName).addClass('hilite');\n\n    },\n\n    hideHilite: function () {\n      $('.citation-output span').removeClass('hilite');\n    },\n\n    serializeData: function () {\n      return this.model.toJSON();\n    }\n\n  });\n\n  var CollectionView = Backbone.Marionette.CollectionView.extend({\n\n    childView: ItemView,\n    tagName: 'div',\n    className: 'citation',\n\n    events: {\n      'click .add-container': 'addContainer',\n      'keyup input': 'updateCitation'\n    },\n\n    onRender: function() {\n      this.updateCitation();\n    },\n\n    addContainer: function () {\n      this.collection.add({});\n    },\n\n    onRemoveChild: function () {\n      this.updateCitation();\n    },\n\n    updateCitation: function () {\n      var citation = _.map(this.collection.models, function (model) {\n        return model.getCitationString();\n      });\n      $('#citation-el').html(citation.join(''));\n    }\n\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Citation = {\n    ItemView: ItemView,\n    CollectionView: CollectionView\n  };\n\n};\n\n},{\"../templates/container-form.tpl\":19,\"../templates/source-form.tpl\":20,\"modui-popup\":4}],24:[function(require,module,exports){\n/* Layout view */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var layoutTemplate = require('../templates/citation-layout.tpl');\n\n  var Layout = Backbone.Marionette.LayoutView.extend({\n\n    template: layoutTemplate,\n    className: 'citation-template',\n\n    regions: {\n      output: '#citation-output',\n      intro: '#citation-intro',\n      form: '#citation-form'\n    }\n\n  });\n\n  Module.Views = Module.Views || {};\n  Module.Views.Layout = new Layout();\n\n};\n\n},{\"../templates/citation-layout.tpl\":17}],25:[function(require,module,exports){\nmodule.exports=[\n  \"plagiarism\",\n  \"works cited\",\n  \"How to cite a Web site\",\n  \"How many spaces after a period\",\n  \"How to cite a YouTube video\"\n]\n\n},{}],26:[function(require,module,exports){\n(function (global){\n/**\n * Main theme JS file driven by CommonJS and Browserify.\n */\n\n'use strict';\n\nvar jQuery = (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null);\nvar underscore = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nvar Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n\n// Side-shim jQuery and Underscore before requiring Marionette.\nBackbone.$ = jQuery;\nBackbone._ = underscore;\nrequire('backbone.marionette');\n\n// Create the application.\nvar App = new Backbone.Marionette.Application();\n\n// Add regions.\nApp.addRegions({\n  Content: '#citation-tool'\n});\n\n// Load modules.\nrequire('./page-menu')(jQuery);\nrequire('./search-hints')(jQuery);\nApp.module('Citations', require('./citations'));\n\n// Start the history listener.\nApp.on('start', function () {\n  Backbone.history.start({\n    pushState: true,\n    root: '/understanding-mla-style/'\n  });\n});\n\n// Start the application.\nif (jQuery('#citation-tool').length) {\n  App.start();\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./citations\":12,\"./page-menu\":27,\"./search-hints\":28,\"backbone.marionette\":1}],27:[function(require,module,exports){\n/* Page menu module */\n\n/*global document*/\n\nmodule.exports = function ($) {\n\n  'use strict';\n\n  var $button = $('.page-sub-menu-link');\n  var $targets = $('.page-sub-menu-link, .page-sub-menu');\n  var $parent = $('.page-menu');\n\n  var activeClass = 'page-menu-active';\n  var hoverOutDelay = 250;\n\n  var closeDropdown = function (e) {\n    e.stopPropagation();\n    $parent.removeClass(activeClass);\n    document.removeEventListener('touchstart', closeDropdown);\n  };\n\n  $targets.on({\n    mouseover: function() {\n      if ($button.prop('hoverTimeout')) {\n        $button.prop('hoverTimeout', clearTimeout($button.prop('hoverTimeout')));\n      }\n      $parent.addClass(activeClass);\n    },\n    mouseleave: function() {\n      $button.prop('hoverTimeout', setTimeout(function() {\n        $parent.removeClass(activeClass);\n      }, hoverOutDelay));\n    }\n  });\n\n  if ('ontouchstart' in document.documentElement) {\n\n    $button.on('touchstart', function(e) {\n\n      if (e.touches.length === 1) {\n\n        e.stopPropagation();\n\n        if (!$parent.hasClass(activeClass)) {\n\n          // Prevent link on first touch.\n          if (e.target === this || e.target.parentNode === this) {\n              e.preventDefault();\n          }\n\n          $parent.addClass(activeClass);\n          document.addEventListener('touchstart', closeDropdown, false);\n\n        }\n\n      }\n\n    });\n\n  }\n\n};\n\n},{}],28:[function(require,module,exports){\n/* Search hints module */\n\nmodule.exports = function ($) {\n\n  'use strict';\n\n  require('typeahead.js');\n\n  // Load terms.\n  var searchTerms = require('../data/searchTerms.json');\n\n  // Toggle order drop-down.\n  $('.order-button-link').on('click', function () {\n    $(this).parent().toggleClass('open');\n  });\n\n  // Add Typeahead to search field.\n  function findMatches (q, cb) {\n\n    var matches = [];\n    var substrRegex = new RegExp(q, 'i');\n\n    $.each(searchTerms, function (i, str) {\n      if (substrRegex.test(str)) {\n        matches.push(str);\n      }\n    });\n\n    cb(matches);\n\n  }\n\n  var options = {\n    hint: true,\n    highlight: true,\n    minLength: 2\n  };\n\n  var engine = {\n    name: 'terms',\n    source: findMatches\n  };\n\n  // Bind to search field.\n  $('.search-field')\n    .typeahead(options, engine)\n    .on('typeahead:selected', function () {\n      $(this).closest('form').submit();\n    });\n\n};\n\n},{\"../data/searchTerms.json\":25,\"typeahead.js\":10}]},{},[26])\n\n","// MarionetteJS (Backbone.Marionette)\n// ----------------------------------\n// v2.4.4\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://marionettejs.com\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {\n      return (root.Marionette = root.Mn = factory(root, Backbone, _));\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    var Wreqr = require('backbone.wreqr');\n    var BabySitter = require('backbone.babysitter');\n    module.exports = factory(root, Backbone, _);\n  } else {\n    root.Marionette = root.Mn = factory(root, root.Backbone, root._);\n  }\n\n}(this, function(root, Backbone, _) {\n  'use strict';\n\n  var previousMarionette = root.Marionette;\n  var previousMn = root.Mn;\n\n  var Marionette = Backbone.Marionette = {};\n\n  Marionette.VERSION = '2.4.4';\n\n  Marionette.noConflict = function() {\n    root.Marionette = previousMarionette;\n    root.Mn = previousMn;\n    return this;\n  };\n\n  // Get the Deferred creator for later use\n  Marionette.Deferred = Backbone.$.Deferred;\n\n  Marionette.FEATURES = {\n  };\n  \n  Marionette.isEnabled = function(name) {\n    return !!Marionette.FEATURES[name];\n  };\n  \n  /* jshint unused: false *//* global console */\n  \n  // Helpers\n  // -------\n  \n  // Marionette.extend\n  // -----------------\n  \n  // Borrow the Backbone `extend` method so we can use it as needed\n  Marionette.extend = Backbone.Model.extend;\n  \n  // Marionette.isNodeAttached\n  // -------------------------\n  \n  // Determine if `el` is a child of the document\n  Marionette.isNodeAttached = function(el) {\n    return Backbone.$.contains(document.documentElement, el);\n  };\n  \n  // Merge `keys` from `options` onto `this`\n  Marionette.mergeOptions = function(options, keys) {\n    if (!options) { return; }\n    _.extend(this, _.pick(options, keys));\n  };\n  \n  // Marionette.getOption\n  // --------------------\n  \n  // Retrieve an object, function or other value from a target\n  // object or its `options`, with `options` taking precedence.\n  Marionette.getOption = function(target, optionName) {\n    if (!target || !optionName) { return; }\n    if (target.options && (target.options[optionName] !== undefined)) {\n      return target.options[optionName];\n    } else {\n      return target[optionName];\n    }\n  };\n  \n  // Proxy `Marionette.getOption`\n  Marionette.proxyGetOption = function(optionName) {\n    return Marionette.getOption(this, optionName);\n  };\n  \n  // Similar to `_.result`, this is a simple helper\n  // If a function is provided we call it with context\n  // otherwise just return the value. If the value is\n  // undefined return a default value\n  Marionette._getValue = function(value, context, params) {\n    if (_.isFunction(value)) {\n      value = params ? value.apply(context, params) : value.call(context);\n    }\n    return value;\n  };\n  \n  // Marionette.normalizeMethods\n  // ----------------------\n  \n  // Pass in a mapping of events => functions or function names\n  // and return a mapping of events => functions\n  Marionette.normalizeMethods = function(hash) {\n    return _.reduce(hash, function(normalizedHash, method, name) {\n      if (!_.isFunction(method)) {\n        method = this[method];\n      }\n      if (method) {\n        normalizedHash[name] = method;\n      }\n      return normalizedHash;\n    }, {}, this);\n  };\n  \n  // utility method for parsing @ui. syntax strings\n  // into associated selector\n  Marionette.normalizeUIString = function(uiString, ui) {\n    return uiString.replace(/@ui\\.[a-zA-Z_$0-9]*/g, function(r) {\n      return ui[r.slice(4)];\n    });\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector.\n  // Returns a new, non-mutated, parsed events hash.\n  Marionette.normalizeUIKeys = function(hash, ui) {\n    return _.reduce(hash, function(memo, val, key) {\n      var normalizedKey = Marionette.normalizeUIString(key, ui);\n      memo[normalizedKey] = val;\n      return memo;\n    }, {});\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given value for regions\n  // swaps the @ui with the associated selector\n  Marionette.normalizeUIValues = function(hash, ui, properties) {\n    _.each(hash, function(val, key) {\n      if (_.isString(val)) {\n        hash[key] = Marionette.normalizeUIString(val, ui);\n      } else if (_.isObject(val) && _.isArray(properties)) {\n        _.extend(val, Marionette.normalizeUIValues(_.pick(val, properties), ui));\n        /* Value is an object, and we got an array of embedded property names to normalize. */\n        _.each(properties, function(property) {\n          var propertyVal = val[property];\n          if (_.isString(propertyVal)) {\n            val[property] = Marionette.normalizeUIString(propertyVal, ui);\n          }\n        });\n      }\n    });\n    return hash;\n  };\n  \n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-121\n  Marionette.actAsCollection = function(object, listProperty) {\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n  \n    _.each(methods, function(method) {\n      object[method] = function() {\n        var list = _.values(_.result(this, listProperty));\n        var args = [list].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  };\n  \n  var deprecate = Marionette.deprecate = function(message, test) {\n    if (_.isObject(message)) {\n      message = (\n        message.prev + ' is going to be removed in the future. ' +\n        'Please use ' + message.next + ' instead.' +\n        (message.url ? ' See: ' + message.url : '')\n      );\n    }\n  \n    if ((test === undefined || !test) && !deprecate._cache[message]) {\n      deprecate._warn('Deprecation warning: ' + message);\n      deprecate._cache[message] = true;\n    }\n  };\n  \n  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};\n  deprecate._cache = {};\n  \n  /* jshint maxstatements: 14, maxcomplexity: 7 */\n  \n  // Trigger Method\n  // --------------\n  \n  Marionette._triggerMethod = (function() {\n    // split the event name on the \":\"\n    var splitter = /(^|:)(\\w)/gi;\n  \n    // take the event section (\"section1:section2:section3\")\n    // and turn it in to uppercase name\n    function getEventName(match, prefix, eventName) {\n      return eventName.toUpperCase();\n    }\n  \n    return function(context, event, args) {\n      var noEventArg = arguments.length < 3;\n      if (noEventArg) {\n        args = event;\n        event = args[0];\n      }\n  \n      // get the method name from the event name\n      var methodName = 'on' + event.replace(splitter, getEventName);\n      var method = context[methodName];\n      var result;\n  \n      // call the onMethodName if it exists\n      if (_.isFunction(method)) {\n        // pass all args, except the event name\n        result = method.apply(context, noEventArg ? _.rest(args) : args);\n      }\n  \n      // trigger the event, if a trigger method exists\n      if (_.isFunction(context.trigger)) {\n        if (noEventArg + args.length > 1) {\n          context.trigger.apply(context, noEventArg ? args : [event].concat(_.drop(args, 0)));\n        } else {\n          context.trigger(event);\n        }\n      }\n  \n      return result;\n    };\n  })();\n  \n  // Trigger an event and/or a corresponding method name. Examples:\n  //\n  // `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n  // call the \"onFoo\" method.\n  //\n  // `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n  // call the \"onFooBar\" method.\n  Marionette.triggerMethod = function(event) {\n    return Marionette._triggerMethod(this, arguments);\n  };\n  \n  // triggerMethodOn invokes triggerMethod on a specific context\n  //\n  // e.g. `Marionette.triggerMethodOn(view, 'show')`\n  // will trigger a \"show\" event or invoke onShow the view.\n  Marionette.triggerMethodOn = function(context) {\n    var fnc = _.isFunction(context.triggerMethod) ?\n                  context.triggerMethod :\n                  Marionette.triggerMethod;\n  \n    return fnc.apply(context, _.rest(arguments));\n  };\n  \n  // DOM Refresh\n  // -----------\n  \n  // Monitor a view's state, and after it has been rendered and shown\n  // in the DOM, trigger a \"dom:refresh\" event every time it is\n  // re-rendered.\n  \n  Marionette.MonitorDOMRefresh = function(view) {\n    if (view._isDomRefreshMonitored) { return; }\n    view._isDomRefreshMonitored = true;\n  \n    // track when the view has been shown in the DOM,\n    // using a Marionette.Region (or by other means of triggering \"show\")\n    function handleShow() {\n      view._isShown = true;\n      triggerDOMRefresh();\n    }\n  \n    // track when the view has been rendered\n    function handleRender() {\n      view._isRendered = true;\n      triggerDOMRefresh();\n    }\n  \n    // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n    function triggerDOMRefresh() {\n      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {\n        Marionette.triggerMethodOn(view, 'dom:refresh', view);\n      }\n    }\n  \n    view.on({\n      show: handleShow,\n      render: handleRender\n    });\n  };\n  \n  /* jshint maxparams: 5 */\n  \n  // Bind Entity Events & Unbind Entity Events\n  // -----------------------------------------\n  //\n  // These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\n  // to methods on a target object.\n  //\n  // The first parameter, `target`, must have the Backbone.Events module mixed in.\n  //\n  // The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\n  // any object that has Backbone.Events mixed in) to bind the events from.\n  //\n  // The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n  // configuration. Multiple handlers can be separated by a space. A\n  // function can be supplied instead of a string handler name.\n  \n  (function(Marionette) {\n    'use strict';\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function bindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n  \n        var method = target[methodName];\n        if (!method) {\n          throw new Marionette.Error('Method \"' + methodName +\n            '\" was configured as an event handler, but does not exist.');\n        }\n  \n        target.listenTo(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function bindToFunction(target, entity, evt, method) {\n      target.listenTo(entity, evt, method);\n    }\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function unbindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n        var method = target[methodName];\n        target.stopListening(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function unbindToFunction(target, entity, evt, method) {\n      target.stopListening(entity, evt, method);\n    }\n  \n    // generic looping function\n    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {\n      if (!entity || !bindings) { return; }\n  \n      // type-check bindings\n      if (!_.isObject(bindings)) {\n        throw new Marionette.Error({\n          message: 'Bindings must be an object or function.',\n          url: 'marionette.functions.html#marionettebindentityevents'\n        });\n      }\n  \n      // allow the bindings to be a function\n      bindings = Marionette._getValue(bindings, target);\n  \n      // iterate the bindings and bind them\n      _.each(bindings, function(methods, evt) {\n  \n        // allow for a function as the handler,\n        // or a list of event names as a string\n        if (_.isFunction(methods)) {\n          functionCallback(target, entity, evt, methods);\n        } else {\n          stringCallback(target, entity, evt, methods);\n        }\n  \n      });\n    }\n  \n    // Export Public API\n    Marionette.bindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n    };\n  \n    Marionette.unbindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n    };\n  \n    // Proxy `bindEntityEvents`\n    Marionette.proxyBindEntityEvents = function(entity, bindings) {\n      return Marionette.bindEntityEvents(this, entity, bindings);\n    };\n  \n    // Proxy `unbindEntityEvents`\n    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {\n      return Marionette.unbindEntityEvents(this, entity, bindings);\n    };\n  })(Marionette);\n  \n\n  // Error\n  // -----\n  \n  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n  \n  Marionette.Error = Marionette.extend.call(Error, {\n    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',\n  \n    constructor: function(message, options) {\n      if (_.isObject(message)) {\n        options = message;\n        message = options.message;\n      } else if (!options) {\n        options = {};\n      }\n  \n      var error = Error.call(this, message);\n      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n  \n      this.captureStackTrace();\n  \n      if (options.url) {\n        this.url = this.urlRoot + options.url;\n      }\n    },\n  \n    captureStackTrace: function() {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, Marionette.Error);\n      }\n    },\n  \n    toString: function() {\n      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n    }\n  });\n  \n  Marionette.Error.extend = Marionette.extend;\n  \n  // Callbacks\n  // ---------\n  \n  // A simple way of managing a collection of callbacks\n  // and executing them at a later point in time, using jQuery's\n  // `Deferred` object.\n  Marionette.Callbacks = function() {\n    this._deferred = Marionette.Deferred();\n    this._callbacks = [];\n  };\n  \n  _.extend(Marionette.Callbacks.prototype, {\n  \n    // Add a callback to be executed. Callbacks added here are\n    // guaranteed to execute, even if they are added after the\n    // `run` method is called.\n    add: function(callback, contextOverride) {\n      var promise = _.result(this._deferred, 'promise');\n  \n      this._callbacks.push({cb: callback, ctx: contextOverride});\n  \n      promise.then(function(args) {\n        if (contextOverride) { args.context = contextOverride; }\n        callback.call(args.context, args.options);\n      });\n    },\n  \n    // Run all registered callbacks with the context specified.\n    // Additional callbacks can be added after this has been run\n    // and they will still be executed.\n    run: function(options, context) {\n      this._deferred.resolve({\n        options: options,\n        context: context\n      });\n    },\n  \n    // Resets the list of callbacks to be run, allowing the same list\n    // to be run multiple times - whenever the `run` method is called.\n    reset: function() {\n      var callbacks = this._callbacks;\n      this._deferred = Marionette.Deferred();\n      this._callbacks = [];\n  \n      _.each(callbacks, function(cb) {\n        this.add(cb.cb, cb.ctx);\n      }, this);\n    }\n  });\n  \n  // Controller\n  // ----------\n  \n  // A multi-purpose object to use as a controller for\n  // modules and routers, and as a mediator for workflow\n  // and coordination of other objects, views, and more.\n  Marionette.Controller = function(options) {\n    this.options = options || {};\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(this.options);\n    }\n  };\n  \n  Marionette.Controller.extend = Marionette.extend;\n  \n  // Controller Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Controller.prototype, Backbone.Events, {\n    destroy: function() {\n      Marionette._triggerMethod(this, 'before:destroy', arguments);\n      Marionette._triggerMethod(this, 'destroy', arguments);\n  \n      this.stopListening();\n      this.off();\n      return this;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // A handy way to merge options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  \n  });\n  \n  // Object\n  // ------\n  \n  // A Base Class that other Classes should descend from.\n  // Object borrows many conventions and utilities from Backbone.\n  Marionette.Object = function(options) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n  \n    this.initialize.apply(this, arguments);\n  };\n  \n  Marionette.Object.extend = Marionette.extend;\n  \n  // Object Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Object.prototype, Backbone.Events, {\n  \n    //this is a noop method intended to be overridden by classes that extend from this base\n    initialize: function() {},\n  \n    destroy: function(options) {\n      options = options || {};\n  \n      this.triggerMethod('before:destroy', options);\n      this.triggerMethod('destroy', options);\n      this.stopListening();\n  \n      return this;\n    },\n  \n    // Import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // A handy way to merge options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */\n  \n  // Region\n  // ------\n  \n  // Manage the visual regions of your composite application. See\n  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n  \n  Marionette.Region = Marionette.Object.extend({\n    constructor: function(options) {\n  \n      // set options temporarily so that we can get `el`.\n      // options will be overriden by Object.constructor\n      this.options = options || {};\n      this.el = this.getOption('el');\n  \n      // Handle when this.el is passed in as a $ wrapped element.\n      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n  \n      if (!this.el) {\n        throw new Marionette.Error({\n          name: 'NoElError',\n          message: 'An \"el\" must be specified for a region.'\n        });\n      }\n  \n      this.$el = this.getEl(this.el);\n      Marionette.Object.call(this, options);\n    },\n  \n    // Displays a backbone view instance inside of the region.\n    // Handles calling the `render` method for you. Reads content\n    // directly from the `el` attribute. Also calls an optional\n    // `onShow` and `onDestroy` method on your view, just after showing\n    // or just before destroying the view, respectively.\n    // The `preventDestroy` option can be used to prevent a view from\n    // the old view being destroyed on show.\n    // The `forceShow` option can be used to force a view to be\n    // re-rendered if it's already shown in the region.\n    show: function(view, options) {\n      if (!this._ensureElement()) {\n        return;\n      }\n  \n      this._ensureViewIsIntact(view);\n      Marionette.MonitorDOMRefresh(view);\n  \n      var showOptions     = options || {};\n      var isDifferentView = view !== this.currentView;\n      var preventDestroy  = !!showOptions.preventDestroy;\n      var forceShow       = !!showOptions.forceShow;\n  \n      // We are only changing the view if there is a current view to change to begin with\n      var isChangingView = !!this.currentView;\n  \n      // Only destroy the current view if we don't want to `preventDestroy` and if\n      // the view given in the first argument is different than `currentView`\n      var _shouldDestroyView = isDifferentView && !preventDestroy;\n  \n      // Only show the view given in the first argument if it is different than\n      // the current view or if we want to re-show the view. Note that if\n      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.\n      var _shouldShowView = isDifferentView || forceShow;\n  \n      if (isChangingView) {\n        this.triggerMethod('before:swapOut', this.currentView, this, options);\n      }\n  \n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n  \n      if (_shouldDestroyView) {\n        this.empty();\n  \n      // A `destroy` event is attached to the clean up manually removed views.\n      // We need to detach this event when a new view is going to be shown as it\n      // is no longer relevant.\n      } else if (isChangingView && _shouldShowView) {\n        this.currentView.off('destroy', this.empty, this);\n      }\n  \n      if (_shouldShowView) {\n  \n        // We need to listen for if a view is destroyed\n        // in a way other than through the region.\n        // If this happens we need to remove the reference\n        // to the currentView since once a view has been destroyed\n        // we can not reuse it.\n        view.once('destroy', this.empty, this);\n  \n        // make this region the view's parent,\n        // It's important that this parent binding happens before rendering\n        // so that any events the child may trigger during render can also be\n        // triggered on the child's ancestor views\n        view._parent = this;\n        this._renderView(view);\n  \n        if (isChangingView) {\n          this.triggerMethod('before:swap', view, this, options);\n        }\n  \n        this.triggerMethod('before:show', view, this, options);\n        Marionette.triggerMethodOn(view, 'before:show', view, this, options);\n  \n        if (isChangingView) {\n          this.triggerMethod('swapOut', this.currentView, this, options);\n        }\n  \n        // An array of views that we're about to display\n        var attachedRegion = Marionette.isNodeAttached(this.el);\n  \n        // The views that we're about to attach to the document\n        // It's important that we prevent _getNestedViews from being executed unnecessarily\n        // as it's a potentially-slow method\n        var displayedViews = [];\n  \n        var attachOptions = _.extend({\n          triggerBeforeAttach: this.triggerBeforeAttach,\n          triggerAttach: this.triggerAttach\n        }, showOptions);\n  \n        if (attachedRegion && attachOptions.triggerBeforeAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews, 'before:');\n        }\n  \n        this.attachHtml(view);\n        this.currentView = view;\n  \n        if (attachedRegion && attachOptions.triggerAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews);\n        }\n  \n        if (isChangingView) {\n          this.triggerMethod('swap', view, this, options);\n        }\n  \n        this.triggerMethod('show', view, this, options);\n        Marionette.triggerMethodOn(view, 'show', view, this, options);\n  \n        return this;\n      }\n  \n      return this;\n    },\n  \n    triggerBeforeAttach: true,\n    triggerAttach: true,\n  \n    _triggerAttach: function(views, prefix) {\n      var eventName = (prefix || '') + 'attach';\n      _.each(views, function(view) {\n        Marionette.triggerMethodOn(view, eventName, view, this);\n      }, this);\n    },\n  \n    _displayedViews: function(view) {\n      return _.union([view], _.result(view, '_getNestedViews') || []);\n    },\n  \n    _renderView: function(view) {\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:render', view);\n      }\n      view.render();\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'render', view);\n      }\n    },\n  \n    _ensureElement: function() {\n      if (!_.isObject(this.el)) {\n        this.$el = this.getEl(this.el);\n        this.el = this.$el[0];\n      }\n  \n      if (!this.$el || this.$el.length === 0) {\n        if (this.getOption('allowMissingEl')) {\n          return false;\n        } else {\n          throw new Marionette.Error('An \"el\" ' + this.$el.selector + ' must exist in DOM');\n        }\n      }\n      return true;\n    },\n  \n    _ensureViewIsIntact: function(view) {\n      if (!view) {\n        throw new Marionette.Error({\n          name: 'ViewNotValid',\n          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\n        });\n      }\n  \n      if (view.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + view.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Override this method to change how the region finds the DOM\n    // element that it manages. Return a jQuery selector object scoped\n    // to a provided parent el or the document if none exists.\n    getEl: function(el) {\n      return Backbone.$(el, Marionette._getValue(this.options.parentEl, this));\n    },\n  \n    // Override this method to change how the new view is\n    // appended to the `$el` that the region is managing\n    attachHtml: function(view) {\n      this.$el.contents().detach();\n  \n      this.el.appendChild(view.el);\n    },\n  \n    // Destroy the current view, if there is one. If there is no\n    // current view, it does nothing and returns immediately.\n    empty: function(options) {\n      var view = this.currentView;\n  \n      var emptyOptions = options || {};\n      var preventDestroy  = !!emptyOptions.preventDestroy;\n      // If there is no view in the region\n      // we should not remove anything\n      if (!view) { return this; }\n  \n      view.off('destroy', this.empty, this);\n      this.triggerMethod('before:empty', view);\n      if (!preventDestroy) {\n        this._destroyView();\n      }\n      this.triggerMethod('empty', view);\n  \n      // Remove region pointer to the currentView\n      delete this.currentView;\n  \n      if (preventDestroy) {\n        this.$el.contents().detach();\n      }\n  \n      return this;\n    },\n  \n    // call 'destroy' or 'remove', depending on which is found\n    // on the view (if showing a raw Backbone view or a Marionette View)\n    _destroyView: function() {\n      var view = this.currentView;\n      if (view.isDestroyed) { return; }\n  \n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:destroy', view);\n      }\n      if (view.destroy) {\n        view.destroy();\n      } else {\n        view.remove();\n  \n        // appending isDestroyed to raw Backbone View allows regions\n        // to throw a ViewDestroyedError for this view\n        view.isDestroyed = true;\n      }\n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'destroy', view);\n      }\n    },\n  \n    // Attach an existing view to the region. This\n    // will not call `render` or `onShow` for the new view,\n    // and will not replace the current HTML for the `el`\n    // of the region.\n    attachView: function(view) {\n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n      view._parent = this;\n      this.currentView = view;\n      return this;\n    },\n  \n    // Checks whether a view is currently present within\n    // the region. Returns `true` if there is and `false` if\n    // no view is present.\n    hasView: function() {\n      return !!this.currentView;\n    },\n  \n    // Reset the region by destroying any existing view and\n    // clearing out the cached `$el`. The next time a view\n    // is shown via this region, the region will re-query the\n    // DOM for the region's `el`.\n    reset: function() {\n      this.empty();\n  \n      if (this.$el) {\n        this.el = this.$el.selector;\n      }\n  \n      delete this.$el;\n      return this;\n    }\n  \n  },\n  \n  // Static Methods\n  {\n  \n    // Build an instance of a region by passing in a configuration object\n    // and a default region class to use if none is specified in the config.\n    //\n    // The config object should either be a string as a jQuery DOM selector,\n    // a Region class directly, or an object literal that specifies a selector,\n    // a custom regionClass, and any options to be supplied to the region:\n    //\n    // ```js\n    // {\n    //   selector: \"#foo\",\n    //   regionClass: MyCustomRegion,\n    //   allowMissingEl: false\n    // }\n    // ```\n    //\n    buildRegion: function(regionConfig, DefaultRegionClass) {\n      if (_.isString(regionConfig)) {\n        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);\n      }\n  \n      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {\n        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);\n      }\n  \n      if (_.isFunction(regionConfig)) {\n        return this._buildRegionFromRegionClass(regionConfig);\n      }\n  \n      throw new Marionette.Error({\n        message: 'Improper region configuration type.',\n        url: 'marionette.region.html#region-configuration-types'\n      });\n    },\n  \n    // Build the region from a string selector like '#foo-region'\n    _buildRegionFromSelector: function(selector, DefaultRegionClass) {\n      return new DefaultRegionClass({el: selector});\n    },\n  \n    // Build the region from a configuration object\n    // ```js\n    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }\n    // ```\n    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {\n      var RegionClass = regionConfig.regionClass || DefaultRegionClass;\n      var options = _.omit(regionConfig, 'selector', 'regionClass');\n  \n      if (regionConfig.selector && !options.el) {\n        options.el = regionConfig.selector;\n      }\n  \n      return new RegionClass(options);\n    },\n  \n    // Build the region directly from a given `RegionClass`\n    _buildRegionFromRegionClass: function(RegionClass) {\n      return new RegionClass();\n    }\n  });\n  \n  // Region Manager\n  // --------------\n  \n  // Manage one or more related `Marionette.Region` objects.\n  Marionette.RegionManager = Marionette.Controller.extend({\n    constructor: function(options) {\n      this._regions = {};\n      this.length = 0;\n  \n      Marionette.Controller.call(this, options);\n  \n      this.addRegions(this.getOption('regions'));\n    },\n  \n    // Add multiple regions using an object literal or a\n    // function that returns an object literal, where\n    // each key becomes the region name, and each value is\n    // the region definition.\n    addRegions: function(regionDefinitions, defaults) {\n      regionDefinitions = Marionette._getValue(regionDefinitions, this, arguments);\n  \n      return _.reduce(regionDefinitions, function(regions, definition, name) {\n        if (_.isString(definition)) {\n          definition = {selector: definition};\n        }\n        if (definition.selector) {\n          definition = _.defaults({}, definition, defaults);\n        }\n  \n        regions[name] = this.addRegion(name, definition);\n        return regions;\n      }, {}, this);\n    },\n  \n    // Add an individual region to the region manager,\n    // and return the region instance\n    addRegion: function(name, definition) {\n      var region;\n  \n      if (definition instanceof Marionette.Region) {\n        region = definition;\n      } else {\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      }\n  \n      this.triggerMethod('before:add:region', name, region);\n  \n      region._parent = this;\n      this._store(name, region);\n  \n      this.triggerMethod('add:region', name, region);\n      return region;\n    },\n  \n    // Get a region by name\n    get: function(name) {\n      return this._regions[name];\n    },\n  \n    // Gets all the regions contained within\n    // the `regionManager` instance.\n    getRegions: function() {\n      return _.clone(this._regions);\n    },\n  \n    // Remove a region by name\n    removeRegion: function(name) {\n      var region = this._regions[name];\n      this._remove(name, region);\n  \n      return region;\n    },\n  \n    // Empty all regions in the region manager, and\n    // remove them\n    removeRegions: function() {\n      var regions = this.getRegions();\n      _.each(this._regions, function(region, name) {\n        this._remove(name, region);\n      }, this);\n  \n      return regions;\n    },\n  \n    // Empty all regions in the region manager, but\n    // leave them attached\n    emptyRegions: function() {\n      var regions = this.getRegions();\n      _.invoke(regions, 'empty');\n      return regions;\n    },\n  \n    // Destroy all regions and shut down the region\n    // manager entirely\n    destroy: function() {\n      this.removeRegions();\n      return Marionette.Controller.prototype.destroy.apply(this, arguments);\n    },\n  \n    // internal method to store regions\n    _store: function(name, region) {\n      if (!this._regions[name]) {\n        this.length++;\n      }\n  \n      this._regions[name] = region;\n    },\n  \n    // internal method to remove a region\n    _remove: function(name, region) {\n      this.triggerMethod('before:remove:region', name, region);\n      region.empty();\n      region.stopListening();\n  \n      delete region._parent;\n      delete this._regions[name];\n      this.length--;\n      this.triggerMethod('remove:region', name, region);\n    }\n  });\n  \n  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');\n  \n\n  // Template Cache\n  // --------------\n  \n  // Manage templates stored in `<script>` blocks,\n  // caching them for faster access.\n  Marionette.TemplateCache = function(templateId) {\n    this.templateId = templateId;\n  };\n  \n  // TemplateCache object-level methods. Manage the template\n  // caches from these method calls instead of creating\n  // your own TemplateCache instances\n  _.extend(Marionette.TemplateCache, {\n    templateCaches: {},\n  \n    // Get the specified template by id. Either\n    // retrieves the cached version, or loads it\n    // from the DOM.\n    get: function(templateId, options) {\n      var cachedTemplate = this.templateCaches[templateId];\n  \n      if (!cachedTemplate) {\n        cachedTemplate = new Marionette.TemplateCache(templateId);\n        this.templateCaches[templateId] = cachedTemplate;\n      }\n  \n      return cachedTemplate.load(options);\n    },\n  \n    // Clear templates from the cache. If no arguments\n    // are specified, clears all templates:\n    // `clear()`\n    //\n    // If arguments are specified, clears each of the\n    // specified templates from the cache:\n    // `clear(\"#t1\", \"#t2\", \"...\")`\n    clear: function() {\n      var i;\n      var args = _.toArray(arguments);\n      var length = args.length;\n  \n      if (length > 0) {\n        for (i = 0; i < length; i++) {\n          delete this.templateCaches[args[i]];\n        }\n      } else {\n        this.templateCaches = {};\n      }\n    }\n  });\n  \n  // TemplateCache instance methods, allowing each\n  // template cache object to manage its own state\n  // and know whether or not it has been loaded\n  _.extend(Marionette.TemplateCache.prototype, {\n  \n    // Internal method to load the template\n    load: function(options) {\n      // Guard clause to prevent loading this template more than once\n      if (this.compiledTemplate) {\n        return this.compiledTemplate;\n      }\n  \n      // Load the template and compile it\n      var template = this.loadTemplate(this.templateId, options);\n      this.compiledTemplate = this.compileTemplate(template, options);\n  \n      return this.compiledTemplate;\n    },\n  \n    // Load a template from the DOM, by default. Override\n    // this method to provide your own template retrieval\n    // For asynchronous loading with AMD/RequireJS, consider\n    // using a template-loader plugin as described here:\n    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n    loadTemplate: function(templateId, options) {\n      var $template = Backbone.$(templateId);\n  \n      if (!$template.length) {\n        throw new Marionette.Error({\n          name: 'NoTemplateError',\n          message: 'Could not find template: \"' + templateId + '\"'\n        });\n      }\n      return $template.html();\n    },\n  \n    // Pre-compile the template before caching it. Override\n    // this method if you do not need to pre-compile a template\n    // (JST / RequireJS for example) or if you want to change\n    // the template engine used (Handebars, etc).\n    compileTemplate: function(rawTemplate, options) {\n      return _.template(rawTemplate, options);\n    }\n  });\n  \n  // Renderer\n  // --------\n  \n  // Render a template with data by passing in the template\n  // selector and the data to render.\n  Marionette.Renderer = {\n  \n    // Render a template with data. The `template` parameter is\n    // passed to the `TemplateCache` object to retrieve the\n    // template function. Override this method to provide your own\n    // custom rendering and template handling for all of Marionette.\n    render: function(template, data) {\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'TemplateNotFoundError',\n          message: 'Cannot render the template since its false, null or undefined.'\n        });\n      }\n  \n      var templateFunc = _.isFunction(template) ? template : Marionette.TemplateCache.get(template);\n  \n      return templateFunc(data);\n    }\n  };\n  \n\n  /* jshint maxlen: 114, nonew: false */\n  // View\n  // ----\n  \n  // The core view class that other Marionette views extend from.\n  Marionette.View = Backbone.View.extend({\n    isDestroyed: false,\n    supportsRenderLifecycle: true,\n    supportsDestroyLifecycle: true,\n  \n    constructor: function(options) {\n      this.render = _.bind(this.render, this);\n  \n      options = Marionette._getValue(options, this);\n  \n      // this exposes view options to the view initializer\n      // this is a backfill since backbone removed the assignment\n      // of this.options\n      // at some point however this may be removed\n      this.options = _.extend({}, _.result(this, 'options'), options);\n  \n      this._behaviors = Marionette.Behaviors(this);\n  \n      Backbone.View.call(this, this.options);\n  \n      Marionette.MonitorDOMRefresh(this);\n    },\n  \n    // Get the template for this view\n    // instance. You can set a `template` attribute in the view\n    // definition or pass a `template: \"whatever\"` parameter in\n    // to the constructor options.\n    getTemplate: function() {\n      return this.getOption('template');\n    },\n  \n    // Serialize a model by returning its attributes. Clones\n    // the attributes to allow modification.\n    serializeModel: function(model) {\n      return model.toJSON.apply(model, _.rest(arguments));\n    },\n  \n    // Mix in template helper methods. Looks for a\n    // `templateHelpers` attribute, which can either be an\n    // object literal, or a function that returns an object\n    // literal. All methods and attributes from this object\n    // are copies to the object passed in.\n    mixinTemplateHelpers: function(target) {\n      target = target || {};\n      var templateHelpers = this.getOption('templateHelpers');\n      templateHelpers = Marionette._getValue(templateHelpers, this);\n      return _.extend(target, templateHelpers);\n    },\n  \n    // normalize the keys of passed hash with the views `ui` selectors.\n    // `{\"@ui.foo\": \"bar\"}`\n    normalizeUIKeys: function(hash) {\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));\n    },\n  \n    // normalize the values of passed hash with the views `ui` selectors.\n    // `{foo: \"@ui.bar\"}`\n    normalizeUIValues: function(hash, properties) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIValues(hash, uiBindings || ui, properties);\n    },\n  \n    // Configure `triggers` to forward DOM events to view\n    // events. `triggers: {\"click .foo\": \"do:foo\"}`\n    configureTriggers: function() {\n      if (!this.triggers) { return; }\n  \n      // Allow `triggers` to be configured as a function\n      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n  \n      // Configure the triggers, prevent default\n      // action and stop propagation of DOM events\n      return _.reduce(triggers, function(events, value, key) {\n        events[key] = this._buildViewTrigger(value);\n        return events;\n      }, {}, this);\n    },\n  \n    // Overriding Backbone.View's delegateEvents to handle\n    // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n    delegateEvents: function(events) {\n      this._delegateDOMEvents(events);\n      this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // internal method to delegate DOM events and triggers\n    _delegateDOMEvents: function(eventsArg) {\n      var events = Marionette._getValue(eventsArg || this.events, this);\n  \n      // normalize ui keys\n      events = this.normalizeUIKeys(events);\n      if (_.isUndefined(eventsArg)) {this.events = events;}\n  \n      var combinedEvents = {};\n  \n      // look up if this view has behavior events\n      var behaviorEvents = _.result(this, 'behaviorEvents') || {};\n      var triggers = this.configureTriggers();\n      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};\n  \n      // behavior events will be overriden by view events and or triggers\n      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);\n  \n      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n    },\n  \n    // Overriding Backbone.View's undelegateEvents to handle unbinding\n    // the `triggers`, `modelEvents`, and `collectionEvents` config\n    undelegateEvents: function() {\n      Backbone.View.prototype.undelegateEvents.apply(this, arguments);\n  \n      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // Internal helper method to verify whether the view hasn't been destroyed\n    _ensureViewIsIntact: function() {\n      if (this.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + this.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Default `destroy` implementation, for removing a view from the\n    // DOM and unbinding it. Regions will call this method\n    // for you. You can specify an `onDestroy` method in your view to\n    // add custom code that is called after the view is destroyed.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      var args = _.toArray(arguments);\n  \n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n  \n      // mark as destroyed before doing the actual destroy, to\n      // prevent infinite loops within \"destroy\" event handlers\n      // that are trying to destroy other views\n      this.isDestroyed = true;\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n  \n      // unbind UI elements\n      this.unbindUIElements();\n  \n      this.isRendered = false;\n  \n      // remove the view from the DOM\n      this.remove();\n  \n      // Call destroy on each behavior after\n      // destroying the view.\n      // This unbinds event listeners\n      // that behaviors have registered for.\n      _.invoke(this._behaviors, 'destroy', args);\n  \n      return this;\n    },\n  \n    bindUIElements: function() {\n      this._bindUIElements();\n      _.invoke(this._behaviors, this._bindUIElements);\n    },\n  \n    // This method binds the elements specified in the \"ui\" hash inside the view's code with\n    // the associated jQuery selectors.\n    _bindUIElements: function() {\n      if (!this.ui) { return; }\n  \n      // store the ui hash in _uiBindings so they can be reset later\n      // and so re-rendering the view will be able to find the bindings\n      if (!this._uiBindings) {\n        this._uiBindings = this.ui;\n      }\n  \n      // get the bindings result, as a function or otherwise\n      var bindings = _.result(this, '_uiBindings');\n  \n      // empty the ui so we don't have anything to start with\n      this.ui = {};\n  \n      // bind each of the selectors\n      _.each(bindings, function(selector, key) {\n        this.ui[key] = this.$(selector);\n      }, this);\n    },\n  \n    // This method unbinds the elements specified in the \"ui\" hash\n    unbindUIElements: function() {\n      this._unbindUIElements();\n      _.invoke(this._behaviors, this._unbindUIElements);\n    },\n  \n    _unbindUIElements: function() {\n      if (!this.ui || !this._uiBindings) { return; }\n  \n      // delete all of the existing ui bindings\n      _.each(this.ui, function($el, name) {\n        delete this.ui[name];\n      }, this);\n  \n      // reset the ui element to the original bindings configuration\n      this.ui = this._uiBindings;\n      delete this._uiBindings;\n    },\n  \n    // Internal method to create an event handler for a given `triggerDef` like\n    // 'click:foo'\n    _buildViewTrigger: function(triggerDef) {\n  \n      var options = _.defaults({}, triggerDef, {\n        preventDefault: true,\n        stopPropagation: true\n      });\n  \n      var eventName = _.isObject(triggerDef) ? options.event : triggerDef;\n  \n      return function(e) {\n        if (e) {\n          if (e.preventDefault && options.preventDefault) {\n            e.preventDefault();\n          }\n  \n          if (e.stopPropagation && options.stopPropagation) {\n            e.stopPropagation();\n          }\n        }\n  \n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n  \n        this.triggerMethod(eventName, args);\n      };\n    },\n  \n    setElement: function() {\n      var ret = Backbone.View.prototype.setElement.apply(this, arguments);\n  \n      // proxy behavior $el to the view's $el.\n      // This is needed because a view's $el proxy\n      // is not set until after setElement is called.\n      _.invoke(this._behaviors, 'proxyViewProperties', this);\n  \n      return ret;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: function() {\n      var ret = Marionette._triggerMethod(this, arguments);\n  \n      this._triggerEventOnBehaviors(arguments);\n      this._triggerEventOnParentLayout(arguments[0], _.rest(arguments));\n  \n      return ret;\n    },\n  \n    _triggerEventOnBehaviors: function(args) {\n      var triggerMethod = Marionette._triggerMethod;\n      var behaviors = this._behaviors;\n      // Use good ol' for as this is a very hot function\n      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {\n        triggerMethod(behaviors[i], args);\n      }\n    },\n  \n    _triggerEventOnParentLayout: function(eventName, args) {\n      var layoutView = this._parentLayoutView();\n      if (!layoutView) {\n        return;\n      }\n  \n      // invoke triggerMethod on parent view\n      var eventPrefix = Marionette.getOption(layoutView, 'childViewEventPrefix');\n      var prefixedEventName = eventPrefix + ':' + eventName;\n      var callArgs = [this].concat(args);\n  \n      Marionette._triggerMethod(layoutView, prefixedEventName, callArgs);\n  \n      // call the parent view's childEvents handler\n      var childEvents = Marionette.getOption(layoutView, 'childEvents');\n  \n      // since childEvents can be an object or a function use Marionette._getValue\n      // to handle the abstaction for us.\n      childEvents = Marionette._getValue(childEvents, layoutView);\n      var normalizedChildEvents = layoutView.normalizeMethods(childEvents);\n  \n      if (normalizedChildEvents && _.isFunction(normalizedChildEvents[eventName])) {\n        normalizedChildEvents[eventName].apply(layoutView, callArgs);\n      }\n    },\n  \n    // This method returns any views that are immediate\n    // children of this view\n    _getImmediateChildren: function() {\n      return [];\n    },\n  \n    // Returns an array of every nested view within this view\n    _getNestedViews: function() {\n      var children = this._getImmediateChildren();\n  \n      if (!children.length) { return children; }\n  \n      return _.reduce(children, function(memo, view) {\n        if (!view._getNestedViews) { return memo; }\n        return memo.concat(view._getNestedViews());\n      }, children);\n    },\n  \n    // Walk the _parent tree until we find a layout view (if one exists).\n    // Returns the parent layout view hierarchically closest to this view.\n    _parentLayoutView: function() {\n      var parent  = this._parent;\n  \n      while (parent) {\n        if (parent instanceof Marionette.LayoutView) {\n          return parent;\n        }\n        parent = parent._parent;\n      }\n    },\n  \n    // Imports the \"normalizeMethods\" to transform hashes of\n    // events=>function references/names to a hash of events=>function references\n    normalizeMethods: Marionette.normalizeMethods,\n  \n    // A handy way to merge passed-in options onto the instance\n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Item View\n  // ---------\n  \n  // A single item view implementation that contains code for rendering\n  // with underscore.js templates, serializing the view's model or collection,\n  // and calling several methods on extended views, such as `onRender`.\n  Marionette.ItemView = Marionette.View.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.View.prototype.constructor which allows overriding\n    constructor: function() {\n      Marionette.View.apply(this, arguments);\n    },\n  \n    // Serialize the model or collection for the view. If a model is\n    // found, the view's `serializeModel` is called. If a collection is found,\n    // each model in the collection is serialized by calling\n    // the view's `serializeCollection` and put into an `items` array in\n    // the resulting data. If both are found, defaults to the model.\n    // You can override the `serializeData` method in your own view definition,\n    // to provide custom serialization for your view's data.\n    serializeData: function() {\n      if (!this.model && !this.collection) {\n        return {};\n      }\n  \n      var args = [this.model || this.collection];\n      if (arguments.length) {\n        args.push.apply(args, arguments);\n      }\n  \n      if (this.model) {\n        return this.serializeModel.apply(this, args);\n      } else {\n        return {\n          items: this.serializeCollection.apply(this, args)\n        };\n      }\n    },\n  \n    // Serialize a collection by serializing each of its models.\n    serializeCollection: function(collection) {\n      return collection.toJSON.apply(collection, _.rest(arguments));\n    },\n  \n    // Render the view, defaulting to underscore.js templates.\n    // You can override this in your view definition to provide\n    // a very specific rendering for your view. In general, though,\n    // you should override the `Marionette.Renderer` object to\n    // change how Marionette renders views.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this.isRendered = true;\n      this.bindUIElements();\n  \n      this.triggerMethod('render', this);\n  \n      return this;\n    },\n  \n    // Internal method to render the template with the serialized data\n    // and template helpers via the `Marionette.Renderer` object.\n    // Throws an `UndefinedTemplateError` error if the template is\n    // any falsely value but literal `false`.\n    _renderTemplate: function() {\n      var template = this.getTemplate();\n  \n      // Allow template-less item views\n      if (template === false) {\n        return;\n      }\n  \n      if (!template) {\n        throw new Marionette.Error({\n          name: 'UndefinedTemplateError',\n          message: 'Cannot render the template since it is null or undefined.'\n        });\n      }\n  \n      // Add in entity data and template helpers\n      var data = this.mixinTemplateHelpers(this.serializeData());\n  \n      // Render and add to el\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      return this;\n    },\n  \n    // Attaches the content of a given view.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    }\n  });\n  \n  /* jshint maxstatements: 20, maxcomplexity: 7 */\n  \n  // Collection View\n  // ---------------\n  \n  // A view that iterates over a Backbone.Collection\n  // and renders an individual child view for each model.\n  Marionette.CollectionView = Marionette.View.extend({\n  \n    // used as the prefix for child view events\n    // that are forwarded through the collectionview\n    childViewEventPrefix: 'childview',\n  \n    // flag for maintaining the sorted order of the collection\n    sort: true,\n  \n    // constructor\n    // option to pass `{sort: false}` to prevent the `CollectionView` from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    //\n    // option to pass `{comparator: compFunction()}` to allow the `CollectionView`\n    // to use a custom sort order for the collection.\n    constructor: function(options) {\n      this.once('render', this._initialEvents);\n      this._initChildViewStorage();\n  \n      Marionette.View.apply(this, arguments);\n  \n      this.on({\n        'before:show':   this._onBeforeShowCalled,\n        'show':          this._onShowCalled,\n        'before:attach': this._onBeforeAttachCalled,\n        'attach':        this._onAttachCalled\n      });\n      this.initRenderBuffer();\n    },\n  \n    // Instead of inserting elements one by one into the page,\n    // it's much more performant to insert elements into a document\n    // fragment and then insert that document fragment into the page\n    initRenderBuffer: function() {\n      this._bufferedChildren = [];\n    },\n  \n    startBuffering: function() {\n      this.initRenderBuffer();\n      this.isBuffering = true;\n    },\n  \n    endBuffering: function() {\n      // Only trigger attach if already shown and attached, otherwise Region#show() handles this.\n      var canTriggerAttach = this._isShown && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      this.isBuffering = false;\n  \n      if (this._isShown) {\n        this._triggerMethodMany(this._bufferedChildren, this, 'before:show');\n      }\n      if (canTriggerAttach && this._triggerBeforeAttach) {\n        nestedViews = this._getNestedViews();\n        this._triggerMethodMany(nestedViews, this, 'before:attach');\n      }\n  \n      this.attachBuffer(this, this._createBuffer());\n  \n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getNestedViews();\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      if (this._isShown) {\n        this._triggerMethodMany(this._bufferedChildren, this, 'show');\n      }\n      this.initRenderBuffer();\n    },\n  \n    _triggerMethodMany: function(targets, source, eventName) {\n      var args = _.drop(arguments, 3);\n  \n      _.each(targets, function(target) {\n        Marionette.triggerMethodOn.apply(target, [target, eventName, target, source].concat(args));\n      });\n    },\n  \n    // Configured the initial events that the collection view\n    // binds to.\n    _initialEvents: function() {\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this.render);\n  \n        if (this.getOption('sort')) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Handle a child added to the collection\n    _onCollectionAdd: function(child, collection, opts) {\n      // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2\n      var index = opts.at !== undefined && (opts.index || collection.indexOf(child));\n  \n      // When filtered or when there is no initial index, calculate index.\n      if (this.getOption('filter') || index === false) {\n        index = _.indexOf(this._filteredSortedModels(index), child);\n      }\n  \n      if (this._shouldAddChild(child, index)) {\n        this.destroyEmptyView();\n        var ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }\n    },\n  \n    // get the child view by model it holds, and remove it\n    _onCollectionRemove: function(model) {\n      var view = this.children.findByModel(model);\n      this.removeChildView(view);\n      this.checkEmpty();\n    },\n  \n    _onBeforeShowCalled: function() {\n      // Reset attach event flags at the top of the Region#show() event lifecycle; if the Region's\n      // show() options permit onBeforeAttach/onAttach events, these flags will be set true again.\n      this._triggerBeforeAttach = this._triggerAttach = false;\n      this.children.each(function(childView) {\n        Marionette.triggerMethodOn(childView, 'before:show', childView);\n      });\n    },\n  \n    _onShowCalled: function() {\n      this.children.each(function(childView) {\n        Marionette.triggerMethodOn(childView, 'show', childView);\n      });\n    },\n  \n    // If during Region#show() onBeforeAttach was fired, continue firing it for child views\n    _onBeforeAttachCalled: function() {\n      this._triggerBeforeAttach = true;\n    },\n  \n    // If during Region#show() onAttach was fired, continue firing it for child views\n    _onAttachCalled: function() {\n      this._triggerAttach = true;\n    },\n  \n    // Render children views. Override this method to\n    // provide your own implementation of a render function for\n    // the collection view.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.triggerMethod('before:render', this);\n      this._renderChildren();\n      this.isRendered = true;\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    // Reorder DOM after sorting. When your element's rendering\n    // do not use their index, you can pass reorderOnSort: true\n    // to only reorder the DOM after a sort instead of rendering\n    // all the collectionView\n    reorder: function() {\n      var children = this.children;\n      var models = this._filteredSortedModels();\n      var anyModelsAdded = _.some(models, function(model) {\n        return !children.findByModel(model);\n      });\n  \n      // If there are any new models added due to filtering\n      // We need to add child views\n      // So render as normal\n      if (anyModelsAdded) {\n        this.render();\n      } else {\n        // get the DOM nodes in the same order as the models\n        var elsToReorder = _.map(models, function(model, index) {\n          var view = children.findByModel(model);\n          view._index = index;\n          return view.el;\n        });\n  \n        // find the views that were children before but arent in this new ordering\n        var filteredOutViews = children.filter(function(view) {\n          return !_.contains(elsToReorder, view.el);\n        });\n  \n        this.triggerMethod('before:reorder');\n  \n        // since append moves elements that are already in the DOM,\n        // appending the elements will effectively reorder them\n        this._appendReorderedChildren(elsToReorder);\n  \n        // remove any views that have been filtered out\n        _.each(filteredOutViews, this.removeChildView, this);\n        this.checkEmpty();\n  \n        this.triggerMethod('reorder');\n      }\n    },\n  \n    // Render view after sorting. Override this method to\n    // change how the view renders after a `sort` on the collection.\n    // An example of this would be to only `renderChildren` in a `CompositeView`\n    // rather than the full view.\n    resortView: function() {\n      if (Marionette.getOption(this, 'reorderOnSort')) {\n        this.reorder();\n      } else {\n        this.render();\n      }\n    },\n  \n    // Internal method. This checks for any changes in the order of the collection.\n    // If the index of any view doesn't match, it will render.\n    _sortViews: function() {\n      var models = this._filteredSortedModels();\n  \n      // check for any changes in sort order of views\n      var orderChanged = _.find(models, function(item, index) {\n        var view = this.children.findByModel(item);\n        return !view || view._index !== index;\n      }, this);\n  \n      if (orderChanged) {\n        this.resortView();\n      }\n    },\n  \n    // Internal reference to what index a `emptyView` is.\n    _emptyViewIndex: -1,\n  \n    // Internal method. Separated so that CompositeView can append to the childViewContainer\n    // if necessary\n    _appendReorderedChildren: function(children) {\n      this.$el.append(children);\n    },\n  \n    // Internal method. Separated so that CompositeView can have\n    // more control over events being triggered, around the rendering\n    // process\n    _renderChildren: function() {\n      this.destroyEmptyView();\n      this.destroyChildren({checkEmpty: false});\n  \n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      } else {\n        this.triggerMethod('before:render:collection', this);\n        this.startBuffering();\n        this.showCollection();\n        this.endBuffering();\n        this.triggerMethod('render:collection', this);\n  \n        // If we have shown children and none have passed the filter, show the empty view\n        if (this.children.isEmpty() && this.getOption('filter')) {\n          this.showEmptyView();\n        }\n      }\n    },\n  \n    // Internal method to loop through collection and show each child view.\n    showCollection: function() {\n      var ChildView;\n  \n      var models = this._filteredSortedModels();\n  \n      _.each(models, function(child, index) {\n        ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }, this);\n    },\n  \n    // Allow the collection to be sorted by a custom view comparator\n    _filteredSortedModels: function(addedAt) {\n      var viewComparator = this.getViewComparator();\n      var models = this.collection.models;\n      addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);\n  \n      if (viewComparator) {\n        var addedModel;\n        // Preserve `at` location, even for a sorted view\n        if (addedAt) {\n          addedModel = models[addedAt];\n          models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));\n        }\n        models = this._sortModelsBy(models, viewComparator);\n        if (addedModel) {\n          models.splice(addedAt, 0, addedModel);\n        }\n      }\n  \n      // Filter after sorting in case the filter uses the index\n      if (this.getOption('filter')) {\n        models = _.filter(models, function(model, index) {\n          return this._shouldAddChild(model, index);\n        }, this);\n      }\n  \n      return models;\n    },\n  \n    _sortModelsBy: function(models, comparator) {\n      if (typeof comparator === 'string') {\n        return _.sortBy(models, function(model) {\n          return model.get(comparator);\n        }, this);\n      } else if (comparator.length === 1) {\n        return _.sortBy(models, comparator, this);\n      } else {\n        return models.sort(_.bind(comparator, this));\n      }\n    },\n  \n    // Internal method to show an empty view in place of\n    // a collection of child views, when the collection is empty\n    showEmptyView: function() {\n      var EmptyView = this.getEmptyView();\n  \n      if (EmptyView && !this._showingEmptyView) {\n        this.triggerMethod('before:render:empty');\n  \n        this._showingEmptyView = true;\n        var model = new Backbone.Model();\n        this.addEmptyView(model, EmptyView);\n  \n        this.triggerMethod('render:empty');\n      }\n    },\n  \n    // Internal method to destroy an existing emptyView instance\n    // if one exists. Called when a collection view has been\n    // rendered empty, and then a child is added to the collection.\n    destroyEmptyView: function() {\n      if (this._showingEmptyView) {\n        this.triggerMethod('before:remove:empty');\n  \n        this.destroyChildren();\n        delete this._showingEmptyView;\n  \n        this.triggerMethod('remove:empty');\n      }\n    },\n  \n    // Retrieve the empty view class\n    getEmptyView: function() {\n      return this.getOption('emptyView');\n    },\n  \n    // Render and show the emptyView. Similar to addChild method\n    // but \"add:child\" events are not fired, and the event from\n    // emptyView are not forwarded\n    addEmptyView: function(child, EmptyView) {\n      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or\n      // Region#show() handles this.\n      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      // get the emptyViewOptions, falling back to childViewOptions\n      var emptyViewOptions = this.getOption('emptyViewOptions') ||\n                            this.getOption('childViewOptions');\n  \n      if (_.isFunction(emptyViewOptions)) {\n        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);\n      }\n  \n      // build the empty view\n      var view = this.buildChildView(child, EmptyView, emptyViewOptions);\n  \n      view._parent = this;\n  \n      // Proxy emptyView events\n      this.proxyChildEvents(view);\n  \n      view.once('render', function() {\n        // trigger the 'before:show' event on `view` if the collection view has already been shown\n        if (this._isShown) {\n          Marionette.triggerMethodOn(view, 'before:show', view);\n        }\n  \n        // Trigger `before:attach` following `render` to avoid adding logic and event triggers\n        // to public method `renderChildView()`.\n        if (canTriggerAttach && this._triggerBeforeAttach) {\n          nestedViews = this._getViewAndNested(view);\n          this._triggerMethodMany(nestedViews, this, 'before:attach');\n        }\n      }, this);\n  \n      // Store the `emptyView` like a `childView` so we can properly remove and/or close it later\n      this.children.add(view);\n      this.renderChildView(view, this._emptyViewIndex);\n  \n      // Trigger `attach`\n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getViewAndNested(view);\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      // call the 'show' method if the collection view has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'show', view);\n      }\n    },\n  \n    // Retrieve the `childView` class, either from `this.options.childView`\n    // or from the `childView` in the object definition. The \"options\"\n    // takes precedence.\n    // This method receives the model that will be passed to the instance\n    // created from this `childView`. Overriding methods may use the child\n    // to determine what `childView` class to return.\n    getChildView: function(child) {\n      var childView = this.getOption('childView');\n  \n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n  \n      return childView;\n    },\n  \n    // Render the child's view and add it to the\n    // HTML for the collection view at a given index.\n    // This will also update the indices of later views in the collection\n    // in order to keep the children in sync with the collection.\n    addChild: function(child, ChildView, index) {\n      var childViewOptions = this.getOption('childViewOptions');\n      childViewOptions = Marionette._getValue(childViewOptions, this, [child, index]);\n  \n      var view = this.buildChildView(child, ChildView, childViewOptions);\n  \n      // increment indices of views after this one\n      this._updateIndices(view, true, index);\n  \n      this.triggerMethod('before:add:child', view);\n      this._addChildView(view, index);\n      this.triggerMethod('add:child', view);\n  \n      view._parent = this;\n  \n      return view;\n    },\n  \n    // Internal method. This decrements or increments the indices of views after the\n    // added/removed view to keep in sync with the collection.\n    _updateIndices: function(view, increment, index) {\n      if (!this.getOption('sort')) {\n        return;\n      }\n  \n      if (increment) {\n        // assign the index to the view\n        view._index = index;\n      }\n  \n      // update the indexes of views after this one\n      this.children.each(function(laterView) {\n        if (laterView._index >= view._index) {\n          laterView._index += increment ? 1 : -1;\n        }\n      });\n    },\n  \n    // Internal Method. Add the view to children and render it at\n    // the given index.\n    _addChildView: function(view, index) {\n      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or\n      // Region#show() handles this.\n      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);\n      var nestedViews;\n  \n      // set up the child view event forwarding\n      this.proxyChildEvents(view);\n  \n      view.once('render', function() {\n        // trigger the 'before:show' event on `view` if the collection view has already been shown\n        if (this._isShown && !this.isBuffering) {\n          Marionette.triggerMethodOn(view, 'before:show', view);\n        }\n  \n        // Trigger `before:attach` following `render` to avoid adding logic and event triggers\n        // to public method `renderChildView()`.\n        if (canTriggerAttach && this._triggerBeforeAttach) {\n          nestedViews = this._getViewAndNested(view);\n          this._triggerMethodMany(nestedViews, this, 'before:attach');\n        }\n      }, this);\n  \n      // Store the child view itself so we can properly remove and/or destroy it later\n      this.children.add(view);\n      this.renderChildView(view, index);\n  \n      // Trigger `attach`\n      if (canTriggerAttach && this._triggerAttach) {\n        nestedViews = this._getViewAndNested(view);\n        this._triggerMethodMany(nestedViews, this, 'attach');\n      }\n      // Trigger `show`\n      if (this._isShown && !this.isBuffering) {\n        Marionette.triggerMethodOn(view, 'show', view);\n      }\n    },\n  \n    // render the child view\n    renderChildView: function(view, index) {\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:render', view);\n      }\n      view.render();\n      if (!view.supportsRenderLifecycle) {\n        Marionette.triggerMethodOn(view, 'render', view);\n      }\n      this.attachHtml(this, view, index);\n      return view;\n    },\n  \n    // Build a `childView` for a model in the collection.\n    buildChildView: function(child, ChildViewClass, childViewOptions) {\n      var options = _.extend({model: child}, childViewOptions);\n      var childView = new ChildViewClass(options);\n      Marionette.MonitorDOMRefresh(childView);\n      return childView;\n    },\n  \n    // Remove the child view and destroy it.\n    // This function also updates the indices of\n    // later views in the collection in order to keep\n    // the children in sync with the collection.\n    removeChildView: function(view) {\n      if (!view) { return view; }\n  \n      this.triggerMethod('before:remove:child', view);\n  \n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'before:destroy', view);\n      }\n      // call 'destroy' or 'remove', depending on which is found\n      if (view.destroy) {\n        view.destroy();\n      } else {\n        view.remove();\n      }\n      if (!view.supportsDestroyLifecycle) {\n        Marionette.triggerMethodOn(view, 'destroy', view);\n      }\n  \n      delete view._parent;\n      this.stopListening(view);\n      this.children.remove(view);\n      this.triggerMethod('remove:child', view);\n  \n      // decrement the index of views after this one\n      this._updateIndices(view, false);\n  \n      return view;\n    },\n  \n    // check if the collection is empty\n    isEmpty: function() {\n      return !this.collection || this.collection.length === 0;\n    },\n  \n    // If empty, show the empty view\n    checkEmpty: function() {\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      }\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(collectionView, buffer) {\n      collectionView.$el.append(buffer);\n    },\n  \n    // Create a fragment buffer from the currently buffered children\n    _createBuffer: function() {\n      var elBuffer = document.createDocumentFragment();\n      _.each(this._bufferedChildren, function(b) {\n        elBuffer.appendChild(b.el);\n      });\n      return elBuffer;\n    },\n  \n    // Append the HTML to the collection's `el`.\n    // Override this method to do something other\n    // than `.append`.\n    attachHtml: function(collectionView, childView, index) {\n      if (collectionView.isBuffering) {\n        // buffering happens on reset events and initial renders\n        // in order to reduce the number of inserts into the\n        // document, which are expensive.\n        collectionView._bufferedChildren.splice(index, 0, childView);\n      } else {\n        // If we've already rendered the main collection, append\n        // the new child into the correct order if we need to. Otherwise\n        // append to the end.\n        if (!collectionView._insertBefore(childView, index)) {\n          collectionView._insertAfter(childView);\n        }\n      }\n    },\n  \n    // Internal method. Check whether we need to insert the view into\n    // the correct position.\n    _insertBefore: function(childView, index) {\n      var currentView;\n      var findPosition = this.getOption('sort') && (index < this.children.length - 1);\n      if (findPosition) {\n        // Find the view after this one\n        currentView = this.children.find(function(view) {\n          return view._index === index + 1;\n        });\n      }\n  \n      if (currentView) {\n        currentView.$el.before(childView.el);\n        return true;\n      }\n  \n      return false;\n    },\n  \n    // Internal method. Append a view to the end of the $el\n    _insertAfter: function(childView) {\n      this.$el.append(childView.el);\n    },\n  \n    // Internal method to set up the `children` object for\n    // storing all of the child views\n    _initChildViewStorage: function() {\n      this.children = new Backbone.ChildViewContainer();\n    },\n  \n    // Handle cleanup and other destroying needs for the collection of views\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      this.triggerMethod('before:destroy:collection');\n      this.destroyChildren({checkEmpty: false});\n      this.triggerMethod('destroy:collection');\n  \n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Destroy the child views that this collection view\n    // is holding on to, if any\n    destroyChildren: function(options) {\n      var destroyOptions = options || {};\n      var shouldCheckEmpty = true;\n      var childViews = this.children.map(_.identity);\n  \n      if (!_.isUndefined(destroyOptions.checkEmpty)) {\n        shouldCheckEmpty = destroyOptions.checkEmpty;\n      }\n  \n      this.children.each(this.removeChildView, this);\n  \n      if (shouldCheckEmpty) {\n        this.checkEmpty();\n      }\n      return childViews;\n    },\n  \n    // Return true if the given child should be shown\n    // Return false otherwise\n    // The filter will be passed (child, index, collection)\n    // Where\n    //  'child' is the given model\n    //  'index' is the index of that model in the collection\n    //  'collection' is the collection referenced by this CollectionView\n    _shouldAddChild: function(child, index) {\n      var filter = this.getOption('filter');\n      return !_.isFunction(filter) || filter.call(this, child, index, this.collection);\n    },\n  \n    // Set up the child view event forwarding. Uses a \"childview:\"\n    // prefix in front of all forwarded events.\n    proxyChildEvents: function(view) {\n      var prefix = this.getOption('childViewEventPrefix');\n  \n      // Forward all child view events through the parent,\n      // prepending \"childview:\" to the event name\n      this.listenTo(view, 'all', function() {\n        var args = _.toArray(arguments);\n        var rootEvent = args[0];\n        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));\n  \n        args[0] = prefix + ':' + rootEvent;\n        args.splice(1, 0, view);\n  \n        // call collectionView childEvent if defined\n        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {\n          childEvents[rootEvent].apply(this, args.slice(1));\n        }\n  \n        this.triggerMethod.apply(this, args);\n      });\n    },\n  \n    _getImmediateChildren: function() {\n      return _.values(this.children._views);\n    },\n  \n    _getViewAndNested: function(view) {\n      // This will not fail on Backbone.View which does not have #_getNestedViews.\n      return [view].concat(_.result(view, '_getNestedViews') || []);\n    },\n  \n    getViewComparator: function() {\n      return this.getOption('viewComparator');\n    }\n  });\n  \n  /* jshint maxstatements: 17, maxlen: 117 */\n  \n  // Composite View\n  // --------------\n  \n  // Used for rendering a branch-leaf, hierarchical structure.\n  // Extends directly from CollectionView and also renders an\n  // a child view as `modelView`, for the top leaf\n  Marionette.CompositeView = Marionette.CollectionView.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.CollectionView.prototype.constructor which allows overriding\n    // option to pass '{sort: false}' to prevent the CompositeView from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function() {\n      Marionette.CollectionView.apply(this, arguments);\n    },\n  \n    // Configured the initial events that the composite view\n    // binds to. Override this method to prevent the initial\n    // events, or to add your own initial events.\n    _initialEvents: function() {\n  \n      // Bind only after composite view is rendered to avoid adding child views\n      // to nonexistent childViewContainer\n  \n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this._renderChildren);\n  \n        if (this.getOption('sort')) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Retrieve the `childView` to be used when rendering each of\n    // the items in the collection. The default is to return\n    // `this.childView` or Marionette.CompositeView if no `childView`\n    // has been defined\n    getChildView: function(child) {\n      var childView = this.getOption('childView') || this.constructor;\n  \n      return childView;\n    },\n  \n    // Serialize the model for the view.\n    // You can override the `serializeData` method in your own view\n    // definition, to provide custom serialization for your view's data.\n    serializeData: function() {\n      var data = {};\n  \n      if (this.model) {\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n  \n      return data;\n    },\n  \n    // Renders the model and the collection.\n    render: function() {\n      this._ensureViewIsIntact();\n      this._isRendering = true;\n      this.resetChildViewContainer();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this._renderChildren();\n  \n      this._isRendering = false;\n      this.isRendered = true;\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    _renderChildren: function() {\n      if (this.isRendered || this._isRendering) {\n        Marionette.CollectionView.prototype._renderChildren.call(this);\n      }\n    },\n  \n    // Render the root template that the children\n    // views are appended to\n    _renderTemplate: function() {\n      var data = {};\n      data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      this.triggerMethod('before:render:template');\n  \n      var template = this.getTemplate();\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      // the ui bindings is done here and not at the end of render since they\n      // will not be available until after the model is rendered, but should be\n      // available before the collection is rendered.\n      this.bindUIElements();\n      this.triggerMethod('render:template');\n    },\n  \n    // Attaches the content of the root.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(compositeView, buffer) {\n      var $container = this.getChildViewContainer(compositeView);\n      $container.append(buffer);\n    },\n  \n    // Internal method. Append a view to the end of the $el.\n    // Overidden from CollectionView to ensure view is appended to\n    // childViewContainer\n    _insertAfter: function(childView) {\n      var $container = this.getChildViewContainer(this, childView);\n      $container.append(childView.el);\n    },\n  \n    // Internal method. Append reordered childView'.\n    // Overidden from CollectionView to ensure reordered views\n    // are appended to childViewContainer\n    _appendReorderedChildren: function(children) {\n      var $container = this.getChildViewContainer(this);\n      $container.append(children);\n    },\n  \n    // Internal method to ensure an `$childViewContainer` exists, for the\n    // `attachHtml` method to use.\n    getChildViewContainer: function(containerView, childView) {\n      if (!!containerView.$childViewContainer) {\n        return containerView.$childViewContainer;\n      }\n  \n      var container;\n      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');\n      if (childViewContainer) {\n  \n        var selector = Marionette._getValue(childViewContainer, containerView);\n  \n        if (selector.charAt(0) === '@' && containerView.ui) {\n          container = containerView.ui[selector.substr(4)];\n        } else {\n          container = containerView.$(selector);\n        }\n  \n        if (container.length <= 0) {\n          throw new Marionette.Error({\n            name: 'ChildViewContainerMissingError',\n            message: 'The specified \"childViewContainer\" was not found: ' + containerView.childViewContainer\n          });\n        }\n  \n      } else {\n        container = containerView.$el;\n      }\n  \n      containerView.$childViewContainer = container;\n      return container;\n    },\n  \n    // Internal method to reset the `$childViewContainer` on render\n    resetChildViewContainer: function() {\n      if (this.$childViewContainer) {\n        this.$childViewContainer = undefined;\n      }\n    }\n  });\n  \n  // Layout View\n  // -----------\n  \n  // Used for managing application layoutViews, nested layoutViews and\n  // multiple regions within an application or sub-application.\n  //\n  // A specialized view class that renders an area of HTML and then\n  // attaches `Region` instances to the specified `regions`.\n  // Used for composite view management and sub-application areas.\n  Marionette.LayoutView = Marionette.ItemView.extend({\n    regionClass: Marionette.Region,\n  \n    options: {\n      destroyImmediate: false\n    },\n  \n    // used as the prefix for child view events\n    // that are forwarded through the layoutview\n    childViewEventPrefix: 'childview',\n  \n    // Ensure the regions are available when the `initialize` method\n    // is called.\n    constructor: function(options) {\n      options = options || {};\n  \n      this._firstRender = true;\n      this._initializeRegions(options);\n  \n      Marionette.ItemView.call(this, options);\n    },\n  \n    // LayoutView's render will use the existing region objects the\n    // first time it is called. Subsequent calls will destroy the\n    // views that the regions are showing and then reset the `el`\n    // for the regions to the newly rendered DOM elements.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      if (this._firstRender) {\n        // if this is the first render, don't do anything to\n        // reset the regions\n        this._firstRender = false;\n      } else {\n        // If this is not the first render call, then we need to\n        // re-initialize the `el` for each region\n        this._reInitializeRegions();\n      }\n  \n      return Marionette.ItemView.prototype.render.apply(this, arguments);\n    },\n  \n    // Handle destroying regions, and then destroy the view itself.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n      // #2134: remove parent element before destroying the child views, so\n      // removing the child views doesn't retrigger repaints\n      if (this.getOption('destroyImmediate') === true) {\n        this.$el.remove();\n      }\n      this.regionManager.destroy();\n      return Marionette.ItemView.prototype.destroy.apply(this, arguments);\n    },\n  \n    showChildView: function(regionName, view, options) {\n      var region = this.getRegion(regionName);\n      return region.show.apply(region, _.rest(arguments));\n    },\n  \n    getChildView: function(regionName) {\n      return this.getRegion(regionName).currentView;\n    },\n  \n    // Add a single region, by name, to the layoutView\n    addRegion: function(name, definition) {\n      var regions = {};\n      regions[name] = definition;\n      return this._buildRegions(regions)[name];\n    },\n  \n    // Add multiple regions as a {name: definition, name2: def2} object literal\n    addRegions: function(regions) {\n      this.regions = _.extend({}, this.regions, regions);\n      return this._buildRegions(regions);\n    },\n  \n    // Remove a single region from the LayoutView, by name\n    removeRegion: function(name) {\n      delete this.regions[name];\n      return this.regionManager.removeRegion(name);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this.regionManager.get(region);\n    },\n  \n    // Get all regions\n    getRegions: function() {\n      return this.regionManager.getRegions();\n    },\n  \n    // internal method to build regions\n    _buildRegions: function(regions) {\n      var defaults = {\n        regionClass: this.getOption('regionClass'),\n        parentEl: _.partial(_.result, this, 'el')\n      };\n  \n      return this.regionManager.addRegions(regions, defaults);\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on this layoutView.\n    _initializeRegions: function(options) {\n      var regions;\n      this._initRegionManager();\n  \n      regions = Marionette._getValue(this.regions, this, [options]) || {};\n  \n      // Enable users to define `regions` as instance options.\n      var regionOptions = this.getOption.call(options, 'regions');\n  \n      // enable region options to be a function\n      regionOptions = Marionette._getValue(regionOptions, this, [options]);\n  \n      _.extend(regions, regionOptions);\n  \n      // Normalize region selectors hash to allow\n      // a user to use the @ui. syntax.\n      regions = this.normalizeUIValues(regions, ['selector', 'el']);\n  \n      this.addRegions(regions);\n    },\n  \n    // Internal method to re-initialize all of the regions by updating the `el` that\n    // they point to\n    _reInitializeRegions: function() {\n      this.regionManager.invoke('reset');\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the region manager\n    // and all regions in it\n    _initRegionManager: function() {\n      this.regionManager = this.getRegionManager();\n      this.regionManager._parent = this;\n  \n      this.listenTo(this.regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n  \n      this.listenTo(this.regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    },\n  \n    _getImmediateChildren: function() {\n      return _.chain(this.regionManager.getRegions())\n        .pluck('currentView')\n        .compact()\n        .value();\n    }\n  });\n  \n\n  // Behavior\n  // --------\n  \n  // A Behavior is an isolated set of DOM /\n  // user interactions that can be mixed into any View.\n  // Behaviors allow you to blackbox View specific interactions\n  // into portable logical chunks, keeping your views simple and your code DRY.\n  \n  Marionette.Behavior = Marionette.Object.extend({\n    constructor: function(options, view) {\n      // Setup reference to the view.\n      // this comes in handle when a behavior\n      // wants to directly talk up the chain\n      // to the view.\n      this.view = view;\n      this.defaults = _.result(this, 'defaults') || {};\n      this.options  = _.extend({}, this.defaults, options);\n      // Construct an internal UI hash using\n      // the views UI hash and then the behaviors UI hash.\n      // This allows the user to use UI hash elements\n      // defined in the parent view as well as those\n      // defined in the given behavior.\n      this.ui = _.extend({}, _.result(view, 'ui'), _.result(this, 'ui'));\n  \n      Marionette.Object.apply(this, arguments);\n    },\n  \n    // proxy behavior $ method to the view\n    // this is useful for doing jquery DOM lookups\n    // scoped to behaviors view.\n    $: function() {\n      return this.view.$.apply(this.view, arguments);\n    },\n  \n    // Stops the behavior from listening to events.\n    // Overrides Object#destroy to prevent additional events from being triggered.\n    destroy: function() {\n      this.stopListening();\n  \n      return this;\n    },\n  \n    proxyViewProperties: function(view) {\n      this.$el = view.$el;\n      this.el = view.el;\n    }\n  });\n  \n  /* jshint maxlen: 143 */\n  // Behaviors\n  // ---------\n  \n  // Behaviors is a utility class that takes care of\n  // gluing your behavior instances to their given View.\n  // The most important part of this class is that you\n  // **MUST** override the class level behaviorsLookup\n  // method for things to work properly.\n  \n  Marionette.Behaviors = (function(Marionette, _) {\n    // Borrow event splitter from Backbone\n    var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n  \n    function Behaviors(view, behaviors) {\n  \n      if (!_.isObject(view.behaviors)) {\n        return {};\n      }\n  \n      // Behaviors defined on a view can be a flat object literal\n      // or it can be a function that returns an object.\n      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));\n  \n      // Wraps several of the view's methods\n      // calling the methods first on each behavior\n      // and then eventually calling the method on the view.\n      Behaviors.wrap(view, behaviors, _.keys(methods));\n      return behaviors;\n    }\n  \n    var methods = {\n      behaviorTriggers: function(behaviorTriggers, behaviors) {\n        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);\n        return triggerBuilder.buildBehaviorTriggers();\n      },\n  \n      behaviorEvents: function(behaviorEvents, behaviors) {\n        var _behaviorsEvents = {};\n  \n        _.each(behaviors, function(b, i) {\n          var _events = {};\n          var behaviorEvents = _.clone(_.result(b, 'events')) || {};\n  \n          // Normalize behavior events hash to allow\n          // a user to use the @ui. syntax.\n          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, getBehaviorsUI(b));\n  \n          var j = 0;\n          _.each(behaviorEvents, function(behaviour, key) {\n            var match     = key.match(delegateEventSplitter);\n  \n            // Set event name to be namespaced using the view cid,\n            // the behavior index, and the behavior event index\n            // to generate a non colliding event namespace\n            // http://api.jquery.com/event.namespace/\n            var eventName = match[1] + '.' + [this.cid, i, j++, ' '].join('');\n            var selector  = match[2];\n  \n            var eventKey  = eventName + selector;\n            var handler   = _.isFunction(behaviour) ? behaviour : b[behaviour];\n  \n            _events[eventKey] = _.bind(handler, b);\n          }, this);\n  \n          _behaviorsEvents = _.extend(_behaviorsEvents, _events);\n        }, this);\n  \n        return _behaviorsEvents;\n      }\n    };\n  \n    _.extend(Behaviors, {\n  \n      // Placeholder method to be extended by the user.\n      // The method should define the object that stores the behaviors.\n      // i.e.\n      //\n      // ```js\n      // Marionette.Behaviors.behaviorsLookup: function() {\n      //   return App.Behaviors\n      // }\n      // ```\n      behaviorsLookup: function() {\n        throw new Marionette.Error({\n          message: 'You must define where your behaviors are stored.',\n          url: 'marionette.behaviors.html#behaviorslookup'\n        });\n      },\n  \n      // Takes care of getting the behavior class\n      // given options and a key.\n      // If a user passes in options.behaviorClass\n      // default to using that. Otherwise delegate\n      // the lookup to the users `behaviorsLookup` implementation.\n      getBehaviorClass: function(options, key) {\n        if (options.behaviorClass) {\n          return options.behaviorClass;\n        }\n  \n        // Get behavior class can be either a flat object or a method\n        return Marionette._getValue(Behaviors.behaviorsLookup, this, [options, key])[key];\n      },\n  \n      // Iterate over the behaviors object, for each behavior\n      // instantiate it and get its grouped behaviors.\n      parseBehaviors: function(view, behaviors) {\n        return _.chain(behaviors).map(function(options, key) {\n          var BehaviorClass = Behaviors.getBehaviorClass(options, key);\n  \n          var behavior = new BehaviorClass(options, view);\n          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));\n  \n          return [behavior].concat(nestedBehaviors);\n        }).flatten().value();\n      },\n  \n      // Wrap view internal methods so that they delegate to behaviors. For example,\n      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.\n      // i.e.\n      //\n      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`\n      wrap: function(view, behaviors, methodNames) {\n        _.each(methodNames, function(methodName) {\n          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);\n        });\n      }\n    });\n  \n    // Class to build handlers for `triggers` on behaviors\n    // for views\n    function BehaviorTriggersBuilder(view, behaviors) {\n      this._view      = view;\n      this._behaviors = behaviors;\n      this._triggers  = {};\n    }\n  \n    _.extend(BehaviorTriggersBuilder.prototype, {\n      // Main method to build the triggers hash with event keys and handlers\n      buildBehaviorTriggers: function() {\n        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);\n        return this._triggers;\n      },\n  \n      // Internal method to build all trigger handlers for a given behavior\n      _buildTriggerHandlersForBehavior: function(behavior, i) {\n        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};\n  \n        triggersHash = Marionette.normalizeUIKeys(triggersHash, getBehaviorsUI(behavior));\n  \n        _.each(triggersHash, _.bind(this._setHandlerForBehavior, this, behavior, i));\n      },\n  \n      // Internal method to create and assign the trigger handler for a given\n      // behavior\n      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {\n        // Unique identifier for the `this._triggers` hash\n        var triggerKey = trigger.replace(/^\\S+/, function(triggerName) {\n          return triggerName + '.' + 'behaviortriggers' + i;\n        });\n  \n        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);\n      }\n    });\n  \n    function getBehaviorsUI(behavior) {\n      return behavior._uiBindings || behavior.ui;\n    }\n  \n    return Behaviors;\n  \n  })(Marionette, _);\n  \n\n  // App Router\n  // ----------\n  \n  // Reduce the boilerplate code of handling route events\n  // and then calling a single method on another object.\n  // Have your routers configured to call the method on\n  // your object, directly.\n  //\n  // Configure an AppRouter with `appRoutes`.\n  //\n  // App routers can only take one `controller` object.\n  // It is recommended that you divide your controller\n  // objects in to smaller pieces of related functionality\n  // and have multiple routers / controllers, instead of\n  // just one giant router and controller.\n  //\n  // You can also add standard routes to an AppRouter.\n  \n  Marionette.AppRouter = Backbone.Router.extend({\n  \n    constructor: function(options) {\n      this.options = options || {};\n  \n      Backbone.Router.apply(this, arguments);\n  \n      var appRoutes = this.getOption('appRoutes');\n      var controller = this._getController();\n      this.processAppRoutes(controller, appRoutes);\n      this.on('route', this._processOnRoute, this);\n    },\n  \n    // Similar to route method on a Backbone Router but\n    // method is called on the controller\n    appRoute: function(route, methodName) {\n      var controller = this._getController();\n      this._addAppRoute(controller, route, methodName);\n    },\n  \n    // process the route event and trigger the onRoute\n    // method call, if it exists\n    _processOnRoute: function(routeName, routeArgs) {\n      // make sure an onRoute before trying to call it\n      if (_.isFunction(this.onRoute)) {\n        // find the path that matches the current route\n        var routePath = _.invert(this.getOption('appRoutes'))[routeName];\n        this.onRoute(routeName, routePath, routeArgs);\n      }\n    },\n  \n    // Internal method to process the `appRoutes` for the\n    // router, and turn them in to routes that trigger the\n    // specified method on the specified `controller`.\n    processAppRoutes: function(controller, appRoutes) {\n      if (!appRoutes) { return; }\n  \n      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n  \n      _.each(routeNames, function(route) {\n        this._addAppRoute(controller, route, appRoutes[route]);\n      }, this);\n    },\n  \n    _getController: function() {\n      return this.getOption('controller');\n    },\n  \n    _addAppRoute: function(controller, route, methodName) {\n      var method = controller[methodName];\n  \n      if (!method) {\n        throw new Marionette.Error('Method \"' + methodName + '\" was not found on the controller');\n      }\n  \n      this.route(route, methodName, _.bind(method, controller));\n    },\n  \n    mergeOptions: Marionette.mergeOptions,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    triggerMethod: Marionette.triggerMethod,\n  \n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Application\n  // -----------\n  \n  // Contain and manage the composite application as a whole.\n  // Stores and starts up `Region` objects, includes an\n  // event aggregator as `app.vent`\n  Marionette.Application = Marionette.Object.extend({\n    constructor: function(options) {\n      this._initializeRegions(options);\n      this._initCallbacks = new Marionette.Callbacks();\n      this.submodules = {};\n      _.extend(this, options);\n      this._initChannel();\n      Marionette.Object.apply(this, arguments);\n    },\n  \n    // Command execution, facilitated by Backbone.Wreqr.Commands\n    execute: function() {\n      this.commands.execute.apply(this.commands, arguments);\n    },\n  \n    // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n    request: function() {\n      return this.reqres.request.apply(this.reqres, arguments);\n    },\n  \n    // Add an initializer that is either run at when the `start`\n    // method is called, or run immediately if added after `start`\n    // has already been called.\n    addInitializer: function(initializer) {\n      this._initCallbacks.add(initializer);\n    },\n  \n    // kick off all of the application's processes.\n    // initializes all of the regions that have been added\n    // to the app, and runs all of the initializer functions\n    start: function(options) {\n      this.triggerMethod('before:start', options);\n      this._initCallbacks.run(options, this);\n      this.triggerMethod('start', options);\n    },\n  \n    // Add regions to your app.\n    // Accepts a hash of named strings or Region objects\n    // addRegions({something: \"#someRegion\"})\n    // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n    addRegions: function(regions) {\n      return this._regionManager.addRegions(regions);\n    },\n  \n    // Empty all regions in the app, without removing them\n    emptyRegions: function() {\n      return this._regionManager.emptyRegions();\n    },\n  \n    // Removes a region from your app, by name\n    // Accepts the regions name\n    // removeRegion('myRegion')\n    removeRegion: function(region) {\n      return this._regionManager.removeRegion(region);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this._regionManager.get(region);\n    },\n  \n    // Get all the regions from the region manager\n    getRegions: function() {\n      return this._regionManager.getRegions();\n    },\n  \n    // Create a module, attached to the application\n    module: function(moduleNames, moduleDefinition) {\n  \n      // Overwrite the module class if the user specifies one\n      var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n  \n      var args = _.toArray(arguments);\n      args.unshift(this);\n  \n      // see the Marionette.Module object for more information\n      return ModuleClass.create.apply(ModuleClass, args);\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business-specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on the application instance\n    _initializeRegions: function(options) {\n      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};\n  \n      this._initRegionManager();\n  \n      // Enable users to define `regions` in instance options.\n      var optionRegions = Marionette.getOption(options, 'regions');\n  \n      // Enable region options to be a function\n      if (_.isFunction(optionRegions)) {\n        optionRegions = optionRegions.call(this, options);\n      }\n  \n      // Overwrite current regions with those passed in options\n      _.extend(regions, optionRegions);\n  \n      this.addRegions(regions);\n  \n      return this;\n    },\n  \n    // Internal method to set up the region manager\n    _initRegionManager: function() {\n      this._regionManager = this.getRegionManager();\n      this._regionManager._parent = this;\n  \n      this.listenTo(this._regionManager, 'before:add:region', function() {\n        Marionette._triggerMethod(this, 'before:add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        Marionette._triggerMethod(this, 'add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'before:remove:region', function() {\n        Marionette._triggerMethod(this, 'before:remove:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'remove:region', function(name) {\n        delete this[name];\n        Marionette._triggerMethod(this, 'remove:region', arguments);\n      });\n    },\n  \n    // Internal method to setup the Wreqr.radio channel\n    _initChannel: function() {\n      this.channelName = _.result(this, 'channelName') || 'global';\n      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);\n      this.vent = _.result(this, 'vent') || this.channel.vent;\n      this.commands = _.result(this, 'commands') || this.channel.commands;\n      this.reqres = _.result(this, 'reqres') || this.channel.reqres;\n    }\n  });\n  \n  /* jshint maxparams: 9 */\n  \n  // Module\n  // ------\n  \n  // A simple module system, used to create privacy and encapsulation in\n  // Marionette applications\n  Marionette.Module = function(moduleName, app, options) {\n    this.moduleName = moduleName;\n    this.options = _.extend({}, this.options, options);\n    // Allow for a user to overide the initialize\n    // for a given module instance.\n    this.initialize = options.initialize || this.initialize;\n  \n    // Set up an internal store for sub-modules.\n    this.submodules = {};\n  \n    this._setupInitializersAndFinalizers();\n  \n    // Set an internal reference to the app\n    // within a module.\n    this.app = app;\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(moduleName, app, this.options);\n    }\n  };\n  \n  Marionette.Module.extend = Marionette.extend;\n  \n  // Extend the Module prototype with events / listenTo, so that the module\n  // can be used as an event aggregator or pub/sub.\n  _.extend(Marionette.Module.prototype, Backbone.Events, {\n  \n    // By default modules start with their parents.\n    startWithParent: true,\n  \n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic when extending Marionette.Module.\n    initialize: function() {},\n  \n    // Initializer for a specific module. Initializers are run when the\n    // module's `start` method is called.\n    addInitializer: function(callback) {\n      this._initializerCallbacks.add(callback);\n    },\n  \n    // Finalizers are run when a module is stopped. They are used to teardown\n    // and finalize any variables, references, events and other code that the\n    // module had set up.\n    addFinalizer: function(callback) {\n      this._finalizerCallbacks.add(callback);\n    },\n  \n    // Start the module, and run all of its initializers\n    start: function(options) {\n      // Prevent re-starting a module that is already started\n      if (this._isInitialized) { return; }\n  \n      // start the sub-modules (depth-first hierarchy)\n      _.each(this.submodules, function(mod) {\n        // check to see if we should start the sub-module with this parent\n        if (mod.startWithParent) {\n          mod.start(options);\n        }\n      });\n  \n      // run the callbacks to \"start\" the current module\n      this.triggerMethod('before:start', options);\n  \n      this._initializerCallbacks.run(options, this);\n      this._isInitialized = true;\n  \n      this.triggerMethod('start', options);\n    },\n  \n    // Stop this module by running its finalizers and then stop all of\n    // the sub-modules for this module\n    stop: function() {\n      // if we are not initialized, don't bother finalizing\n      if (!this._isInitialized) { return; }\n      this._isInitialized = false;\n  \n      this.triggerMethod('before:stop');\n  \n      // stop the sub-modules; depth-first, to make sure the\n      // sub-modules are stopped / finalized before parents\n      _.invoke(this.submodules, 'stop');\n  \n      // run the finalizers\n      this._finalizerCallbacks.run(undefined, this);\n  \n      // reset the initializers and finalizers\n      this._initializerCallbacks.reset();\n      this._finalizerCallbacks.reset();\n  \n      this.triggerMethod('stop');\n    },\n  \n    // Configure the module with a definition function and any custom args\n    // that are to be passed in to the definition function\n    addDefinition: function(moduleDefinition, customArgs) {\n      this._runModuleDefinition(moduleDefinition, customArgs);\n    },\n  \n    // Internal method: run the module definition function with the correct\n    // arguments\n    _runModuleDefinition: function(definition, customArgs) {\n      // If there is no definition short circut the method.\n      if (!definition) { return; }\n  \n      // build the correct list of arguments for the module definition\n      var args = _.flatten([\n        this,\n        this.app,\n        Backbone,\n        Marionette,\n        Backbone.$, _,\n        customArgs\n      ]);\n  \n      definition.apply(this, args);\n    },\n  \n    // Internal method: set up new copies of initializers and finalizers.\n    // Calling this method will wipe out all existing initializers and\n    // finalizers.\n    _setupInitializersAndFinalizers: function() {\n      this._initializerCallbacks = new Marionette.Callbacks();\n      this._finalizerCallbacks = new Marionette.Callbacks();\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n  \n  // Class methods to create modules\n  _.extend(Marionette.Module, {\n  \n    // Create a module, hanging off the app parameter as the parent object.\n    create: function(app, moduleNames, moduleDefinition) {\n      var module = app;\n  \n      // get the custom args passed in after the module definition and\n      // get rid of the module name and definition function\n      var customArgs = _.drop(arguments, 3);\n  \n      // Split the module names and get the number of submodules.\n      // i.e. an example module name of `Doge.Wow.Amaze` would\n      // then have the potential for 3 module definitions.\n      moduleNames = moduleNames.split('.');\n      var length = moduleNames.length;\n  \n      // store the module definition for the last module in the chain\n      var moduleDefinitions = [];\n      moduleDefinitions[length - 1] = moduleDefinition;\n  \n      // Loop through all the parts of the module definition\n      _.each(moduleNames, function(moduleName, i) {\n        var parentModule = module;\n        module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n      }, this);\n  \n      // Return the last module in the definition chain\n      return module;\n    },\n  \n    _getModule: function(parentModule, moduleName, app, def, args) {\n      var options = _.extend({}, def);\n      var ModuleClass = this.getClass(def);\n  \n      // Get an existing module of this name if we have one\n      var module = parentModule[moduleName];\n  \n      if (!module) {\n        // Create a new module if we don't have one\n        module = new ModuleClass(moduleName, app, options);\n        parentModule[moduleName] = module;\n        // store the module on the parent\n        parentModule.submodules[moduleName] = module;\n      }\n  \n      return module;\n    },\n  \n    // ## Module Classes\n    //\n    // Module classes can be used as an alternative to the define pattern.\n    // The extend function of a Module is identical to the extend functions\n    // on other Backbone and Marionette classes.\n    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.\n    getClass: function(moduleDefinition) {\n      var ModuleClass = Marionette.Module;\n  \n      if (!moduleDefinition) {\n        return ModuleClass;\n      }\n  \n      // If all of the module's functionality is defined inside its class,\n      // then the class can be passed in directly. `MyApp.module(\"Foo\", FooModule)`.\n      if (moduleDefinition.prototype instanceof ModuleClass) {\n        return moduleDefinition;\n      }\n  \n      return moduleDefinition.moduleClass || ModuleClass;\n    },\n  \n    // Add the module definition and add a startWithParent initializer function.\n    // This is complicated because module definitions are heavily overloaded\n    // and support an anonymous function, module class, or options object\n    _addModuleDefinition: function(parentModule, module, def, args) {\n      var fn = this._getDefine(def);\n      var startWithParent = this._getStartWithParent(def, module);\n  \n      if (fn) {\n        module.addDefinition(fn, args);\n      }\n  \n      this._addStartWithParent(parentModule, module, startWithParent);\n    },\n  \n    _getStartWithParent: function(def, module) {\n      var swp;\n  \n      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {\n        swp = module.constructor.prototype.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      if (_.isObject(def)) {\n        swp = def.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      return true;\n    },\n  \n    _getDefine: function(def) {\n      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {\n        return def;\n      }\n  \n      if (_.isObject(def)) {\n        return def.define;\n      }\n  \n      return null;\n    },\n  \n    _addStartWithParent: function(parentModule, module, startWithParent) {\n      module.startWithParent = module.startWithParent && startWithParent;\n  \n      if (!module.startWithParent || !!module.startWithParentIsConfigured) {\n        return;\n      }\n  \n      module.startWithParentIsConfigured = true;\n  \n      parentModule.addInitializer(function(options) {\n        if (module.startWithParent) {\n          module.start(options);\n        }\n      });\n    }\n  });\n  \n\n  return Marionette;\n}));\n","// Backbone.BabySitter\n// -------------------\n// v0.1.10\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.babysitter\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  'use strict';\n\n  var previousChildViewContainer = Backbone.ChildViewContainer;\n\n  // BabySitter.ChildViewContainer\n  // -----------------------------\n  //\n  // Provide a container to store, retrieve and\n  // shut down child views.\n  \n  Backbone.ChildViewContainer = (function (Backbone, _) {\n  \n    // Container Constructor\n    // ---------------------\n  \n    var Container = function(views){\n      this._views = {};\n      this._indexByModel = {};\n      this._indexByCustom = {};\n      this._updateLength();\n  \n      _.each(views, this.add, this);\n    };\n  \n    // Container Methods\n    // -----------------\n  \n    _.extend(Container.prototype, {\n  \n      // Add a view to this container. Stores the view\n      // by `cid` and makes it searchable by the model\n      // cid (and model itself). Optionally specify\n      // a custom key to store an retrieve the view.\n      add: function(view, customIndex){\n        var viewCid = view.cid;\n  \n        // store the view\n        this._views[viewCid] = view;\n  \n        // index it by model\n        if (view.model){\n          this._indexByModel[view.model.cid] = viewCid;\n        }\n  \n        // index by custom\n        if (customIndex){\n          this._indexByCustom[customIndex] = viewCid;\n        }\n  \n        this._updateLength();\n        return this;\n      },\n  \n      // Find a view by the model that was attached to\n      // it. Uses the model's `cid` to find it.\n      findByModel: function(model){\n        return this.findByModelCid(model.cid);\n      },\n  \n      // Find a view by the `cid` of the model that was attached to\n      // it. Uses the model's `cid` to find the view `cid` and\n      // retrieve the view using it.\n      findByModelCid: function(modelCid){\n        var viewCid = this._indexByModel[modelCid];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find a view by a custom indexer.\n      findByCustom: function(index){\n        var viewCid = this._indexByCustom[index];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find by index. This is not guaranteed to be a\n      // stable index.\n      findByIndex: function(index){\n        return _.values(this._views)[index];\n      },\n  \n      // retrieve a view by its `cid` directly\n      findByCid: function(cid){\n        return this._views[cid];\n      },\n  \n      // Remove a view\n      remove: function(view){\n        var viewCid = view.cid;\n  \n        // delete model index\n        if (view.model){\n          delete this._indexByModel[view.model.cid];\n        }\n  \n        // delete custom index\n        _.any(this._indexByCustom, function(cid, key) {\n          if (cid === viewCid) {\n            delete this._indexByCustom[key];\n            return true;\n          }\n        }, this);\n  \n        // remove the view from the container\n        delete this._views[viewCid];\n  \n        // update the length\n        this._updateLength();\n        return this;\n      },\n  \n      // Call a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.call`.\n      call: function(method){\n        this.apply(method, _.tail(arguments));\n      },\n  \n      // Apply a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.apply`.\n      apply: function(method, args){\n        _.each(this._views, function(view){\n          if (_.isFunction(view[method])){\n            view[method].apply(view, args || []);\n          }\n        });\n      },\n  \n      // Update the `.length` attribute on this container\n      _updateLength: function(){\n        this.length = _.size(this._views);\n      }\n    });\n  \n    // Borrowing this code from Backbone.Collection:\n    // http://backbonejs.org/docs/backbone.html#section-106\n    //\n    // Mix in methods from Underscore, for iteration, and other\n    // collection related features.\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck', 'reduce'];\n  \n    _.each(methods, function(method) {\n      Container.prototype[method] = function() {\n        var views = _.values(this._views);\n        var args = [views].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  \n    // return the public API\n    return Container;\n  })(Backbone, _);\n  \n\n  Backbone.ChildViewContainer.VERSION = '0.1.10';\n\n  Backbone.ChildViewContainer.noConflict = function () {\n    Backbone.ChildViewContainer = previousChildViewContainer;\n    return this;\n  };\n\n  return Backbone.ChildViewContainer;\n\n}));\n","// Backbone.Wreqr (Backbone.Marionette)\n// ----------------------------------\n// v1.3.5\n//\n// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.wreqr\n\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n    var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  \"use strict\";\n\n  var previousWreqr = Backbone.Wreqr;\n\n  var Wreqr = Backbone.Wreqr = {};\n\n  Backbone.Wreqr.VERSION = '1.3.5';\n\n  Backbone.Wreqr.noConflict = function () {\n    Backbone.Wreqr = previousWreqr;\n    return this;\n  };\n\n  // Handlers\n  // --------\n  // A registry of functions to call, given a name\n  \n  Wreqr.Handlers = (function(Backbone, _){\n    \"use strict\";\n    \n    // Constructor\n    // -----------\n  \n    var Handlers = function(options){\n      this.options = options;\n      this._wreqrHandlers = {};\n      \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    Handlers.extend = Backbone.Model.extend;\n  \n    // Instance Members\n    // ----------------\n  \n    _.extend(Handlers.prototype, Backbone.Events, {\n  \n      // Add multiple handlers using an object literal configuration\n      setHandlers: function(handlers){\n        _.each(handlers, function(handler, name){\n          var context = null;\n  \n          if (_.isObject(handler) && !_.isFunction(handler)){\n            context = handler.context;\n            handler = handler.callback;\n          }\n  \n          this.setHandler(name, handler, context);\n        }, this);\n      },\n  \n      // Add a handler for the given name, with an\n      // optional context to run the handler within\n      setHandler: function(name, handler, context){\n        var config = {\n          callback: handler,\n          context: context\n        };\n  \n        this._wreqrHandlers[name] = config;\n  \n        this.trigger(\"handler:add\", name, handler, context);\n      },\n  \n      // Determine whether or not a handler is registered\n      hasHandler: function(name){\n        return !! this._wreqrHandlers[name];\n      },\n  \n      // Get the currently registered handler for\n      // the specified name. Throws an exception if\n      // no handler is found.\n      getHandler: function(name){\n        var config = this._wreqrHandlers[name];\n  \n        if (!config){\n          return;\n        }\n  \n        return function(){\n          return config.callback.apply(config.context, arguments);\n        };\n      },\n  \n      // Remove a handler for the specified name\n      removeHandler: function(name){\n        delete this._wreqrHandlers[name];\n      },\n  \n      // Remove all handlers from this registry\n      removeAllHandlers: function(){\n        this._wreqrHandlers = {};\n      }\n    });\n  \n    return Handlers;\n  })(Backbone, _);\n  \n  // Wreqr.CommandStorage\n  // --------------------\n  //\n  // Store and retrieve commands for execution.\n  Wreqr.CommandStorage = (function(){\n    \"use strict\";\n  \n    // Constructor function\n    var CommandStorage = function(options){\n      this.options = options;\n      this._commands = {};\n  \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    // Instance methods\n    _.extend(CommandStorage.prototype, Backbone.Events, {\n  \n      // Get an object literal by command name, that contains\n      // the `commandName` and the `instances` of all commands\n      // represented as an array of arguments to process\n      getCommands: function(commandName){\n        var commands = this._commands[commandName];\n  \n        // we don't have it, so add it\n        if (!commands){\n  \n          // build the configuration\n          commands = {\n            command: commandName, \n            instances: []\n          };\n  \n          // store it\n          this._commands[commandName] = commands;\n        }\n  \n        return commands;\n      },\n  \n      // Add a command by name, to the storage and store the\n      // args for the command\n      addCommand: function(commandName, args){\n        var command = this.getCommands(commandName);\n        command.instances.push(args);\n      },\n  \n      // Clear all commands for the given `commandName`\n      clearCommands: function(commandName){\n        var command = this.getCommands(commandName);\n        command.instances = [];\n      }\n    });\n  \n    return CommandStorage;\n  })();\n  \n  // Wreqr.Commands\n  // --------------\n  //\n  // A simple command pattern implementation. Register a command\n  // handler and execute it.\n  Wreqr.Commands = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      // default storage type\n      storageType: Wreqr.CommandStorage,\n  \n      constructor: function(options){\n        this.options = options || {};\n  \n        this._initializeStorage(this.options);\n        this.on(\"handler:add\", this._executeCommands, this);\n  \n        Wreqr.Handlers.prototype.constructor.apply(this, arguments);\n      },\n  \n      // Execute a named command with the supplied args\n      execute: function(name){\n        name = arguments[0];\n        var args = _.rest(arguments);\n  \n        if (this.hasHandler(name)){\n          this.getHandler(name).apply(this, args);\n        } else {\n          this.storage.addCommand(name, args);\n        }\n  \n      },\n  \n      // Internal method to handle bulk execution of stored commands\n      _executeCommands: function(name, handler, context){\n        var command = this.storage.getCommands(name);\n  \n        // loop through and execute all the stored command instances\n        _.each(command.instances, function(args){\n          handler.apply(context, args);\n        });\n  \n        this.storage.clearCommands(name);\n      },\n  \n      // Internal method to initialize storage either from the type's\n      // `storageType` or the instance `options.storageType`.\n      _initializeStorage: function(options){\n        var storage;\n  \n        var StorageType = options.storageType || this.storageType;\n        if (_.isFunction(StorageType)){\n          storage = new StorageType();\n        } else {\n          storage = StorageType;\n        }\n  \n        this.storage = storage;\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Wreqr.RequestResponse\n  // ---------------------\n  //\n  // A simple request/response implementation. Register a\n  // request handler, and return a response from it\n  Wreqr.RequestResponse = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      request: function(name){\n        if (this.hasHandler(name)) {\n          return this.getHandler(name).apply(this, _.rest(arguments));\n        }\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Event Aggregator\n  // ----------------\n  // A pub-sub object that can be used to decouple various parts\n  // of an application through event-driven architecture.\n  \n  Wreqr.EventAggregator = (function(Backbone, _){\n    \"use strict\";\n    var EA = function(){};\n  \n    // Copy the `extend` function used by Backbone's classes\n    EA.extend = Backbone.Model.extend;\n  \n    // Copy the basic Backbone.Events on to the event aggregator\n    _.extend(EA.prototype, Backbone.Events);\n  \n    return EA;\n  })(Backbone, _);\n  \n  // Wreqr.Channel\n  // --------------\n  //\n  // An object that wraps the three messaging systems:\n  // EventAggregator, RequestResponse, Commands\n  Wreqr.Channel = (function(Wreqr){\n    \"use strict\";\n  \n    var Channel = function(channelName) {\n      this.vent        = new Backbone.Wreqr.EventAggregator();\n      this.reqres      = new Backbone.Wreqr.RequestResponse();\n      this.commands    = new Backbone.Wreqr.Commands();\n      this.channelName = channelName;\n    };\n  \n    _.extend(Channel.prototype, {\n  \n      // Remove all handlers from the messaging systems of this channel\n      reset: function() {\n        this.vent.off();\n        this.vent.stopListening();\n        this.reqres.removeAllHandlers();\n        this.commands.removeAllHandlers();\n        return this;\n      },\n  \n      // Connect a hash of events; one for each messaging system\n      connectEvents: function(hash, context) {\n        this._connect('vent', hash, context);\n        return this;\n      },\n  \n      connectCommands: function(hash, context) {\n        this._connect('commands', hash, context);\n        return this;\n      },\n  \n      connectRequests: function(hash, context) {\n        this._connect('reqres', hash, context);\n        return this;\n      },\n  \n      // Attach the handlers to a given message system `type`\n      _connect: function(type, hash, context) {\n        if (!hash) {\n          return;\n        }\n  \n        context = context || this;\n        var method = (type === 'vent') ? 'on' : 'setHandler';\n  \n        _.each(hash, function(fn, eventName) {\n          this[type][method](eventName, _.bind(fn, context));\n        }, this);\n      }\n    });\n  \n  \n    return Channel;\n  })(Wreqr);\n  \n  // Wreqr.Radio\n  // --------------\n  //\n  // An object that lets you communicate with many channels.\n  Wreqr.radio = (function(Wreqr, _){\n    \"use strict\";\n  \n    var Radio = function() {\n      this._channels = {};\n      this.vent = {};\n      this.commands = {};\n      this.reqres = {};\n      this._proxyMethods();\n    };\n  \n    _.extend(Radio.prototype, {\n  \n      channel: function(channelName) {\n        if (!channelName) {\n          throw new Error('Channel must receive a name');\n        }\n  \n        return this._getChannel( channelName );\n      },\n  \n      _getChannel: function(channelName) {\n        var channel = this._channels[channelName];\n  \n        if(!channel) {\n          channel = new Wreqr.Channel(channelName);\n          this._channels[channelName] = channel;\n        }\n  \n        return channel;\n      },\n  \n      _proxyMethods: function() {\n        _.each(['vent', 'commands', 'reqres'], function(system) {\n          _.each( messageSystems[system], function(method) {\n            this[system][method] = proxyMethod(this, system, method);\n          }, this);\n        }, this);\n      }\n    });\n  \n  \n    var messageSystems = {\n      vent: [\n        'on',\n        'off',\n        'trigger',\n        'once',\n        'stopListening',\n        'listenTo',\n        'listenToOnce'\n      ],\n  \n      commands: [\n        'execute',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ],\n  \n      reqres: [\n        'request',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ]\n    };\n  \n    var proxyMethod = function(radio, system, method) {\n      return function(channelName) {\n        var messageSystem = radio._getChannel(channelName)[system];\n  \n        return messageSystem[method].apply(messageSystem, _.rest(arguments));\n      };\n    };\n  \n    return new Radio();\n  \n  })(Wreqr, _);\n  \n\n  return Backbone.Wreqr;\n\n}));\n","( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery', 'modui-base' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null), require( 'modui-base' ) );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ), root.Backbone.ModuiBase );\n\t}\n}( this, function( _, Backbone, $, Super ) {\n\nvar lastPossibleViewElement = $( 'body' )[ 0 ];\nvar mOpenPopups = [];\n\nvar kState_Closed = 'closed';\nvar kState_Open = 'open';\nvar kState_Closing = 'closing';\n\nvar kFadeTime = 100;\nvar kMinTimeAfterOpenBeforeCloseOnOutsideClick = 100;\n\nvar kPositions = [\n\t'bottom center',\n\t'top center',\n\t'right center',\n\t'left center',\n\t'bottom center right',\n\t'bottom center left',\n\t'top center right',\n\t'top center left',\n\t'bottom left',\n\t'bottom right',\n\t'top left',\n\t'top right',\n\t'right top',\n\t'right bottom',\n\t'left top',\n\t'left bottom'\n];\n\nvar kPositionClasses = _.map( kPositions, function( thisPosition ) {\n\treturn thisPosition.replace( /\\ /g, '-' );\n} );\n\nvar mWindowEventListenersAttached = false;\n\nBackbone.ModuiPopup = Super.extend( {\n\toptions : [\n\t\t'target!',\n\t\t'contents',\n\t\t{ position : 'bottom center' },\n\t\t{ strictPositioning : false },\n\t\t{ distanceAway : 12 }, // margin / pointer is 10 pixels. With this default the tip of the pointer ends up 2 pixels from target\n\t\t{ pointerOffset : 0 },\n\t\t{ keepWithinRect : function() { return {\n\t\t\ttop : $( window ).scrollTop(),\n\t\t\tbottom : $( window ).scrollTop() + $( window ).height(),\n\t\t\tleft   : 0,\n\t\t\tright  : $( window ).width()\n\t\t}; } },\n\t\t{ closeOnOutsideClick : true },\n\t\t'onClose',\n\t\t'signature',\n\t\t'zIndex',\n\t\t{ 'extraClassName' : '' }, // appended to regular class names to facilitate styling\n\t\t{ 'kPointerHeight' : 10 }\n\t],\n\n\tpassMessages : { '*' : '.' }, // pass all courier messages directly through to parent view\n\n\tclassName : 'modui-popup',\n\n\tinitialize : function() {\n\t\tvar _this = this;\n\n\t\tthis._setupTargetEl();\n\n\t\tthis._setState( kState_Closed );\n\n\t\tif( this.closeOnOutsideClick ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\t// in case this popup is triggered by a click, we need to wait\n\t\t\t\t// until the next event loop before we bind the outside click\n\t\t\t\t// event to closing the popup. otherwise would close right away\n\t\t\t\t_this.$el.bind( 'clickoutside', function( e ) {\n\t\t\t\t\t// we do not close the popup if the clicked element is within the original\n\t\t\t\t\t// target element that this popup is pointing at (or IS that element)\n\t\t\t\t\tif( e.target !== _this.targetEl.get( 0 ) && ! $.contains( _this.targetEl.get( 0 ), e.target ) ) {\n\t\t\t\t\t\t_this.close();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tif( ! mWindowEventListenersAttached ) {\n\t\t\t_attachWindowEventListeners();\n\t\t\tmWindowEventListenersAttached = true;\n\t\t}\n\t},\n\n\trender : function() {\n\t\tif( _.isString( this.contents ) ) {\n\t\t\tthis.$el.html( '<div class=\"html-contents\">' + this.contents + '</div>' );\n\t\t} else if( _.isObject( this.contents ) && _.isFunction( this.contents.render ) ) {\n\t\t\tthis.$el.html( '' );\n\t\t\tthis.$el.append( this.contents.$el );\n\t\t\tthis.contents.render();\n\t\t\tthis.contents.delegateEvents();\n\t\t} else {\n\t\t\t// if we don't have any contents specified, assume that this is\n\t\t\t// a derived class that defines its own contents with its own render.\n\t\t\tSuper.prototype.render.apply( this, arguments );\n\t\t}\n\n\t\tif( ! _.isUndefined( this.zIndex ) ) this.$el.css( 'z-index', this.zIndex );\n\t\telse if( this.targetEl.zIndex ) {\n\t\t\t// if no explicit z-index is supplied, make sure we are in front of\n\t\t\t// our target (being mindful over browser support).\n\n\t\t\tvar popupZIndex = parseInt( this.$el.css( 'z-index' ), 10 );\n\t\t\tif( _.isNaN( popupZIndex ) || popupZIndex <= this.targetEl.zIndex() ) {\n\t\t\t\tthis.$el.css( 'z-index', this.targetEl.zIndex() + 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\tclose : function() {\n\t\tvar _this = this;\n\n\t\tif( this.state !== kState_Open ) return;\n\n\t\tthis.$el.unbind( 'clickoutside' );\n\t\tthis._setState( kState_Closing );\n\n\t\tthis.spawn( 'closing' );\n\n\t\tsetTimeout( function() {\n\t\t\tif( _this.state === kState_Closing ) {\n\t\t\t\t_this.remove();\n\t\t\t\tmOpenPopups = _.without( mOpenPopups, _this );\n\t\t\t\t_this.spawn( 'closed' );\n\t\t\t}\n\t\t}, kFadeTime );\n\n\t\tif( _.isFunction( this.onClose ) ) this.onClose.apply( this, arguments );\n\t},\n \n\treposition : function( allowedPositions, tryAgainIfDimentionsChange ) {\n\t\tvar _this = this;\n\n\t\tif( _.isUndefined( allowedPositions ) ) {\n\t\t\tallowedPositions = [];\n\t\t\tif( this.currentPosition && this.state === 'open' ) allowedPositions.push( this.currentPosition );\n\n\t\t\tif( _.isArray( this.position ) ) allowedPositions = allowedPositions.concat( this.position )\n\t\t\telse allowedPositions.push( this.position );\n\n\t\t\tif( ! this.strictPositioning ) allowedPositions = _.union( allowedPositions, kPositions );\n\t\t}\n\n\t\tallowedPositions = _.unique( allowedPositions );\n\n\t\tif( _.isUndefined( tryAgainIfDimentionsChange ) ) tryAgainIfDimentionsChange = true;\n\n\t\tvar targetWidth = Math.round( this.targetEl.outerWidth() );\n\t\tvar targetHeight = Math.round( this.targetEl.outerHeight() );\n\n\t\tvar popupWidth  = Math.round( this.$el.outerWidth() );\n\t\tvar popupHeight = Math.round( this.$el.outerHeight() );\n\t\tvar popupMargin = Math.round( ( this.$el.outerWidth( true ) - this.$el.outerWidth() ) / 2 ); // later we assume vertical is the same as this horizontal margin\n\n\t\tvar kPointerHeight = this.kPointerHeight;\n\t\tvar pointerInsetForSidePositions = Math.round( kPointerHeight + kPointerHeight * .66 );\n\n\t\tvar offsetParent = $( window );\n\t\tvar parentWidth = Math.round( offsetParent.outerWidth() );\n\t\tvar parentHeight = Math.round( offsetParent.outerHeight() );\n\n\t\tvar distanceAway = this.distanceAway;\n\n\t\tvar targetOffset = this.targetEl.offset();\n\t\tvar pointerOffset = this.pointerOffset;\n\n\t\tvar cssPositionProps;\n\n\t\tvar firstPositionTried;\n\t\tvar currentPositionBeingTried = firstPositionTried = _.first( allowedPositions );\n\t\tvar haveTriedOtherPositions = false;\n\t\tvar degreeOfUndesirabilityByPosition = {};\n\t\tvar allPositionsAreOutOfBounds = false;\n\t\tvar done = false;\n\n\t\tdo {  // run through all our different positions to find one that works\n\t\t\tif( ! _.contains( kPositions, currentPositionBeingTried ) ) {\n\t\t\t\tthrow new Error( 'Invalid position for popup: ' + currentPositionBeingTried );\n\t\t\t}\n\n\t\t\tswitch( currentPositionBeingTried ) {\n\t\t\t\tcase 'bottom center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + ( targetWidth / 2 ) - ( popupWidth / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + ( targetWidth / 2 ) - ( popupWidth / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right top':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right bottom':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + targetHeight + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + ( targetHeight / 2 ) - ( popupHeight / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + targetWidth + distanceAway - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left top':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left bottom':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + targetHeight + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left center':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: Math.round( targetOffset.top + ( targetHeight / 2 ) - ( popupHeight / 2 ) + pointerOffset ) - popupMargin,\n\t\t\t\t\t\tright : parentWidth - targetOffset.left + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom center right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom center left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tright : parentWidth - Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tleft : Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top center left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tleft : 'auto',\n\t\t\t\t\t\tright : parentWidth - Math.round( targetOffset.left + targetWidth / 2 ) - popupMargin - pointerInsetForSidePositions + pointerOffset,\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tright : parentWidth - ( targetOffset.left + targetWidth ) + pointerOffset - popupMargin,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop\t: targetOffset.top + targetHeight + distanceAway - popupMargin,\n\t\t\t\t\t\tleft : targetOffset.left + pointerOffset - popupMargin,\n\t\t\t\t\t\tright : 'auto',\n\t\t\t\t\t\tbottom : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top right':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tright : parentWidth - ( targetOffset.left + targetWidth ) + pointerOffset - popupMargin,\n\t\t\t\t\t\tleft : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top left':\n\t\t\t\t\tcssPositionProps = {\n\t\t\t\t\t\tbottom : 'auto',\n\t\t\t\t\t\tleft : targetOffset.left + pointerOffset - popupMargin,\n\t\t\t\t\t\ttop : targetOffset.top - popupHeight - kPointerHeight - distanceAway,\n\t\t\t\t\t\tright : 'auto'\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.$el\n\t\t\t\t.css( cssPositionProps )\n\t\t\t\t.removeClass( 'top left bottom right' )\n\t\t\t\t.removeClass( kPositionClasses.join( ' ' ) )\n\t\t\t\t.addClass( currentPositionBeingTried.split( ' ' )[ 0 ] )\n\t\t\t\t.addClass( currentPositionBeingTried.replace( /\\ /g, '-' ) )\n\t\t\t;\n\n\t\t\tdegreeOfUndesirabilityByPosition[ currentPositionBeingTried ] = this._getDegreeOfUndesirabilityOfCurrentPosition();\n\t\t\tvar cantFitIntoKeepWithinRectInThisPosition = degreeOfUndesirabilityByPosition[ currentPositionBeingTried ] !== 0;\n\n\t\t\tif( cantFitIntoKeepWithinRectInThisPosition ) {\n\t\t\t\tif( currentPositionBeingTried === firstPositionTried && haveTriedOtherPositions ) {\n\t\t\t\t\t// if we have tried all the different positions and are now are back at our\n\t\t\t\t\t// original 'preferred' position, then, shit, all positions were out of bounds.\\\n\t\t\t\t\t// just leave the popup in its default position, eventhough it is also out of bounds.\n\n\t\t\t\t\tallPositionsAreOutOfBounds = true;\n\t\t\t\t\tdone = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Popup is outside bounding rect. try a new position.\n\t\t\t\t\thaveTriedOtherPositions = true;\n\t\t\t\t\tcurrentPositionBeingTried = _getNextPositionToTry( currentPositionBeingTried, allowedPositions );\n\t\t\t\t}\n\t\t\t} else done = true;\n\t\t} while( ! done );\n\n\n\t\tif( allPositionsAreOutOfBounds && allowedPositions.length > 1 ) {\n\t\t\tvar bestOfTheBadPositions = _.first( _.sortBy( _.pairs( degreeOfUndesirabilityByPosition ), function( thisPosition ) {\n\t\t\t\t// if the current position and another position are tied, give preference to the current position\n\t\t\t\treturn thisPosition[ 1 ] + ( thisPosition[ 0 ] === _this.currentPosition && _this.state === 'open' ? -1 : 0 );\n\t\t\t} ) )[ 0 ];\n\n\t\t\tallPositionsAreOutOfBounds = this.reposition( [ bestOfTheBadPositions ] )\n\t\t}\n\n\t\tif( popupWidth !== Math.round( this.$el.outerWidth() ) || popupHeight !== Math.round( this.$el.outerHeight() ) ) {\n\t\t\t// there is a fringe case in which positining the popup actually changes its width and / or height.\n\t\t\t// for example, if the popup is placed just a few pixels from the edge of the view port, it might shrink\n\t\t\t// and text will wrap. so we have to check to see if the width or height of the popup has changed since\n\t\t\t// we started this re-positioning process. if so, try repositioning it once at the same position. if that\n\t\t\t// doesn't work, then move on to another position to see if we have better luck.\n\t\t\tif( ! tryAgainIfDimentionsChange ) return false;\n\n\t\t\tallPositionsAreOutOfBounds = this.reposition( [ currentPositionBeingTried ], false );\n\n\t\t\t// try one more time, with our new width and height.\n\t\t\t// if( ! this.reposition( [ currentPositionBeingTried ], false ) ) {\n\t\t\t// \t// if that doesn't work, then give up on this position\n\t\t\t// \tnewAllowedPositions = _.without( allowedPositions, currentPositionBeingTried );\n\t\t\t// \tif( newAllowedPositions.length > 0 ) allPositionsAreOutOfBounds = this.reposition( newAllowedPositions );\n\t\t\t// }\n\t\t}\n\n\t\tthis.currentPosition = currentPositionBeingTried;\n\n\t\treturn ! allPositionsAreOutOfBounds;\n\t},\n\n\t_onSubviewsRendered : function() {\n\t\tif( ! _.isUndefined( this.extraClassName ) ) this.$el.addClass( this.extraClassName );\n\t},\n\n\t_getDegreeOfUndesirabilityOfCurrentPosition : function() {\n\t\tvar myOffset = this.$el.offset();\n\t\tif( ! myOffset ) return false; // hidden elements have undefined offsets, not much we can do\n\n\t\tvar myWidth = this.$el.outerWidth();\n\t\tvar myHeight = this.$el.outerHeight();\n\n\t\tvar myRect = {\n\t\t\ttop : myOffset.top,\n\t\t\tright : myOffset.left + myWidth,\n\t\t\tbottom : myOffset.top + myHeight,\n\t\t\tleft : myOffset.left\n\t\t};\n\n\t\tvar keepWithinRect = _.result( this, 'keepWithinRect' );\n\n\t\tvar horizontalOverlap = Math.max( 0, Math.min( myRect.right, keepWithinRect.right ) - Math.max( myRect.left, keepWithinRect.left ) )\n\t\tvar veritcalOverlap = Math.max( 0, Math.min( myRect.bottom, keepWithinRect.bottom ) - Math.max( myRect.top, keepWithinRect.top ) );\n\n\t\tvar myRectArea = myWidth * myHeight;\n\n\t\tvar amountOutsideBoundingRect = myRectArea - horizontalOverlap * veritcalOverlap;\n\n\t\tvar documentRect = {\n\t\t\ttop : 0,\n\t\t\tleft : 0,\n\t\t\tright : $( document ).width(),\n\t\t\tbottom : $( document ).height()\n\t\t};\n\n\t\thorizontalOverlap = Math.max( 0, Math.min( myRect.right, documentRect.right ) - Math.max( myRect.left, documentRect.left ) )\n\t\tveritcalOverlap = Math.max( 0, Math.min( myRect.bottom, documentRect.bottom ) - Math.max( myRect.top, documentRect.top ) );\n\t\t\n\t\tvar amountOutsideDocument = myRectArea - horizontalOverlap * veritcalOverlap;\n\t\t\n\t\treturn amountOutsideBoundingRect + amountOutsideDocument * 10;\n\t},\n\n\t_onOptionsChanged : function( changedOptions ) {\n\t\tif( 'target' in changedOptions ) this._setupTargetEl();\n\t\tif( 'contents' in changedOptions ) this.render();\n\n\t\tthis.reposition();\n\t},\n\n\t_getParentView : function() {\n\t\tvar parent = null;\n\n\t\tvar curElement = this.targetEl;\n\t\twhile( curElement.length > 0 && curElement[0] !== lastPossibleViewElement ) {\n\t\t\tvar view = curElement.data( 'view' );\n\t\t\tif( view && _.isFunction( view.render ) ) {\n\t\t\t\tparent = view;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcurElement = curElement.parent();\n\t\t}\n\n\t\treturn parent;\n\t},\n\n\t_setState : function( newState ) {\n\t\tthis.state = newState;\n\t\tthis.$el.attr( 'data-state', this.state );\n\n\t\tif( newState === kState_Open ) this.timeOpened = (new Date()).getTime();\n\t},\n\n\t_setupTargetEl : function() {\n\t\tvar _this = this;\n\n\t\tthis.targetEl = _.isObject( this.target ) && _.isFunction( this.target.render ) ? this.target.$el : this.target;\n\n\t\tthis.targetEl.on( 'remove', function() {\n\t\t\t_this.close();\n\t\t} );\n\t}\n}, {\n\topen : function( options ) {\n\t\tvar popupInstance;\n\n\t\tif( options.signature ) {\n\t\t\tvar existingPopupsOfThisSignature = _.filter( mOpenPopups, function( thisPopup ) {\n\t\t\t\treturn thisPopup.signature === options.signature && thisPopup.state === kState_Open;\n\t\t\t} );\n\n\t\t\tif( existingPopupsOfThisSignature.length ) {\n\t\t\t\tvar popupWeAreGoingTokeep = existingPopupsOfThisSignature.pop();\n\n\t\t\t\tpopupInstance = popupWeAreGoingTokeep;\n\t\t\t\tpopupInstance.setOptions( options );\n\n\t\t\t\t_.each( existingPopupsOfThisSignature, function( thisExtraPopup ) {\n\t\t\t\t\tthisExtraPopup.close();\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif( ! popupInstance ) {\n\t\t\tpopupInstance = new this( options );\n\n\t\t\t$( 'body' ).append( popupInstance.$el );\n\n\t\t\tpopupInstance.render();\n\t\t\tpopupInstance.reposition();\n\t\t\tmOpenPopups.push( popupInstance );\n\t\t}\n\n\t\tpopupInstance._setState( kState_Open );\n\n\t\treturn popupInstance;\n\t}\n} );\n\n$( document ).bind( 'mousedown', function( e ) {\n\t_.each( mOpenPopups, function( thisPopup ) {\n\t\tif( thisPopup.closeOnOutsideClick &&\n\t\t\tthisPopup.state === kState_Open &&\n\t\t\t( new Date() ).getTime() - thisPopup.timeOpened > kMinTimeAfterOpenBeforeCloseOnOutsideClick ) {\n\t\t\tvar thisPopupEl = thisPopup.$el.get( 0 );\n\t\t\tif( thisPopupEl !== e.target && ! $.contains( thisPopupEl, e.target ) ) {\n\t\t\t\tthisPopup.close();\n\t\t\t}\n\t\t}\n\t} );\n} );\n\nfunction _attachWindowEventListeners() {\n\t$( window ).scroll( function() {\n\t\t_.each( mOpenPopups, function( thisPopup ) {\n\t\t\tthisPopup.reposition();\n\t\t} );\n\t} );\n\n\t$( window ).resize( function() {\n\t\t_.each( mOpenPopups, function( thisPopup ) {\n\t\t\tthisPopup.reposition();\n\t\t} );\n\t} );\n\n};\n\nfunction _elementPositionIsFixed( ele ) {\n\tif( ele.prop( 'tagName' ) === 'HTML' ) return false;\n\n\treturn ( ele.css( 'position' ) !== 'fixed' ) ? _elementPositionIsFixed( ele.offsetParent() ) : true;\n};\n\nfunction _getNextPositionToTry( position, positionsToTry ) {\n\tpositionIndex = _.indexOf( positionsToTry, position );\n\tif( positionIndex === -1 ) throw new Error( 'Could not find position \"' + position + '\" in the allowed positions.' );\n\n\treturn positionIndex === positionsToTry.length - 1 ? positionsToTry[ 0 ] : positionsToTry[ positionIndex + 1 ];\n}\n\n// return UMD\nreturn Backbone.ModuiPopup;\n\n} ) );","( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'backbone.View', 'backbone-view-options', 'backbone-courier', 'backbone-handle', 'backbone-subviews' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).View, require( 'backbone-view-options' ), require( 'backbone-courier' ), require( 'backbone-handle' ), require( 'backbone-subviews' ) );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, root.Backbone.View, root.Backbone.ViewOptions, root.Backbone.Courier, root.Backbone.Handle, root.Backbone.Subviews );\n\t}\n}( this, function( _, Backbone, Super, viewOptions, courier, handle, subviews ) {\n\nBackbone.ModuiBase = Super.extend( {\n\tclassName : 'view',\n\t\n\toptions : [],\n\n\tconstructor : function( options ) {\n\t\t//handle.add( Super.prototype ); // needs to be added to view prototype, so that logic executes before render() in derived classes\n\t\thandle.add( this ); // needs to be added to view prototype, so that logic executes before render() in derived classes\n\n\t\tviewOptions.add( this );\n\t\tthis.setOptions( options );\n\t\t\n\t\t// needs to be done before super is called, since super calls view#initialize,\n\t\t// and view#initialize might spawn events\n\t\tcourier.add( this );\n\n\t\t// must be done before super is called, since if this.render is referenced\n\t\t// in view#initialize (for example, if we bind an event to this.render),\n\t\t// we want it to reference the wrapped version (post subview) of render.\n\t\tsubviews.add( this );\n\n\t\tvar returnValue = Super.prototype.constructor.apply( this, arguments );\n\n\t\treturn returnValue;\n\t},\n\n\trender : function() {\n\t\tif( this.template ) {\n\t\t\tvar templateData = this.getOptions();\n\t\t\tif( this.model ) _.extend( templateData , this.model.attributes );\n\t\t\t_.extend( templateData , this._getTemplateData() );\n\n\t\t\tthis.$el.html( this._renderTemplate( templateData ) );\n\t\t}\n\t\t\n\t\tthis.resolveHandles();\n\t\t\n\t\treturn this;\n\t},\n\n\t_getTemplateData : function() {\n\t\t// this function may be overridden to add additional properties\n\t\t// to the object passed to the template's rendering function\n\t\treturn {};\n\t},\n\n\t_renderTemplate : function( templateData ) {\n\t\tvar html;\n\t\t\n\t\tif( _.isFunction( this.template ) )\n\t\t\thtml = this.template( templateData );\n\t\telse if( this.template.render )\n\t\t\thtml = this.template.render( templateData );\n\n\t\treturn html;\n\t},\n\n\t_onSubviewsRendered : function() {\n\t\t// override in derived classes\n\t}\n} );\n\nreturn Backbone.ModuiBase;\n\n} ) );\n","( function( root, factory ) {\n\t// UMD wrapper.\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tvar delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\tvar lastPossibleViewElement = _.isFunction( $ ) ? $( \"body\" )[ 0 ] : null;\n\n\tBackbone.Courier = {};\n\n\tBackbone.Courier.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\tsetElement : view.setElement\n\t\t};\n\n\t\t// ****************** Public Courier functions ****************** \n\n\t\tview.spawn = function( message, data ) {\n\t\t\t// can be called with message argument as an object, in which case message.name is required,\n\t\t\t// or can be called with message as a string that represents the name of the message and\n\t\t\t// data object which will be added to message object at message.data\n\t\t\tif( _.isString( message ) ) {\n\t\t\t\tmessage = {\n\t\t\t\t\tname : message,\n\t\t\t\t\tdata : data\n\t\t\t\t};\n\t\t\t} else if( _.isUndefined( message.name ) ) throw new Error( \"Undefined message name.\" );\n\n\t\t\tmessage.source = view;\n\t\t\tmessage.data = _.isUndefined( message.data ) ? {} : message.data;\n\n\t\t\tthis.trigger( message.name, message.data );\n\n\t\t\tvar isRoundTripMessage = message.name.charAt(message.name.length - 1) === \"!\";\n\n\t\t\tvar curParent = this._getParentView();\n\t\t\tvar messageShouldBePassed;\n\t\t\tvar value;\n\n\t\t\tif( message.name === 'removeButtonClicked' ) console.log( 'gotit' ); // REMOVEME\n\t\n\t\t\twhile( curParent ) {\n\t\t\t\t// check to see if curParent has an action to perform when this message is received.\n\t\t\t\tif( _.isObject( curParent.onMessages ) ) {\n\t\t\t\t\tvalue = getValueOfBestMatchingHashEntry( curParent.onMessages, message, curParent );\n\t\t\t\t\tif( value !== null ) {\n\t\t\t\t\t\tvar method = value;\n\t\t\t\t\t\tif( ! _.isFunction( method ) ) method = curParent[ value ];\n\t\t\t\t\t\tif( ! method ) throw new Error( \"Method \\\"\" + value + \"\\\" does not exist\" );\n\n\t\t\t\t\t\tvar returnValue = method.call( curParent, message.data, message.source, message.name );\n\t\t\t\t\t\tif( isRoundTripMessage ) return returnValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmessageShouldBePassed = isRoundTripMessage;\n\n\t\t\t\t// execute `passMessages` if its configured as a function\n\t\t\t\tvar passMessages = _.result( curParent, \"passMessages\" );\n\t\t\t\t// check to see if this message should be passed up a level\n\t\t\t\tif( _.isObject( passMessages ) ) {\n\t\t\t\t\tvalue = getValueOfBestMatchingHashEntry( passMessages, message, curParent );\n\t\t\t\t\tif( value !== null ) {\n\t\t\t\t\t\t\n\n\t\t\t\t\t\tif( value === \".\" )\n\t\t\t\t\t\t\t; // noop - pass this message through exactly as-is\n\t\t\t\t\t\telse if( _.isString( value ) ) {\n\t\t\t\t\t\t\t// if value is a string, we pass the existing message but\n\t\t\t\t\t\t\t// change the name to the supplied string\n\t\t\t\t\t\t\tmessage.name = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse throw new TypeError( \"Values of passMessages hash should be strings.\" );\n\n\t\t\t\t\t\tmessageShouldBePassed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif( ! messageShouldBePassed ) break; // if this message should not be passed, then we are done\n\n\t\t\t\tmessage.source = curParent; // keep the source of the message current as the message bubbles up the view hierarchy\n\t\t\t\tcurParent = curParent._getParentView();\n\t\t\t}\n\n\t\t\tif( isRoundTripMessage ) return undefined;\n\t\t};\n\n\t\t// supply your own _getParentView function on your view objects\n\t\t// if you would like to use custom means to determine a view's\n\t\t// \"parent\". The default means is to traverse the DOM tree and return\n\t\t// the closest parent element that has a view object attached in el.data( \"view\" )\n\t\tif( ! _.isFunction( view._getParentView ) )\n\t\t\tview._getParentView = function() {\n\t\t\t\tvar parent = null;\n\t\t\t\tvar curElement = this.$el.parent();\n\t\t\t\twhile( curElement.length > 0 && curElement[0] !== lastPossibleViewElement ) {\n\t\t\t\t\tvar view = curElement.data( \"view\" );\n\t\t\t\t\tif( view && _.isFunction( view.render ) ) {\n\t\t\t\t\t\tparent = view;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcurElement = curElement.parent();\n\t\t\t\t}\n\n\t\t\t\treturn parent;\n\t\t\t};\n\n\t\t// supply your own _getChildViewNamed function on your view objects\n\t\t// if you would like to use another means to test the source of your\n\t\t// messages (used for keys of onMessages and passMessages of the form\n\t\t// { \"message source\" : handler }). By default, child views are looked\n\t\t// up by name in view.subviews[ childViewName ] (and then tested against message.source)\n\t\tif( ! _.isFunction( view._getChildViewNamed ) )\n\t\t\tview._getChildViewNamed = function( childViewName ) {\n\t\t\t\tif( ! _.isObject( this.subviews ) ) return null;\n\t\t\t\treturn this.subviews[ childViewName ];\n\t\t\t};\n\n\t\t// ****************** Overridden Backbone.View functions ****************** \n\n\t\tview.setElement = function( element, delegate ) {\n\t\t\tvar retval = overriddenViewMethods.setElement.call( this, element, delegate );\n\t\t\tprepareViewElement( view );\n\t\t\treturn retval;\n\t\t};\n\n\t\t// ****************** Body of Backbone.Courier.add() function ****************** \n\n\t\tif( view.$el ) prepareViewElement( view ); // otherwise this will be done when #setElement is called\n\n\t\t// ****************** Private Utility Functions ****************** \n\n\t\tfunction prepareViewElement( view ) {\n\t\t\t// store a reference to the view object in the DOM element's jQuery data. Make sure it is supported.\n\t\t\tif( _.isFunction( view.$el.data ) && ! view.$el.data( \"view\" ) ) view.$el.data( \"view\", view );\n\t\t}\n\n\t\tfunction getValueOfBestMatchingHashEntry( hash, message, view ) {\n\t\t\t// return the value of the entry in a onMessages or passMessages hash that is the \n\t\t\t// \"most specific\" match for this message, or null, if there are no matches.\n\n\t\t\tvar matchingEntries = [];\n\n\t\t\tfor( var key in hash ) {\n\t\t\t\t// We are looking for keys in the hash that have the `message` argument\n\t\t\t\t// as the first word of their key. If we find one, they either need\n\t\t\t\t// no source qualifier as the second word of the key (in which case\n\t\t\t\t// we will pass this message regardless of where it comes from),\n\t\t\t\t// or we need this the name of the subview that is the source of the\n\t\t\t\t// message second word of the key.\n\n\t\t\t\tvar match = key.match( delegateEventSplitter );\n\n\t\t\t\tvar eventName = match[ 1 ], subviewName = match[ 2 ];\n\t\t\t\tvar eventNameRegEx = new RegExp( '^' + eventName.replace( /\\*/g, \"[\\\\w]*\" ) + '$' );\n\t\t\t\tif( ! eventNameRegEx.test( message.name ) ) continue;\n\n\t\t\t\tif( subviewName !== \"\" && view._getChildViewNamed( subviewName ) !== message.source ) continue;\n\n\t\t\t\tmatchingEntries.push( { eventName : eventName, subviewName : subviewName, value : hash[ key ] } );\n\t\t\t}\n\n\t\t\t// if more than one hash keys match, order them by specificity, that is,\n\t\t\t// in descending order of how many non-wild card characters they contain,\n\t\t\t// so that entry with most specificity is at index 0. Also, consider any\n\t\t\t// entries that have subview qualifier more specific than those that do not.\n\t\t\tif( matchingEntries.length > 1 )\n\t\t\t\tmatchingEntries = _.sortBy( matchingEntries, function( thisEntry ) {\n\t\t\t\t\tvar nonWildcardCharactersInEventName = thisEntry.eventName.replace( \"*\", \"\" );\n\t\t\t\t\tvar hasSubviewQualifier = thisEntry.subviewName !== \"\";\n\n\t\t\t\t\t// promote all entries with subview qualifiers to a higher level of specificity.\n\t\t\t\t\t// Figure there will never, ever be a 1000 character long event name\n\t\t\t\t\tvar specificity = ( hasSubviewQualifier ? 1000 : 0 ) + nonWildcardCharactersInEventName.length;\n\n\t\t\t\t\t// negate to sort in descending order\n\t\t\t\t\treturn( - specificity );\n\t\t\t\t} );\n\n\t\t\treturn matchingEntries.length ? matchingEntries[ 0 ].value : null;\n\t\t}\n\t};\n\n\treturn Backbone.Courier;\n} ) );\n","var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n/*\n * Backbone.Handle, v0.1\n * Copyright (c)2014 Rotunda Software, LLC.\n * Parts adapted from Backbone.Marionette, Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.handle\n */\n\n( function( root, factory ) {\n\t// UMD wrapper.\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tBackbone.Handle = {};\n\n\tBackbone.Handle.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\tdelegateEvents : view.delegateEvents\n\t\t};\n\n\t\tview.resolveHandles = function() {\n\t\t\tvar _this = this;\n\n\t\t\tif( this.ui ) {\n\t\t\t\tif( ! this.uiBindings ) {\n\t\t\t\t\t// We want to store a copy of the ui hash in uiBindings, since afterwards the values \n\t\t\t\t\t// in the ui hash will be overridden with jQuery selectors, and we may need then again.\n\t\t\t\t\tthis.uiBindings = _.result( this, \"ui\" );\n\t\t\t\t}\n\n\t\t\t\t// refreshing the associated selectors since they should point to the newly rendered elements.\n\t\t\t\tthis.ui = {};\n\t\t\t\t_.each( _.keys( this.uiBindings ), function( key ) {\n\t\t\t\t\tvar selector = _this.uiBindings[ key ];\n\n\t\t\t\t\t// if the selector ends with \"!\", we assert that there is exactly one DOM element that matches\n\t\t\t\t\t// the selector. That is, we through an error if the number of matches elements != 1.\n\t\t\t\t\tvar assertOneAndOnlyOne = selector[ selector.length - 1 ] === \"!\";\n\t\t\t\t\tif( assertOneAndOnlyOne ) selector = selector.slice( 0, selector.length - 1 );\n\t\t\t\t\t_this.ui[ key ] = _this.$( selector );\n\t\t\t\t\tif( assertOneAndOnlyOne ) {\n\t\t\t\t\t\tif( _this.ui[ key ].length !== 1 )\n\t\t\t\t\t\t\tthrow new Error( \"Expected selector \\\"\" + selector + \"\\\" to match 1 element, but \" + _this.ui[ key ].length + \" found.\" );\n\t\t\t\t\t\t_this.uiBindings[ key ] = selector;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\n\t\tview.delegateEvents = function( events ) {\n\t\t\tvar _this = this;\n\n\t\t\tif( _.isFunction( this.events ) ) this.events = this.events.call( this.events );\n\t\t\tevents = events || _.clone( this.events ) || {};\n\n\t\t\tevents = this._exapandUIHandlesInHash.call( this, events );\n\n\t\t\treturn overriddenViewMethods.delegateEvents.call( this, events );\n\t\t};\n\n\t\tview._exapandUIHandlesInHash = function( events ) {\n\t\t\tvar newEvents = {};\n\n\t\t\tvar uiBindings = this.uiBindings || _.result( this, \"ui\" );\n\t\t\tif( ! uiBindings ) { return events; }\n\n\t\t\t_.each( events, function( value, key ) {\n\t\t\t\tvar match = key.match( delegateEventSplitter );\n\t\t\t\tvar eventName = match[ 1 ], uiElName = match[ 2 ];\n\n\t\t\t\tif( uiElName !== \"\" && ! _.isUndefined( uiBindings[ uiElName ] ) ) {\n\t\t\t\t\tvar selector = uiBindings[ uiElName ];\n\t\t\t\t\tif( selector[ selector.length - 1 ] === \"!\" )\n\t\t\t\t\tselector = selector.slice( 0, selector.length - 1 );\n\n\t\t\t\t\tkey = eventName + \" \" + selector;\n\t\t\t\t}\n\n\t\t\t\tnewEvents[ key ] = value;\n\t\t\t} );\n\n\t\t\treturn newEvents;\n\t\t};\n\t};\n\n\treturn Backbone.Handle;\n} ) );","/*\n * Backbone.Subviews, v0.7.4\n * Copyright (c)2013-2014 Rotunda Software, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.subviews\n*/\n( function( root, factory ) {\n\t// UMD wrapper\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( [ 'underscore', 'backbone', 'jquery' ], factory );\n\t} else if ( typeof exports !== 'undefined' ) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null).$ );\n\t} else {\n\t\t// Browser globals\n\t\tfactory( root._, root.Backbone, ( root.jQuery || root.Zepto || root.$ ) );\n\t}\n}( this, function( _, Backbone, $ ) {\n\tBackbone.Subviews = {};\n\n\tBackbone.Subviews.add = function( view ) {\n\t\tvar overriddenViewMethods = {\n\t\t\trender : view.render,\n\t\t\tremove : view.remove\n\t\t};\n\n\t\t// ****************** Overridden Backbone.View methods ****************** \n\n\t\tview.render = function() {\n\t\t\tvar args = Array.prototype.slice.call( arguments );\n\n\t\t\t_prerender.call( this );\n\t\t\tvar returnValue = overriddenViewMethods.render.apply( this, args );\n\t\t\t_postrender.call( this );\n\n\t\t\treturn returnValue;\n\t\t};\n\n\t\tview.remove = function() {\n\t\t\tthis.removeSubviews();\n\t\t\treturn overriddenViewMethods.remove.call( this );\n\t\t};\n\n\t\t// ****************** Additional public methods ****************** \n\n\t\tview.removeSubviews = function() {\n\t\t\t// Removes all subviews and cleans up references in this.subviews.\n\n\t\t\tif( this.subviews ) {\n\t\t\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\t\t\tthisSubview.remove();\n\t\t\t\t} );\n\n\t\t\t\tdelete this.subviews;\n\t\t\t}\n\t\t};\n\n\t\t// ****************** Additional private methods ****************** \n\n\t\tview._createSubview = function( subviewName, placeHolderDiv ) {\n\t\t\t// Return a new subview instance given a subview name and its placeHolderDiv.\n\t\t\t// Implemented as instance method so that this behavior may be customized / overridden.\n\t\t\tvar subviewCreator = this.subviewCreators[ subviewName ];\n\t\t\tif( _.isUndefined( subviewCreator ) ) throw new Error( \"Can not find subview creator for subview named: \" + subviewName );\n\n\t\t\treturn subviewCreator.apply( this );\n\t\t};\n\t};\n\n\t// ****************** Private utility functions ****************** \n\n\tfunction _prerender() {\n\t\tif( ! this.subviews ) this.subviews = {};\n\n\t\t// Detach each of our subviews that we have already created during previous\n\t\t// renders from the DOM, so that they do not loose their DOM events when\n\t\t// we re-render the contents of this view's DOM element.\n\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\tthisSubview.$el.detach();\n\t\t} );\n\t}\n\n\tfunction _postrender() {\n\t\tvar _this = this;\n\t\tthis.subviewCreators = this.subviewCreators || {};\n\n\t\t// Support subviewCreators as both objects and functions.\n\t\tthis.subviewCreators = _.result( this, \"subviewCreators\" );\n\t\t\n\t\tthis.$( \"[data-subview]\" ).each( function() {\n\t\t\tvar thisPlaceHolderDiv = $( this );\n\t\t\tvar subviewName = thisPlaceHolderDiv.attr( \"data-subview\" );\n\t\t\tvar newSubview;\n\n\t\t\tif( _.isUndefined( _this.subviews[ subviewName ] ) ) {\n\t\t\t\tnewSubview = _this._createSubview( subviewName, thisPlaceHolderDiv );\n\t\t\t\tif( newSubview === null ) return;  // subview creators can return null to indicate that the subview should not be created\n\t\t\t\t_this.subviews[ subviewName ] = newSubview;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// If the subview is already defined, then use the existing subview instead\n\t\t\t\t// of creating a new one. This allows us to re-render a parent view without\n\t\t\t\t// loosing any dynamic state data on the existing subview objects. To force\n\t\t\t\t// re-initialization of subviews, call view.removeSubviews before re-rendering.\n\n\t\t\t\tnewSubview = _this.subviews[ subviewName ];\n\t\t\t}\n\n\t\t\tthisPlaceHolderDiv.replaceWith( newSubview.$el );\n\t\t} );\n\n\t\t// Now that all subviews have been created, render them one at a time, in the\n\t\t// order they occur in the DOM.\n\t\t_.each( this.subviews, function( thisSubview ) {\n\t\t\tthisSubview.render();\n\t\t} );\n\n\t\t// Call this.onSubviewsRendered after everything is done (hook for application defined logic)\n\t\tif( _.isFunction( this.onSubviewsRendered ) ) this.onSubviewsRendered.call( this );\n\t\tif( _.isFunction( this._onSubviewsRendered ) ) this._onSubviewsRendered.call( this ); // depreciated. backwards compatibility for versions < 0.6.\n\t}\n\n\treturn Backbone.Subviews;\n} ) );\n","/*\n * Backbone.ViewOptions, v0.2.4\n * Copyright (c)2014 Rotunda Software, LLC.\n * Distributed under MIT license\n * http://github.com/rotundasoftware/backbone.viewOptions\n*/\n\n( function( root, factory ) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine([ 'underscore', 'backbone' ], factory );\n\t} else if (typeof exports === 'object') {\n\t\t// Node\n\t\tmodule.exports = factory( (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null), (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null) );\n\t} else {\n\t\t// Browser globals\n\t\troot.returnExports = factory( root._, root.Backbone );\n\t}\n} ( this, function( _, Backbone ) {\n\tBackbone.ViewOptions = {};\n\n\tBackbone.ViewOptions.add = function( view, optionsDeclarationsProperty ) {\n\t\tif( _.isUndefined( optionsDeclarationsProperty ) ) optionsDeclarationsProperty = \"options\";\n\n\t\t// ****************** Public methods added to view ******************\n\n\t\tview.setOptions = function( options ) {\n\t\t\tvar _this = this;\n\t\t\tvar optionsThatWereChanged = {};\n\t\t\tvar optionsThatWereChangedPreviousValues = {};\n\n\t\t\tvar optionDeclarations = _.result( this, optionsDeclarationsProperty );\n\n\t\t\tif( ! _.isUndefined( optionDeclarations ) ) {\n\t\t\t\tvar normalizedOptionDeclarations = _normalizeOptionDeclarations( optionDeclarations );\n\n\t\t\t\t_.each( normalizedOptionDeclarations, function( thisOptionProperties, thisOptionName ) {\n\t\t\t\t\tvar thisOptionRequired = thisOptionProperties.required;\n\t\t\t\t\tvar thisOptionDefaultValue = thisOptionProperties.defaultValue;\n\n\t\t\t\t\tif( thisOptionRequired ) {\n\t\t\t\t\t\t// note we do not throw an error if a required option is not supplied, but it is\n\t\t\t\t\t\t// found on the object itself (due to a prior call of view.setOptions, most likely)\n\n\t\t\t\t\t\tif( ( ! options || ! _.contains( _.keys( options ), thisOptionName ) ) && _.isUndefined( _this[ thisOptionName ] ) )\n\t\t\t\t\t\t\tthrow new Error( \"Required option \\\"\" + thisOptionName + \"\\\" was not supplied.\" );\n\n\t\t\t\t\t\tif( options && _.contains( _.keys( options ), thisOptionName ) && _.isUndefined( options[ thisOptionName ] ) )\n\t\t\t\t\t\t\tthrow new Error( \"Required option \\\"\" + thisOptionName + \"\\\" can not be set to undefined.\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// attach the supplied value of this option, or the appropriate default value, to the view object\n\t\t\t\t\tif( options && thisOptionName in options && ! _.isUndefined( options[ thisOptionName ] ) ) {\n\t\t\t\t\t\tvar oldValue = _this[ thisOptionName ];\n\t\t\t\t\t\tvar newValue = options[ thisOptionName ];\n\t\t\t\t\t\t// if this option already exists on the view, and the new value is different,\n\t\t\t\t\t\t// make a note that we will be changing it\n\t\t\t\t\t\tif( ! _.isUndefined( oldValue ) && oldValue !== newValue ) {\n\t\t\t\t\t\t\toptionsThatWereChangedPreviousValues[ thisOptionName ] = oldValue;\n\t\t\t\t\t\t\toptionsThatWereChanged[ thisOptionName ] = newValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this[ thisOptionName ] = newValue;\n\t\t\t\t\t\t// note we do NOT delete the option off the options object here so that\n\t\t\t\t\t\t// multiple views can be passed the same options object without issue.\n\t\t\t\t\t}\n\t\t\t\t\telse if( _.isUndefined( _this[ thisOptionName ] ) ) {\n\t\t\t\t\t\t// note defaults do not write over any existing properties on the view itself.\n\t\t\t\t\t\t_this[ thisOptionName ] = thisOptionDefaultValue;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif( _.keys( optionsThatWereChanged ).length > 0 ) {\n\t\t\t\tif( _.isFunction( _this.onOptionsChanged ) )\n\t\t\t\t\t_this.onOptionsChanged( optionsThatWereChanged, optionsThatWereChangedPreviousValues );\n\t\t\t\telse if( _.isFunction( _this._onOptionsChanged ) )\n\t\t\t\t\t_this._onOptionsChanged( optionsThatWereChanged, optionsThatWereChangedPreviousValues );\n\t\t\t}\n\t\t};\n\n\t\tview.getOptions = function() {\n\t\t\tvar optionDeclarations = _.result( this, optionsDeclarationsProperty );\n\t\t\tif( _.isUndefined( optionDeclarations ) ) return {};\n\n\t\t\tvar normalizedOptionDeclarations = _normalizeOptionDeclarations( optionDeclarations );\n\t\t\tvar optionsNames = _.keys( normalizedOptionDeclarations );\n\n\t\t\treturn _.pick( this, optionsNames );\n\t\t};\n\t};\n\n\t// ****************** Private Utility Functions ******************\n\n\tfunction _normalizeOptionDeclarations( optionDeclarations ) {\n\t\t// convert our short-hand option syntax (with exclamation marks, etc.)\n\t\t// to a simple array of standard option declaration objects.\n\n\t\tvar normalizedOptionDeclarations = {};\n\n\t\tif( ! _.isArray( optionDeclarations ) ) throw new Error( \"Option declarations must be an array.\" );\n\n\t\t_.each( optionDeclarations, function( thisOptionDeclaration ) {\n\t\t\tvar thisOptionName, thisOptionRequired, thisOptionDefaultValue;\n\n\t\t\tthisOptionRequired = false;\n\t\t\tthisOptionDefaultValue = undefined;\n\n\t\t\tif( _.isString( thisOptionDeclaration ) )\n\t\t\t\tthisOptionName = thisOptionDeclaration;\n\t\t\telse if( _.isObject( thisOptionDeclaration ) ) {\n\t\t\t\tthisOptionName = _.first( _.keys( thisOptionDeclaration ) );\n\t\t\t\tif( _.isFunction( thisOptionDeclaration[ thisOptionName ] ) )\n\t\t\t\t\tthisOptionDefaultValue = thisOptionDeclaration[ thisOptionName ];\n\t\t\t\telse\n\t\t\t\t\tthisOptionDefaultValue = _.clone( thisOptionDeclaration[ thisOptionName ] );\n\t\t\t}\n\t\t\telse throw new Error( \"Each element in the option declarations array must be either a string or an object.\" );\n\n\t\t\tif( thisOptionName[ thisOptionName.length - 1 ] === \"!\" ) {\n\t\t\t\tthisOptionRequired = true;\n\t\t\t\tthisOptionName = thisOptionName.slice( 0, thisOptionName.length - 1 );\n\t\t\t}\n\n\t\t\tnormalizedOptionDeclarations[ thisOptionName ] = normalizedOptionDeclarations[ thisOptionName ] || {};\n\t\t\tnormalizedOptionDeclarations[ thisOptionName ].required = thisOptionRequired;\n\t\t\tif( ! _.isUndefined( thisOptionDefaultValue ) ) normalizedOptionDeclarations[ thisOptionName ].defaultValue = thisOptionDefaultValue;\n\t\t} );\n\n\t\treturn normalizedOptionDeclarations;\n\t}\n\n\treturn Backbone.ViewOptions;\n\n} ) );\n","/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory((typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory((typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});","/* Citation controller */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n\n  var $els = {\n    output: $('#citation-output')\n  };\n\n  var citation1 = [\n    {\n      author: 'Copeland, Edward',\n      title: '“Money”',\n      container: false,\n      callouts: {\n        author: 'The author (21) and title (27) of the source, found on the first page of the essay.',\n        title: 'The author (21) and title (27) of the source, found on the first page of the essay.'\n      }\n    },\n    {\n      author: 'edited by Copeland and Juliet McMaster',\n      title: '_The Cambridge Companion to Jane Austen_',\n      publisher: 'Cambridge UP',\n      pubdate: '1997',\n      location: 'pp. 131–48',\n      callouts: {\n        author: 'The book has two editors, one of whom is Copeland. ' +\n          'They are <strong>other contributors</strong>. Since Edward ' +\n          'Copeland is named twice, his first name is omitted in the ' +\n          'second occurrence. See p. xxx.',\n        title: 'The essay is contained in a book titled <em>The Cambridge ' +\n          'Companion to Jane Austen</em>. The book is thus the container ' +\n          'of the essay. In this tool, we use underscores to impart <em>_italics_</em>.',\n        version: 'The book shows no sign of being a <strong>version</strong> ' +\n          '(such as a second edition). See p. xxx.',\n        number: 'No <strong>number</strong> is displayed (such as a ' +\n          'volume number). See p. xxx.',\n        publisher: 'The <strong>publisher</strong> is identified on the title page.',\n        pubdate: 'The <strong>publication date</strong> doesn’t appear ' +\n          'on the title page, but a copyright date is given on the reverse. ' +\n          'The latest copyright date should usually be treated as the publication ' +\n          'date unless the copyright page indicates that the book was significantly ' +\n          'changed at a later date (not just reprinted)',\n        location: 'For an essay in a book anthology, the <strong>location</strong> is ' +\n          'the range of page numbers from the starting one to the' +\n          'ending one. See p. xxx.'\n      }\n    }\n  ];\n\n  var showCitationIntro = function () {\n\n    $els.output.hide();\n\n    App.Content.show(Module.Views.Layout, {\n      forceShow: true,\n      preventDestroy: true\n    });\n\n    Module.Views.Layout.showChildView('intro', new Module.Views.Intro());\n    Module.Views.Layout.showChildView('form', new Module.Views.Citation.CollectionView({\n      collection: new Module.Models.Citation.Collection([{container: false}, {}])\n    }));\n\n  };\n\n  var showCitationForm = function () {\n\n    $els.output.show();\n\n    App.Content.show(Module.Views.Layout, {\n      forceShow: true,\n      preventDestroy: true\n    });\n\n    Module.Views.Layout.showChildView('intro', new Module.Views.Step1());\n    Module.Views.Layout.showChildView('form', new Module.Views.Citation.CollectionView({\n      collection: new Module.Models.Citation.Collection(citation1)\n    }));\n\n  };\n\n  return Backbone.Marionette.Controller.extend({\n    showCitationIntro: showCitationIntro,\n    showCitationForm: showCitationForm\n  });\n\n};\n","/* Citation module */\n\nmodule.exports = function (Module, App, Backbone) {\n\n  'use strict';\n\n  require('./links')(Module, App, Backbone);\n  require('./models/citation-model.js')(Module, App, Backbone);\n  require('./views/citation-view.js')(Module, App, Backbone);\n  require('./views/citation-intro-view.js')(Module, App, Backbone);\n  require('./views/citation-step1-view.js')(Module, App, Backbone);\n  require('./views/layout-view.js')(Module, App, Backbone);\n\n  var Router = require('./routers')(Module, App, Backbone);\n  var Controller = require('./controllers')(Module, App, Backbone);\n\n  App.addInitializer(function () {\n    Module.router = new Router({\n      controller: new Controller()\n    });\n  });\n\n};\n","/* Link handler module */\n\n/*global window*/\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n\n  // Listen for internal links when pushState is enabled.\n  $('body').on('click', 'a', function (e) {\n\n    if (Backbone.history.options && Backbone.history.options.pushState) {\n\n      // Only act on internal links.\n      var href = $(this).attr('href');\n\n      if (href && href.charAt(0) === '#') {\n\n        // Disable link and route manually.\n        e.preventDefault();\n\n        href = (href === '#') ? '/' : href;\n        Backbone.history.navigate(href.substring(1), true);\n        window.scrollTo(0, 0);\n\n      }\n\n    }\n\n  });\n\n};\n","/* Citation model */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  Module.Models = Module.Models || {};\n\n  var _ = Backbone._;\n\n  var Model = Backbone.Model.extend({\n\n    defaults: function () {\n      return {\n        title: '',\n        author: '',\n        version: '',\n        number: '',\n        publisher: '',\n        pubdate: '',\n        location: '',\n        container: true,\n        containerNumber: 1,\n        callouts: {},\n        order: this.collection.nextOrder()\n      };\n    },\n\n    getCitationString: function () {\n\n      var modelAttrs = this.attributes;\n\n      var containerAttrs = [\n        'title',\n        'author',\n        'version',\n        'number',\n        'publisher',\n        'pubdate',\n        'location'\n      ];\n\n      var sourceAttrs = [\n        'author',\n        'title'\n      ];\n\n      var formatAttribute = function (attr, str, separator) {\n        str = (str + separator).replace(/^[\\\"]/, '“').replace(/[\\\"”]$/, separator + '”');\n        return str.replace(/_([^_]+)_/g, '<em>$1</em>');\n      };\n\n      var filterAttrs = (this.attributes.container) ? containerAttrs : sourceAttrs;\n\n      // Filter attributes for valid string values, then reduce to a\n      // citation string.\n      var attrs = _.filter(filterAttrs, function (attr) {\n        var val = modelAttrs[attr];\n        return (typeof val === 'string' && val.replace(/\\s/g, '') !== '');\n      });\n\n      var last = attrs.length - 1;\n      var citation = attrs.map(function (attr, i) {\n        var separator = (i === last) ? '.' : ',';\n        return '<span class=\"field-' + attr + '\">' + formatAttribute(attr, modelAttrs[attr], separator) + '</span>';\n      });\n\n      // Wrap in span.\n      return '<span class=\"container-' + this.attributes.order + '\">' + citation.join(' ') + '</span> ';\n\n    }\n\n  });\n\n  var Collection = Backbone.Collection.extend({\n\n    model: Model,\n    comparator: 'order',\n\n    initialize: function () {\n      this.bind('add remove', this.updateNumbers);\n    },\n\n    updateNumbers: function () {\n      this.each(function (model, i) {\n        model.set('containerNumber', i);\n      });\n    },\n\n    counter: 0,\n\n    nextOrder: function () {\n      this.counter = this.counter + 1;\n      return this.counter;\n    }\n\n  });\n\n  Module.Models.Citation = {\n    Model: Model,\n    Collection: Collection\n  };\n\n};\n","/* Citation router */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n  return Backbone.Marionette.AppRouter.extend({\n    appRoutes: {\n      '': 'showCitationIntro',\n      'step-1': 'showCitationForm'\n    }\n  });\n};\n","var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div> <p>This section will allow you to explore MLA citation style and the <strong>list of core elements</strong> through a series of examples. At the end of the steps, you will be able to explore the list of core elements interactively.</p> <p>This tool demonstrates the basic concepts of MLA citation style and makes reference to sections of the <em>Handbook</em> where concepts are explained in greater detail and many additional examples are given. If you already have the <em>Handbook</em>, you may want to keep it on hand as you proceed.</p> <p>This is the <strong>list of core elements</strong>:</p> </div>';\n}\nreturn __p;\n};\n","var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"citation-output\"> <h4>Assembled citation</h4> <p id=\"citation-el\"></p> </div> <div id=\"citation-intro\"></div> <div id=\"citation-form\"></div> <div id=\"citation-thread\"><a class=\"button\" href=\"#step-1\">Next &gt;</a></div>';\n}\nreturn __p;\n};\n","var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div> <h3>Citing an essay in a book collection</h3> </div>';\n}\nreturn __p;\n};\n","var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<h3>Container '+\n((__t=( containerNumber ))==null?'':__t)+\n' </h3> <p class=\"field\"> <input id=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"title\" type=\"text\" '+\n((__t=( (title) ? ' value=\"' + title + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Title of container\"> <label for=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \">Title of container</label> </p> <p class=\"field\"> <input id=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"author\" type=\"text\" '+\n((__t=( (author) ? ' value=\"' + author + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Other contributor or contributors\"> <label for=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \">Other contributors</label> </p> <p class=\"field\"> <input id=\"container-version- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"version\" type=\"text\" '+\n((__t=( (version) ? ' value=\"' + version + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Version number\"> <label for=\"container-version- '+\n((__t=( order ))==null?'':__t)+\n' \">Version</label> </p> <p class=\"field\"> <input id=\"container-number- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"number\" type=\"text\" '+\n((__t=( (number) ? ' value=\"' + number + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Volume, issue, or record number\"> <label for=\"container-number- '+\n((__t=( order ))==null?'':__t)+\n' \">Number</label> </p> <p class=\"field\"> <input id=\"container-publisher- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"publisher\" type=\"text\" '+\n((__t=( (publisher) ? ' value=\"' + publisher + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Publisher\"> <label for=\"container-publisher- '+\n((__t=( order ))==null?'':__t)+\n' \">Publisher</label> </p> <p class=\"field\"> <input id=\"container-pubdate- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"pubdate\" type=\"text\" '+\n((__t=( (pubdate) ? ' value=\"' + pubdate + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Publication date\"> <label for=\"container-pubdate- '+\n((__t=( order ))==null?'':__t)+\n' \">Publication date</label> </p> <p class=\"field final-element\"> <input id=\"container-location- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"location\" type=\"text\" '+\n((__t=( (location) ? ' value=\"' + location + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Page numbers, DOI, URL\"> <label for=\"container-location- '+\n((__t=( order ))==null?'':__t)+\n' \">Location</label> </p> <p class=\"form-controls\"> <button class=\"add-container\" type=\"button\">+ Add a larger container</button> <button class=\"remove-container\" type=\"button\"></button> </p>';\n}\nreturn __p;\n};\n","var _ = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"field final-element\"> <input id=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"author\" type=\"text\" '+\n((__t=( (author) ? ' value=\"' + author + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Author of source\"> <label for=\"container-author- '+\n((__t=( order ))==null?'':__t)+\n' \">Author</label> </p> <p class=\"field final-element\"> <input id=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \" name=\"title\" type=\"text\" '+\n((__t=( (title) ? ' value=\"' + title + '\"' : '' ))==null?'':__t)+\n' placeholder=\"Title of source\"> <label for=\"container-title- '+\n((__t=( order ))==null?'':__t)+\n' \">Title of source</label> </p> <p class=\"form-controls\"> <button class=\"add-container\" type=\"button\">+ Add a larger container</button> </p>';\n}\nreturn __p;\n};\n","/* Intro view */\n\n'use strict';\n\nvar introTemplate = require('../templates/citation-intro.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n    getTemplate: introTemplate\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Intro = ItemView;\n\n};\n","/* Intro view */\n\n'use strict';\n\nvar template = require('../templates/citation-step-1.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n    getTemplate: template\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Step1 = ItemView;\n\n};\n","/* Citation views */\n\n'use strict';\n\nvar popup = require('modui-popup');\n\nvar sourceTemplate = require('../templates/source-form.tpl');\nvar containerTemplate = require('../templates/container-form.tpl');\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var $ = Backbone.$;\n  var _ = Backbone._;\n\n  var ItemView = Backbone.Marionette.ItemView.extend({\n\n    tagName: 'fieldset',\n\n    getTemplate: function () {\n      return this.model.get('container') ? containerTemplate : sourceTemplate;\n    },\n\n    className: function () {\n      return this.model.get('container') ? 'container' : 'source';\n    },\n\n    events: {\n      'click .remove-container': 'removeContainer',\n      'focus input': 'showPopup',\n      'blur input': 'hideHilite',\n      'keyup input': 'updateField'\n    },\n\n    updateField: function (evt) {\n      var $field = $(evt.target);\n      var newAttr = {};\n      newAttr[$field.attr('name')] = $field.val();\n      this.model.set(newAttr);\n    },\n\n    removeContainer: function () {\n      this.model.collection.remove(this.model);\n    },\n\n    showPopup: function (evt) {\n\n      var fieldName = $(evt.target).attr('name');\n      if (this.model.attributes.callouts[fieldName]) {\n        popup.open({\n          target: $(evt.target).closest('.field'),\n          position: 'right center',\n          contents: this.model.attributes.callouts[fieldName]\n        });\n        console.log(fieldName);\n      }\n\n      $('.citation-output span').removeClass('hilite');\n      $('.container-' + this.model.attributes.order + ' .field-' + fieldName).addClass('hilite');\n\n    },\n\n    hideHilite: function () {\n      $('.citation-output span').removeClass('hilite');\n    },\n\n    serializeData: function () {\n      return this.model.toJSON();\n    }\n\n  });\n\n  var CollectionView = Backbone.Marionette.CollectionView.extend({\n\n    childView: ItemView,\n    tagName: 'div',\n    className: 'citation',\n\n    events: {\n      'click .add-container': 'addContainer',\n      'keyup input': 'updateCitation'\n    },\n\n    onRender: function() {\n      this.updateCitation();\n    },\n\n    addContainer: function () {\n      this.collection.add({});\n    },\n\n    onRemoveChild: function () {\n      this.updateCitation();\n    },\n\n    updateCitation: function () {\n      var citation = _.map(this.collection.models, function (model) {\n        return model.getCitationString();\n      });\n      $('#citation-el').html(citation.join(''));\n    }\n\n  });\n\n  Module.Views = Module.Views || {};\n\n  Module.Views.Citation = {\n    ItemView: ItemView,\n    CollectionView: CollectionView\n  };\n\n};\n","/* Layout view */\n\n'use strict';\n\nmodule.exports = function (Module, App, Backbone) {\n\n  var layoutTemplate = require('../templates/citation-layout.tpl');\n\n  var Layout = Backbone.Marionette.LayoutView.extend({\n\n    template: layoutTemplate,\n    className: 'citation-template',\n\n    regions: {\n      output: '#citation-output',\n      intro: '#citation-intro',\n      form: '#citation-form'\n    }\n\n  });\n\n  Module.Views = Module.Views || {};\n  Module.Views.Layout = new Layout();\n\n};\n","module.exports=[\n  \"plagiarism\",\n  \"works cited\",\n  \"How to cite a Web site\",\n  \"How many spaces after a period\",\n  \"How to cite a YouTube video\"\n]\n","/**\n * Main theme JS file driven by CommonJS and Browserify.\n */\n\n'use strict';\n\nvar jQuery = (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null);\nvar underscore = (typeof window !== \"undefined\" ? window['_'] : typeof global !== \"undefined\" ? global['_'] : null);\nvar Backbone = (typeof window !== \"undefined\" ? window['Backbone'] : typeof global !== \"undefined\" ? global['Backbone'] : null);\n\n// Side-shim jQuery and Underscore before requiring Marionette.\nBackbone.$ = jQuery;\nBackbone._ = underscore;\nrequire('backbone.marionette');\n\n// Create the application.\nvar App = new Backbone.Marionette.Application();\n\n// Add regions.\nApp.addRegions({\n  Content: '#citation-tool'\n});\n\n// Load modules.\nrequire('./page-menu')(jQuery);\nrequire('./search-hints')(jQuery);\nApp.module('Citations', require('./citations'));\n\n// Start the history listener.\nApp.on('start', function () {\n  Backbone.history.start({\n    pushState: true,\n    root: '/understanding-mla-style/'\n  });\n});\n\n// Start the application.\nif (jQuery('#citation-tool').length) {\n  App.start();\n}\n","/* Page menu module */\n\n/*global document*/\n\nmodule.exports = function ($) {\n\n  'use strict';\n\n  var $button = $('.page-sub-menu-link');\n  var $targets = $('.page-sub-menu-link, .page-sub-menu');\n  var $parent = $('.page-menu');\n\n  var activeClass = 'page-menu-active';\n  var hoverOutDelay = 250;\n\n  var closeDropdown = function (e) {\n    e.stopPropagation();\n    $parent.removeClass(activeClass);\n    document.removeEventListener('touchstart', closeDropdown);\n  };\n\n  $targets.on({\n    mouseover: function() {\n      if ($button.prop('hoverTimeout')) {\n        $button.prop('hoverTimeout', clearTimeout($button.prop('hoverTimeout')));\n      }\n      $parent.addClass(activeClass);\n    },\n    mouseleave: function() {\n      $button.prop('hoverTimeout', setTimeout(function() {\n        $parent.removeClass(activeClass);\n      }, hoverOutDelay));\n    }\n  });\n\n  if ('ontouchstart' in document.documentElement) {\n\n    $button.on('touchstart', function(e) {\n\n      if (e.touches.length === 1) {\n\n        e.stopPropagation();\n\n        if (!$parent.hasClass(activeClass)) {\n\n          // Prevent link on first touch.\n          if (e.target === this || e.target.parentNode === this) {\n              e.preventDefault();\n          }\n\n          $parent.addClass(activeClass);\n          document.addEventListener('touchstart', closeDropdown, false);\n\n        }\n\n      }\n\n    });\n\n  }\n\n};\n","/* Search hints module */\n\nmodule.exports = function ($) {\n\n  'use strict';\n\n  require('typeahead.js');\n\n  // Load terms.\n  var searchTerms = require('../data/searchTerms.json');\n\n  // Toggle order drop-down.\n  $('.order-button-link').on('click', function () {\n    $(this).parent().toggleClass('open');\n  });\n\n  // Add Typeahead to search field.\n  function findMatches (q, cb) {\n\n    var matches = [];\n    var substrRegex = new RegExp(q, 'i');\n\n    $.each(searchTerms, function (i, str) {\n      if (substrRegex.test(str)) {\n        matches.push(str);\n      }\n    });\n\n    cb(matches);\n\n  }\n\n  var options = {\n    hint: true,\n    highlight: true,\n    minLength: 2\n  };\n\n  var engine = {\n    name: 'terms',\n    source: findMatches\n  };\n\n  // Bind to search field.\n  $('.search-field')\n    .typeahead(options, engine)\n    .on('typeahead:selected', function () {\n      $(this).closest('form').submit();\n    });\n\n};\n"],"sourceRoot":"/source/"}