!function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i?i:t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){(function(n){!function(r,o){if("function"==typeof define&&define.amd)define(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(t,e){return r.Marionette=r.Mn=o(r,t,e)});else if("undefined"!=typeof i){var s="undefined"!=typeof window?window.Backbone:"undefined"!=typeof n?n.Backbone:null,a="undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null;t("backbone.wreqr"),t("backbone.babysitter");e.exports=o(r,s,a)}else r.Marionette=r.Mn=o(r,r.Backbone,r._)}(this,function(t,e,i){"use strict";var n=t.Marionette,r=t.Mn,o=e.Marionette={};o.VERSION="2.4.4",o.noConflict=function(){return t.Marionette=n,t.Mn=r,this},o.Deferred=e.$.Deferred,o.FEATURES={},o.isEnabled=function(t){return!!o.FEATURES[t]},o.extend=e.Model.extend,o.isNodeAttached=function(t){return e.$.contains(document.documentElement,t)},o.mergeOptions=function(t,e){t&&i.extend(this,i.pick(t,e))},o.getOption=function(t,e){return t&&e?t.options&&void 0!==t.options[e]?t.options[e]:t[e]:void 0},o.proxyGetOption=function(t){return o.getOption(this,t)},o._getValue=function(t,e,n){return i.isFunction(t)&&(t=n?t.apply(e,n):t.call(e)),t},o.normalizeMethods=function(t){return i.reduce(t,function(t,e,n){return i.isFunction(e)||(e=this[e]),e&&(t[n]=e),t},{},this)},o.normalizeUIString=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})},o.normalizeUIKeys=function(t,e){return i.reduce(t,function(t,i,n){var r=o.normalizeUIString(n,e);return t[r]=i,t},{})},o.normalizeUIValues=function(t,e,n){return i.each(t,function(r,s){i.isString(r)?t[s]=o.normalizeUIString(r,e):i.isObject(r)&&i.isArray(n)&&(i.extend(r,o.normalizeUIValues(i.pick(r,n),e)),i.each(n,function(t){var n=r[t];i.isString(n)&&(r[t]=o.normalizeUIString(n,e))}))}),t},o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),r=[t].concat(i.toArray(arguments));return i[n].apply(i,r)}})};var s=o.deprecate=function(t,e){i.isObject(t)&&(t=t.prev+" is going to be removed in the future. Please use "+t.next+" instead."+(t.url?" See: "+t.url:"")),void 0!==e&&e||s._cache[t]||(s._warn("Deprecation warning: "+t),s._cache[t]=!0)};s._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},s._cache={},o._triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi;return function(n,r,o){var s=arguments.length<3;s&&(o=r,r=o[0]);var a,u="on"+r.replace(e,t),h=n[u];return i.isFunction(h)&&(a=h.apply(n,s?i.rest(o):o)),i.isFunction(n.trigger)&&(s+o.length>1?n.trigger.apply(n,s?o:[r].concat(i.drop(o,0))):n.trigger(r)),a}}(),o.triggerMethod=function(t){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(t){var e=i.isFunction(t.triggerMethod)?t.triggerMethod:o.triggerMethod;return e.apply(t,i.rest(arguments))},o.MonitorDOMRefresh=function(t){function e(){t._isShown=!0,n()}function i(){t._isRendered=!0,n()}function n(){t._isShown&&t._isRendered&&o.isNodeAttached(t.el)&&o.triggerMethodOn(t,"dom:refresh",t)}t._isDomRefreshMonitored||(t._isDomRefreshMonitored=!0,t.on({show:e,render:i}))},function(t){function e(e,n,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];if(!o)throw new t.Error('Method "'+i+'" was configured as an event handler, but does not exist.');e.listenTo(n,r,o)})}function n(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];t.stopListening(e,n,r)})}function o(t,e,i,n){t.stopListening(e,i,n)}function s(e,n,r,o,s){if(n&&r){if(!i.isObject(r))throw new t.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});r=t._getValue(r,e),i.each(r,function(t,r){i.isFunction(t)?o(e,n,r,t):s(e,n,r,t)})}}t.bindEntityEvents=function(t,i,r){s(t,i,r,n,e)},t.unbindEntityEvents=function(t,e,i){s(t,e,i,o,r)},t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)},t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(t,e){i.isObject(t)?(e=t,t=e.message):e||(e={});var n=Error.call(this,t);i.extend(this,i.pick(n,a),i.pick(e,a)),this.captureStackTrace(),e.url&&(this.url=this.urlRoot+e.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e}),n.then(function(i){e&&(i.context=e),t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,e.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption}),o.Object=function(t){this.options=i.extend({},i.result(this,"options"),t),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,e.Events,{initialize:function(){},destroy:function(t){return t=t||{},this.triggerMethod("before:destroy",t),this.triggerMethod("destroy",t),this.stopListening(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,t)},show:function(t,e){if(this._ensureElement()){this._ensureViewIsIntact(t),o.MonitorDOMRefresh(t);var n=e||{},r=t!==this.currentView,s=!!n.preventDestroy,a=!!n.forceShow,u=!!this.currentView,h=r&&!s,l=r||a;if(u&&this.triggerMethod("before:swapOut",this.currentView,this,e),this.currentView&&delete this.currentView._parent,h?this.empty():u&&l&&this.currentView.off("destroy",this.empty,this),l){t.once("destroy",this.empty,this),t._parent=this,this._renderView(t),u&&this.triggerMethod("before:swap",t,this,e),this.triggerMethod("before:show",t,this,e),o.triggerMethodOn(t,"before:show",t,this,e),u&&this.triggerMethod("swapOut",this.currentView,this,e);var c=o.isNodeAttached(this.el),d=[],f=i.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},n);return c&&f.triggerBeforeAttach&&(d=this._displayedViews(t),this._triggerAttach(d,"before:")),this.attachHtml(t),this.currentView=t,c&&f.triggerAttach&&(d=this._displayedViews(t),this._triggerAttach(d)),u&&this.triggerMethod("swap",t,this,e),this.triggerMethod("show",t,this,e),o.triggerMethodOn(t,"show",t,this,e),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(t,e){var n=(e||"")+"attach";i.each(t,function(t){o.triggerMethodOn(t,n,t,this)},this)},_displayedViews:function(t){return i.union([t],i.result(t,"_getNestedViews")||[])},_renderView:function(t){t.supportsRenderLifecycle||o.triggerMethodOn(t,"before:render",t),t.render(),t.supportsRenderLifecycle||o.triggerMethodOn(t,"render",t)},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(t){if(!t)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(t.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'})},getEl:function(t){return e.$(t,o._getValue(this.options.parentEl,this))},attachHtml:function(t){this.$el.contents().detach(),this.el.appendChild(t.el)},empty:function(t){var e=this.currentView,i=t||{},n=!!i.preventDestroy;return e?(e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),n||this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,n&&this.$el.contents().detach(),this):this},_destroyView:function(){var t=this.currentView;t.isDestroyed||(t.supportsDestroyLifecycle||o.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():(t.remove(),t.isDestroyed=!0),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"destroy",t))},attachView:function(t){return this.currentView&&delete this.currentView._parent,t._parent=this,this.currentView=t,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(t,e){if(i.isString(t))return this._buildRegionFromSelector(t,e);if(t.selector||t.el||t.regionClass)return this._buildRegionFromObject(t,e);if(i.isFunction(t))return this._buildRegionFromRegionClass(t);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,e){var n=t.regionClass||e,r=i.omit(t,"selector","regionClass");return t.selector&&!r.el&&(r.el=t.selector),new n(r)},_buildRegionFromRegionClass:function(t){return new t}}),o.RegionManager=o.Controller.extend({constructor:function(t){this._regions={},this.length=0,o.Controller.call(this,t),this.addRegions(this.getOption("regions"))},addRegions:function(t,e){return t=o._getValue(t,this,arguments),i.reduce(t,function(t,n,r){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,e)),t[r]=this.addRegion(r,n),t},{},this)},addRegion:function(t,e){var i;return i=e instanceof o.Region?e:o.Region.buildRegion(e,o.Region),this.triggerMethod("before:add:region",t,i),i._parent=this,this._store(t,i),this.triggerMethod("add:region",t,i),i},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];return this._remove(t,e),e},removeRegions:function(){var t=this.getRegions();return i.each(this._regions,function(t,e){this._remove(e,t)},this),t},emptyRegions:function(){var t=this.getRegions();return i.invoke(t,"empty"),t},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]||this.length++,this._regions[t]=e},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e),e.empty(),e.stopListening(),delete e._parent,delete this._regions[t],this.length--,this.triggerMethod("remove:region",t,e)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(t){this.templateId=t},i.extend(o.TemplateCache,{templateCaches:{},get:function(t,e){var i=this.templateCaches[t];return i||(i=new o.TemplateCache(t),this.templateCaches[t]=i),i.load(e)},clear:function(){var t,e=i.toArray(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(t){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId,t);return this.compiledTemplate=this.compileTemplate(e,t),this.compiledTemplate},loadTemplate:function(t,i){var n=e.$(t);if(!n.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+t+'"'});return n.html()},compileTemplate:function(t,e){return i.template(t,e)}}),o.Renderer={render:function(t,e){if(!t)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n=i.isFunction(t)?t:o.TemplateCache.get(t);return n(e)}},o.View=e.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:function(t){this.render=i.bind(this.render,this),t=o._getValue(t,this),this.options=i.extend({},i.result(this,"options"),t),this._behaviors=o.Behaviors(this),e.View.call(this,this.options),o.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,i.rest(arguments))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return e=o._getValue(e,this),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,e||i.result(this,"ui"))},normalizeUIValues:function(t,e){var n=i.result(this,"ui"),r=i.result(this,"_uiBindings");return o.normalizeUIValues(t,r||n,e)},configureTriggers:function(){if(this.triggers){var t=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(t,function(t,e,i){return t[i]=this._buildViewTrigger(e),t},{},this)}},delegateEvents:function(t){return this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.bindEntityEvents(this.model,t.getOption("modelEvents")),t.bindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(t){var n=o._getValue(t||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(t)&&(this.events=n);var r={},s=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),u=i.result(this,"behaviorTriggers")||{};i.extend(r,s,n,a,u),e.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return e.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.unbindEntityEvents(this.model,t.getOption("modelEvents")),t.unbindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var t=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.isRendered=!1,this.remove(),i.invoke(this._behaviors,"destroy",t),this},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(t,function(t,e){this.ui[e]=this.$(t)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(t){var e=i.defaults({},t,{preventDefault:!0,stopPropagation:!0}),n=i.isObject(t)?e.event:t;return function(t){t&&(t.preventDefault&&e.preventDefault&&t.preventDefault(),t.stopPropagation&&e.stopPropagation&&t.stopPropagation());var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(n,i)}},setElement:function(){var t=e.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),t},triggerMethod:function(){var t=o._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],i.rest(arguments)),t},_triggerEventOnBehaviors:function(t){for(var e=o._triggerMethod,i=this._behaviors,n=0,r=i&&i.length;r>n;n++)e(i[n],t)},_triggerEventOnParentLayout:function(t,e){var n=this._parentLayoutView();if(n){var r=o.getOption(n,"childViewEventPrefix"),s=r+":"+t,a=[this].concat(e);o._triggerMethod(n,s,a);var u=o.getOption(n,"childEvents");u=o._getValue(u,n);var h=n.normalizeMethods(u);h&&i.isFunction(h[t])&&h[t].apply(n,a)}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var t=this._getImmediateChildren();return t.length?i.reduce(t,function(t,e){return e._getNestedViews?t.concat(e._getNestedViews()):t},t):t},_parentLayoutView:function(){for(var t=this._parent;t;){if(t instanceof o.LayoutView)return t;t=t._parent}},normalizeMethods:o.normalizeMethods,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var t=[this.model||this.collection];return arguments.length&&t.push.apply(t,arguments),this.model?this.serializeModel.apply(this,t):{items:this.serializeCollection.apply(this,t)}},serializeCollection:function(t){return t.toJSON.apply(t,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var t=this.getTemplate();if(t!==!1){if(!t)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var e=this.mixinTemplateHelpers(this.serializeData()),i=o.Renderer.render(t,e,this);return this.attachElContent(i),this}},attachElContent:function(t){return this.$el.html(t),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(t){this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var t,e=this._isShown&&o.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),e&&this._triggerBeforeAttach&&(t=this._getNestedViews(),this._triggerMethodMany(t,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),e&&this._triggerAttach&&(t=this._getNestedViews(),this._triggerMethodMany(t,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(t,e,n){var r=i.drop(arguments,3);i.each(t,function(t){o.triggerMethodOn.apply(t,[t,n,t,e].concat(r))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t,e,n){var r=void 0!==n.at&&(n.index||e.indexOf(t));if((this.getOption("filter")||r===!1)&&(r=i.indexOf(this._filteredSortedModels(r),t)),this._shouldAddChild(t,r)){this.destroyEmptyView();var o=this.getChildView(t);this.addChild(t,o,r)}},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(t){o.triggerMethodOn(t,"before:show",t)})},_onShowCalled:function(){this.children.each(function(t){o.triggerMethodOn(t,"show",t)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var t=this.children,e=this._filteredSortedModels(),n=i.some(e,function(e){return!t.findByModel(e)});if(n)this.render();else{var r=i.map(e,function(e,i){var n=t.findByModel(e);return n._index=i,n.el}),o=t.filter(function(t){return!i.contains(r,t.el)});this.triggerMethod("before:reorder"),this._appendReorderedChildren(r),i.each(o,this.removeChildView,this),this.checkEmpty(),this.triggerMethod("reorder")}},resortView:function(){o.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var t=this._filteredSortedModels(),e=i.find(t,function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this);e&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(t){this.$el.append(t)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.getOption("filter")&&this.showEmptyView())},showCollection:function(){var t,e=this._filteredSortedModels();i.each(e,function(e,i){t=this.getChildView(e),this.addChild(e,t,i)},this)},_filteredSortedModels:function(t){var e=this.getViewComparator(),n=this.collection.models;if(t=Math.min(Math.max(t,0),n.length-1),e){var r;t&&(r=n[t],n=n.slice(0,t).concat(n.slice(t+1))),n=this._sortModelsBy(n,e),r&&n.splice(t,0,r)}return this.getOption("filter")&&(n=i.filter(n,function(t,e){return this._shouldAddChild(t,e)},this)),n},_sortModelsBy:function(t,e){return"string"==typeof e?i.sortBy(t,function(t){return t.get(e)},this):1===e.length?i.sortBy(t,e,this):t.sort(i.bind(e,this))},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new e.Model;this.addEmptyView(i,t),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n,r=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el),s=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(s)&&(s=s.call(this,t,this._emptyViewIndex));var a=this.buildChildView(t,e,s);a._parent=this,this.proxyChildEvents(a),a.once("render",function(){this._isShown&&o.triggerMethodOn(a,"before:show",a),r&&this._triggerBeforeAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"before:attach"))},this),this.children.add(a),this.renderChildView(a,this._emptyViewIndex),r&&this._triggerAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"attach")),this._isShown&&o.triggerMethodOn(a,"show",a)},getChildView:function(t){var e=this.getOption("childView");if(!e)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(t,e,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[t,i]);var r=this.buildChildView(t,e,n);return this._updateIndices(r,!0,i),this.triggerMethod("before:add:child",r),this._addChildView(r,i),this.triggerMethod("add:child",r),r._parent=this,r},_updateIndices:function(t,e,i){this.getOption("sort")&&(e&&(t._index=i),this.children.each(function(i){i._index>=t._index&&(i._index+=e?1:-1)}))},_addChildView:function(t,e){var i,n=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el);this.proxyChildEvents(t),t.once("render",function(){this._isShown&&!this.isBuffering&&o.triggerMethodOn(t,"before:show",t),n&&this._triggerBeforeAttach&&(i=this._getViewAndNested(t),this._triggerMethodMany(i,this,"before:attach"))},this),this.children.add(t),this.renderChildView(t,e),n&&this._triggerAttach&&(i=this._getViewAndNested(t),this._triggerMethodMany(i,this,"attach")),this._isShown&&!this.isBuffering&&o.triggerMethodOn(t,"show",t)},renderChildView:function(t,e){return t.supportsRenderLifecycle||o.triggerMethodOn(t,"before:render",t),t.render(),t.supportsRenderLifecycle||o.triggerMethodOn(t,"render",t),this.attachHtml(this,t,e),t},buildChildView:function(t,e,n){var r=i.extend({model:t},n),s=new e(r);return o.MonitorDOMRefresh(s),s},removeChildView:function(t){return t?(this.triggerMethod("before:remove:child",t),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():t.remove(),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"destroy",t),delete t._parent,this.stopListening(t),this.children.remove(t),this.triggerMethod("remove:child",t),this._updateIndices(t,!1),t):t},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(t,e){t.$el.append(e)},_createBuffer:function(){var t=document.createDocumentFragment();return i.each(this._bufferedChildren,function(e){t.appendChild(e.el)}),t},attachHtml:function(t,e,i){t.isBuffering?t._bufferedChildren.splice(i,0,e):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,e){var i,n=this.getOption("sort")&&e<this.children.length-1;return n&&(i=this.children.find(function(t){return t._index===e+1})),i?(i.$el.before(t.el),!0):!1},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(t){var e=t||{},n=!0,r=this.children.map(i.identity);return i.isUndefined(e.checkEmpty)||(n=e.checkEmpty),this.children.each(this.removeChildView,this),n&&this.checkEmpty(),r},_shouldAddChild:function(t,e){var n=this.getOption("filter");return!i.isFunction(n)||n.call(this,t,e,this.collection)},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=i.toArray(arguments),r=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+r,n.splice(1,0,t),"undefined"!=typeof o&&i.isFunction(o[r])&&o[r].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)})},_getImmediateChildren:function(){return i.values(this.children._views)},_getViewAndNested:function(t){return[t].concat(i.result(t,"_getNestedViews")||[])},getViewComparator:function(){return this.getOption("viewComparator")}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(t){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var t={};return this.model&&(t=i.partial(this.serializeModel,this.model).apply(this,arguments)),t},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate(),i=o.Renderer.render(e,t,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(t){return this.$el.html(t),this},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);i.append(e)},_insertAfter:function(t){var e=this.getChildViewContainer(this,t);e.append(t.el)},_appendReorderedChildren:function(t){var e=this.getChildViewContainer(this);e.append(t)},getChildViewContainer:function(t,e){if(t.$childViewContainer)return t.$childViewContainer;var i,n=o.getOption(t,"childViewContainer");if(n){var r=o._getValue(n,t);if(i="@"===r.charAt(0)&&t.ui?t.ui[r.substr(4)]:t.$(r),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}else i=t.$el;return t.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.call(this,t)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(t,e,n){var r=this.getRegion(t);return r.show.apply(r,i.rest(arguments))},getChildView:function(t){return this.getRegion(t).currentView},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(t,e)},_initializeRegions:function(t){var e;this._initRegionManager(),e=o._getValue(this.regions,this,[t])||{};var n=this.getOption.call(t,"regions");n=o._getValue(n,this,[t]),i.extend(e,n),e=this.normalizeUIValues(e,["selector","el"]),this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({
constructor:function(t,e){this.view=e,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,t),this.ui=i.extend({},i.result(e,"ui"),i.result(this,"ui")),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(t){this.$el=t.$el,this.el=t.el}}),o.Behaviors=function(t,e){function i(t,n){return e.isObject(t.behaviors)?(n=i.parseBehaviors(t,n||e.result(t,"behaviors")),i.wrap(t,n,e.keys(s)),n):{}}function n(t,e){this._view=t,this._behaviors=e,this._triggers={}}function r(t){return t._uiBindings||t.ui}var o=/^(\S+)\s*(.*)$/,s={behaviorTriggers:function(t,e){var i=new n(this,e);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var s={};return e.each(n,function(i,n){var a={},u=e.clone(e.result(i,"events"))||{};u=t.normalizeUIKeys(u,r(i));var h=0;e.each(u,function(t,r){var s=r.match(o),u=s[1]+"."+[this.cid,n,h++," "].join(""),l=s[2],c=u+l,d=e.isFunction(t)?t:i[t];a[c]=e.bind(d,i)},this),s=e.extend(s,a)},this),s}};return e.extend(i,{behaviorsLookup:function(){throw new t.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t._getValue(i.behaviorsLookup,this,[e,n])[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,r){var o=i.getBehaviorClass(n,r),s=new o(n,t),a=i.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,n){e.each(n,function(n){t[n]=e.partial(s[n],t[n],i)})}}),e.extend(n.prototype,{buildBehaviorTriggers:function(){return e.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=e.clone(e.result(i,"triggers"))||{};o=t.normalizeUIKeys(o,r(i)),e.each(o,e.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(t,e,i,n){var r=n.replace(/^\S+/,function(t){return t+".behaviortriggers"+e});this._triggers[r]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=e.Router.extend({constructor:function(t){this.options=t||{},e.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[t];this.onRoute(t,n,e)}},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,n){var r=t[n];if(!r)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(e,n,i.bind(r,t))},mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(t){this._initializeRegions(t),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,t),this._initChannel(),o.Object.apply(this,arguments)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t),this._initCallbacks.run(t,this),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var n=o.Module.getClass(e),r=i.toArray(arguments);return r.unshift(this),n.create.apply(n,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=o.getOption(t,"regions");return i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(t){delete this[t],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,i.isFunction(this.initialize)&&this.initialize(t,e,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,e.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var r=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(t,e,n){var r=t,o=i.drop(arguments,3);e=e.split(".");var s=e.length,a=[];return a[s-1]=n,i.each(e,function(e,i){var s=r;r=this._getModule(s,e,t,n),this._addModuleDefinition(s,r,a[i],o)},this),r},_getModule:function(t,e,n,r,o){var s=i.extend({},r),a=this.getClass(r),u=t[e];return u||(u=new a(e,n,s),t[e]=u,t.submodules[e]=u),u},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var r=this._getDefine(i),o=this._getStartWithParent(i,e);r&&e.addDefinition(r,n),this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof o.Module?(n=e.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(t)?(n=t.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof o.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"backbone.babysitter":2,"backbone.wreqr":3}],2:[function(t,e,i){(function(t){!function(n,r){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(t,e){return r(t,e)});else if("undefined"!=typeof i){var o="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,s="undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null;e.exports=r(o,s)}else r(n.Backbone,n._)}(this,function(t,e){"use strict";var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.10",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,i){(function(t){!function(n,r){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(t,e){return r(t,e)});else if("undefined"!=typeof i){var o="undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,s="undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null;e.exports=r(o,s)}else r(n.Backbone,n._)}(this,function(t,e){"use strict";var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.5",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){return e.callback.apply(e.context,arguments)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t,e){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),t.Handlers.prototype.constructor.apply(this,arguments)},execute:function(t){t=arguments[0];var i=e.rest(arguments);this.hasHandler(t)?this.getHandler(t).apply(this,i):this.storage.addCommand(t,i)},_executeCommands:function(t,i,n){var r=this.storage.getCommands(t);e.each(r.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n,e),n.RequestResponse=function(t,e){return t.Handlers.extend({request:function(t){return this.hasHandler(t)?this.getHandler(t).apply(this,e.rest(arguments)):void 0}})}(n,e),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(i){var n=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var r="vent"===t?"on":"setHandler";e.each(i,function(i,o){this[t][r](o,e.bind(i,n))},this)}}}),n}(n),n.radio=function(t,e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=r(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(t,i,n){return function(r){var o=t._getChannel(r)[i];return o[n].apply(o,e.rest(arguments))}};return new i}(n,e),t.Wreqr})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,i){(function(n){!function(r,o){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery","modui-base"],o):"undefined"!=typeof i?e.exports=o("undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof n?n.Backbone:null,"undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,t("modui-base")):o(r._,r.Backbone,r.jQuery||r.Zepto||r.$,r.Backbone.ModuiBase)}(this,function(t,e,i,n){function r(){i(window).scroll(function(){t.each(a,function(t){t.reposition()})}),i(window).resize(function(){t.each(a,function(t){t.reposition()})})}function o(e,i){if(positionIndex=t.indexOf(i,e),-1===positionIndex)throw new Error('Could not find position "'+e+'" in the allowed positions.');return positionIndex===i.length-1?i[0]:i[positionIndex+1]}var s=i("body")[0],a=[],u="closed",h="open",l="closing",c=100,d=100,f=["bottom center","top center","right center","left center","bottom center right","bottom center left","top center right","top center left","bottom left","bottom right","top left","top right","right top","right bottom","left top","left bottom"],p=t.map(f,function(t){return t.replace(/\ /g,"-")}),g=!1;return e.ModuiPopup=n.extend({options:["target!","contents",{position:"bottom center"},{strictPositioning:!1},{distanceAway:12},{pointerOffset:0},{keepWithinRect:function(){return{top:i(window).scrollTop(),bottom:i(window).scrollTop()+i(window).height(),left:0,right:i(window).width()}}},{closeOnOutsideClick:!0},"onClose","signature","zIndex",{extraClassName:""},{kPointerHeight:10}],passMessages:{"*":"."},className:"modui-popup",initialize:function(){var t=this;this._setupTargetEl(),this._setState(u),this.closeOnOutsideClick&&setTimeout(function(){t.$el.bind("clickoutside",function(e){e.target===t.targetEl.get(0)||i.contains(t.targetEl.get(0),e.target)||t.close()})}),g||(r(),g=!0)},render:function(){if(t.isString(this.contents)?this.$el.html('<div class="html-contents">'+this.contents+"</div>"):t.isObject(this.contents)&&t.isFunction(this.contents.render)?(this.$el.html(""),this.$el.append(this.contents.$el),this.contents.render(),this.contents.delegateEvents()):n.prototype.render.apply(this,arguments),t.isUndefined(this.zIndex)){if(this.targetEl.zIndex){var e=parseInt(this.$el.css("z-index"),10);(t.isNaN(e)||e<=this.targetEl.zIndex())&&this.$el.css("z-index",this.targetEl.zIndex()+1)}}else this.$el.css("z-index",this.zIndex)},close:function(){var e=this;this.state===h&&(this.$el.unbind("clickoutside"),this._setState(l),this.spawn("closing"),setTimeout(function(){e.state===l&&(e.remove(),a=t.without(a,e),e.spawn("closed"))},c),t.isFunction(this.onClose)&&this.onClose.apply(this,arguments))},reposition:function(e,n){var r=this;t.isUndefined(e)&&(e=[],this.currentPosition&&"open"===this.state&&e.push(this.currentPosition),t.isArray(this.position)?e=e.concat(this.position):e.push(this.position),this.strictPositioning||(e=t.union(e,f))),e=t.unique(e),t.isUndefined(n)&&(n=!0);var s,a,u=Math.round(this.targetEl.outerWidth()),h=Math.round(this.targetEl.outerHeight()),l=Math.round(this.$el.outerWidth()),c=Math.round(this.$el.outerHeight()),d=Math.round((this.$el.outerWidth(!0)-this.$el.outerWidth())/2),g=this.kPointerHeight,m=Math.round(g+.66*g),v=i(window),y=Math.round(v.outerWidth()),w=(Math.round(v.outerHeight()),this.distanceAway),_=this.targetEl.offset(),b=this.pointerOffset,C=a=t.first(e),x=!1,M={},E=!1,k=!1;do{if(!t.contains(f,C))throw new Error("Invalid position for popup: "+C);switch(C){case"bottom center":s={top:_.top+h+w-d,left:Math.round(_.left+u/2-l/2+b)-d,bottom:"auto",right:"auto"};break;case"top center":s={bottom:"auto",left:Math.round(_.left+u/2-l/2+b)-d,top:_.top-c-g-w,right:"auto"};break;case"right top":s={top:Math.round(_.top+b)-d,left:_.left+u+w-d,bottom:"auto",right:"auto"};break;case"right bottom":s={top:Math.round(_.top+h+b)-d,left:_.left+u+w-d,bottom:"auto",right:"auto"};break;case"right center":s={top:Math.round(_.top+h/2-c/2+b)-d,left:_.left+u+w-d,bottom:"auto",right:"auto"};break;case"left top":s={top:Math.round(_.top+b)-d,right:y-_.left+w-d,left:"auto",bottom:"auto"};break;case"left bottom":s={top:Math.round(_.top+h+b)-d,right:y-_.left+w-d,left:"auto",bottom:"auto"};break;case"left center":s={top:Math.round(_.top+h/2-c/2+b)-d,right:y-_.left+w-d,left:"auto",bottom:"auto"};break;case"bottom center right":s={top:_.top+h+w-d,left:Math.round(_.left+u/2)-d-m+b,right:"auto",bottom:"auto"};break;case"bottom center left":s={top:_.top+h+w-d,left:"auto",right:y-Math.round(_.left+u/2)-d-m+b,bottom:"auto"};break;case"top center right":s={top:_.top-c-g-w,left:Math.round(_.left+u/2)-d-m+b,right:"auto",bottom:"auto"};break;case"top center left":s={top:_.top-c-g-w,left:"auto",right:y-Math.round(_.left+u/2)-d-m+b,bottom:"auto"};break;case"bottom right":s={top:_.top+h+w-d,right:y-(_.left+u)+b-d,bottom:"auto",left:"auto"};break;case"bottom left":s={top:_.top+h+w-d,left:_.left+b-d,right:"auto",bottom:"auto"};break;case"top right":s={top:_.top-c-g-w,bottom:"auto",right:y-(_.left+u)+b-d,left:"auto"};break;case"top left":s={bottom:"auto",left:_.left+b-d,top:_.top-c-g-w,right:"auto"}}this.$el.css(s).removeClass("top left bottom right").removeClass(p.join(" ")).addClass(C.split(" ")[0]).addClass(C.replace(/\ /g,"-")),M[C]=this._getDegreeOfUndesirabilityOfCurrentPosition();var V=0!==M[C];V?C===a&&x?(E=!0,k=!0):(x=!0,C=o(C,e)):k=!0}while(!k);if(E&&e.length>1){var S=t.first(t.sortBy(t.pairs(M),function(t){return t[1]+(t[0]===r.currentPosition&&"open"===r.state?-1:0)}))[0];E=this.reposition([S])}if(l!==Math.round(this.$el.outerWidth())||c!==Math.round(this.$el.outerHeight())){if(!n)return!1;E=this.reposition([C],!1)}return this.currentPosition=C,!E},_onSubviewsRendered:function(){t.isUndefined(this.extraClassName)||this.$el.addClass(this.extraClassName)},_getDegreeOfUndesirabilityOfCurrentPosition:function(){var e=this.$el.offset();if(!e)return!1;var n=this.$el.outerWidth(),r=this.$el.outerHeight(),o={top:e.top,right:e.left+n,bottom:e.top+r,left:e.left},s=t.result(this,"keepWithinRect"),a=Math.max(0,Math.min(o.right,s.right)-Math.max(o.left,s.left)),u=Math.max(0,Math.min(o.bottom,s.bottom)-Math.max(o.top,s.top)),h=n*r,l=h-a*u,c={top:0,left:0,right:i(document).width(),bottom:i(document).height()};a=Math.max(0,Math.min(o.right,c.right)-Math.max(o.left,c.left)),u=Math.max(0,Math.min(o.bottom,c.bottom)-Math.max(o.top,c.top));var d=h-a*u;return l+10*d},_onOptionsChanged:function(t){"target"in t&&this._setupTargetEl(),"contents"in t&&this.render(),this.reposition()},_getParentView:function(){for(var e=null,i=this.targetEl;i.length>0&&i[0]!==s;){var n=i.data("view");if(n&&t.isFunction(n.render)){e=n;break}i=i.parent()}return e},_setState:function(t){this.state=t,this.$el.attr("data-state",this.state),t===h&&(this.timeOpened=(new Date).getTime())},_setupTargetEl:function(){var e=this;this.targetEl=t.isObject(this.target)&&t.isFunction(this.target.render)?this.target.$el:this.target,this.targetEl.on("remove",function(){e.close()})}},{open:function(e){var n;if(e.signature){var r=t.filter(a,function(t){return t.signature===e.signature&&t.state===h});if(r.length){var o=r.pop();n=o,n.setOptions(e),t.each(r,function(t){t.close()})}}return n||(n=new this(e),i("body").append(n.$el),n.render(),n.reposition(),a.push(n)),n._setState(h),n}}),i(document).bind("mousedown",function(e){t.each(a,function(t){if(t.closeOnOutsideClick&&t.state===h&&(new Date).getTime()-t.timeOpened>d){var n=t.$el.get(0);n===e.target||i.contains(n,e.target)||t.close()}})}),e.ModuiPopup})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"modui-base":5}],5:[function(t,e,i){(function(n){!function(r,o){"function"==typeof define&&define.amd?define(["underscore","backbone","backbone.View","backbone-view-options","backbone-courier","backbone-handle","backbone-subviews"],o):"undefined"!=typeof i?e.exports=o("undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof n?n.Backbone:null,("undefined"!=typeof window?window.Backbone:"undefined"!=typeof n?n.Backbone:null).View,t("backbone-view-options"),t("backbone-courier"),t("backbone-handle"),t("backbone-subviews")):o(r._,r.Backbone,r.Backbone.View,r.Backbone.ViewOptions,r.Backbone.Courier,r.Backbone.Handle,r.Backbone.Subviews)}(this,function(t,e,i,n,r,o,s){return e.ModuiBase=i.extend({className:"view",options:[],constructor:function(t){o.add(this),n.add(this),this.setOptions(t),r.add(this),s.add(this);var e=i.prototype.constructor.apply(this,arguments);return e},render:function(){if(this.template){var e=this.getOptions();this.model&&t.extend(e,this.model.attributes),t.extend(e,this._getTemplateData()),this.$el.html(this._renderTemplate(e))}return this.resolveHandles(),this},_getTemplateData:function(){return{}},_renderTemplate:function(e){var i;return t.isFunction(this.template)?i=this.template(e):this.template.render&&(i=this.template.render(e)),i},_onSubviewsRendered:function(){}}),e.ModuiBase})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"backbone-courier":6,"backbone-handle":7,"backbone-subviews":8,"backbone-view-options":9}],6:[function(t,e,i){(function(t){!function(n,r){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery"],r):"undefined"!=typeof i?e.exports=r("undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,("undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null).$):r(n._,n.Backbone,n.jQuery||n.Zepto||n.$)}(this,function(t,e,i){var n=/^(\S+)\s*(.*)$/,r=t.isFunction(i)?i("body")[0]:null;return e.Courier={},e.Courier.add=function(e){function i(e){t.isFunction(e.$el.data)&&!e.$el.data("view")&&e.$el.data("view",e)}function o(e,i,r){var o=[];for(var s in e){var a=s.match(n),u=a[1],h=a[2],l=new RegExp("^"+u.replace(/\*/g,"[\\w]*")+"$");l.test(i.name)&&(""!==h&&r._getChildViewNamed(h)!==i.source||o.push({eventName:u,subviewName:h,value:e[s]}))}return o.length>1&&(o=t.sortBy(o,function(t){var e=t.eventName.replace("*",""),i=""!==t.subviewName,n=(i?1e3:0)+e.length;return-n})),o.length?o[0].value:null}var s={setElement:e.setElement};e.spawn=function(i,n){if(t.isString(i))i={name:i,data:n};else if(t.isUndefined(i.name))throw new Error("Undefined message name.");i.source=e,i.data=t.isUndefined(i.data)?{}:i.data,this.trigger(i.name,i.data);var r,s,a="!"===i.name.charAt(i.name.length-1),u=this._getParentView();for("removeButtonClicked"===i.name&&console.log("gotit");u;){if(t.isObject(u.onMessages)&&(s=o(u.onMessages,i,u),null!==s)){var h=s;if(t.isFunction(h)||(h=u[s]),!h)throw new Error('Method "'+s+'" does not exist');var l=h.call(u,i.data,i.source,i.name);if(a)return l}r=a;var c=t.result(u,"passMessages");if(t.isObject(c)&&(s=o(c,i,u),null!==s)){if("."===s);else{if(!t.isString(s))throw new TypeError("Values of passMessages hash should be strings.");i.name=s}r=!0}if(!r)break;i.source=u,u=u._getParentView()}},t.isFunction(e._getParentView)||(e._getParentView=function(){for(var e=null,i=this.$el.parent();i.length>0&&i[0]!==r;){var n=i.data("view");if(n&&t.isFunction(n.render)){e=n;break}i=i.parent()}return e}),t.isFunction(e._getChildViewNamed)||(e._getChildViewNamed=function(e){return t.isObject(this.subviews)?this.subviews[e]:null}),e.setElement=function(t,n){var r=s.setElement.call(this,t,n);return i(e),r},e.$el&&i(e)},e.Courier})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,i){(function(t){var n=/^(\S+)\s*(.*)$/;!function(n,r){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery"],r):"undefined"!=typeof i?e.exports=r("undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,("undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null).$):r(n._,n.Backbone,n.jQuery||n.Zepto||n.$)}(this,function(t,e,i){return e.Handle={},e.Handle.add=function(e){var i={delegateEvents:e.delegateEvents};e.resolveHandles=function(){var e=this;this.ui&&(this.uiBindings||(this.uiBindings=t.result(this,"ui")),this.ui={},t.each(t.keys(this.uiBindings),function(t){var i=e.uiBindings[t],n="!"===i[i.length-1];if(n&&(i=i.slice(0,i.length-1)),e.ui[t]=e.$(i),n){if(1!==e.ui[t].length)throw new Error('Expected selector "'+i+'" to match 1 element, but '+e.ui[t].length+" found.");e.uiBindings[t]=i}}))},e.delegateEvents=function(e){return t.isFunction(this.events)&&(this.events=this.events.call(this.events)),e=e||t.clone(this.events)||{},e=this._exapandUIHandlesInHash.call(this,e),i.delegateEvents.call(this,e)},e._exapandUIHandlesInHash=function(e){var i={},r=this.uiBindings||t.result(this,"ui");return r?(t.each(e,function(e,o){var s=o.match(n),a=s[1],u=s[2];if(""!==u&&!t.isUndefined(r[u])){var h=r[u];"!"===h[h.length-1]&&(h=h.slice(0,h.length-1)),o=a+" "+h}i[o]=e}),i):e}},e.Handle})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,i){(function(t){!function(n,r){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery"],r):"undefined"!=typeof i?e.exports=r("undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null,("undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null).$):r(n._,n.Backbone,n.jQuery||n.Zepto||n.$)}(this,function(t,e,i){function n(){this.subviews||(this.subviews={}),t.each(this.subviews,function(t){t.$el.detach()})}function r(){var e=this;this.subviewCreators=this.subviewCreators||{},this.subviewCreators=t.result(this,"subviewCreators"),this.$("[data-subview]").each(function(){var n,r=i(this),o=r.attr("data-subview");if(t.isUndefined(e.subviews[o])){if(n=e._createSubview(o,r),null===n)return;e.subviews[o]=n}else n=e.subviews[o];r.replaceWith(n.$el)}),t.each(this.subviews,function(t){t.render()}),t.isFunction(this.onSubviewsRendered)&&this.onSubviewsRendered.call(this),t.isFunction(this._onSubviewsRendered)&&this._onSubviewsRendered.call(this)}return e.Subviews={},e.Subviews.add=function(e){var i={render:e.render,remove:e.remove};e.render=function(){var t=Array.prototype.slice.call(arguments);n.call(this);var e=i.render.apply(this,t);return r.call(this),e},e.remove=function(){return this.removeSubviews(),i.remove.call(this)},e.removeSubviews=function(){this.subviews&&(t.each(this.subviews,function(t){t.remove()}),delete this.subviews)},e._createSubview=function(e,i){var n=this.subviewCreators[e];if(t.isUndefined(n))throw new Error("Can not find subview creator for subview named: "+e);return n.apply(this)}},e.Subviews})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,i){(function(t){!function(n,r){"function"==typeof define&&define.amd?define(["underscore","backbone"],r):"object"==typeof i?e.exports=r("undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof t?t.Backbone:null):n.returnExports=r(n._,n.Backbone)}(this,function(t,e){function i(e){var i={};if(!t.isArray(e))throw new Error("Option declarations must be an array.");return t.each(e,function(e){var n,r,o;if(r=!1,o=void 0,t.isString(e))n=e;else{if(!t.isObject(e))throw new Error("Each element in the option declarations array must be either a string or an object.");n=t.first(t.keys(e)),o=t.isFunction(e[n])?e[n]:t.clone(e[n])}"!"===n[n.length-1]&&(r=!0,n=n.slice(0,n.length-1)),i[n]=i[n]||{},i[n].required=r,t.isUndefined(o)||(i[n].defaultValue=o)}),i}return e.ViewOptions={},e.ViewOptions.add=function(e,n){t.isUndefined(n)&&(n="options"),e.setOptions=function(e){var r=this,o={},s={},a=t.result(this,n);if(!t.isUndefined(a)){var u=i(a);t.each(u,function(i,n){var a=i.required,u=i.defaultValue;if(a){if((!e||!t.contains(t.keys(e),n))&&t.isUndefined(r[n]))throw new Error('Required option "'+n+'" was not supplied.');if(e&&t.contains(t.keys(e),n)&&t.isUndefined(e[n]))throw new Error('Required option "'+n+'" can not be set to undefined.')}if(e&&n in e&&!t.isUndefined(e[n])){var h=r[n],l=e[n];t.isUndefined(h)||h===l||(s[n]=h,o[n]=l),r[n]=l}else t.isUndefined(r[n])&&(r[n]=u)})}t.keys(o).length>0&&(t.isFunction(r.onOptionsChanged)?r.onOptionsChanged(o,s):t.isFunction(r._onOptionsChanged)&&r._onOptionsChanged(o,s))},e.getOptions=function(){var e=t.result(this,n);if(t.isUndefined(e))return{};var r=i(e),o=t.keys(r);return t.pick(this,o)}},e.ViewOptions})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,i){(function(t){/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(n,r){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(t){return n.Bloodhound=r(t)}):"object"==typeof i?e.exports=r("undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null):n.Bloodhound=r(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,r;return function(){var o,s,a=this,u=arguments;return o=function(){n=null,i||(r=t.apply(a,u))},s=i&&!n,clearTimeout(n),n=setTimeout(o,e),s&&(r=t.apply(a,u)),r}},throttle:function(t,e){var i,n,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)},function(){var u=new Date,h=e-(u-s);return i=this,n=arguments,0>=h?(clearTimeout(r),r=null,s=u,o=t.apply(i,n)):r||(r=setTimeout(a,h)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var r=[];return e.each(i,function(i){r=r.concat(t(e.toStr(n[i])))}),r}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),r=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new r(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),o=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(e){return t.parseJSON(e)}function s(t){var e,i,n=[],r=a.length;for(e=0;r>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(u){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),o(this.ls.getItem(this._prefix(t)))},set:function(t,i,o){return e.isNumber(o)?this._safeSet(this._ttlKey(t),r(n()+o)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=o(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(i)&&n()>i)}}),i}(),s=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):a}var n=0,o={},s=6,a=new r(10);return i.setMaxPendingRequests=function(t){s=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),l._cache.set(u,t)}function r(){e(!0)}function a(){n--,delete o[u],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var u,h,l=this;u=this._fingerprint(t),this.cancelled||u!==this.lastReq||((h=o[u])?h.done(i).fail(r):s>n?(n++,o[u]=this._send(t).done(i).fail(r).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var r,o;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},o=this._fingerprint(i),this.cancelled=!1,this.lastReq=o,(r=this._cache.get(o))?n(null,r):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[u]=[],t[a]={},t}function o(t){for(var e={},i=[],n=0,r=t.length;r>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function s(t,e){var i=0,n=0,r=[];t=t.sort(),e=e.sort();for(var o=t.length,s=e.length;o>i&&s>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(r.push(t[i]),i++,n++);return r}var a="c",u="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,s;i.datums[o=i.identify(t)]=t,s=n(i.datumTokenizer(t)),e.each(s,function(t){var e,n,s;for(e=i.trie,n=t.split("");s=n.shift();)e=e[a][s]||(e[a][s]=r()),e[u].push(o)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,r,h=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,o;if(r&&0===r.length)return!1;for(e=h.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(o=e[u].slice(0),void(r=r?s(r,o):o)):(r=[],!1)}),r?e.map(o(r),function(t){return h.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new o(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,r.transform(e))}var n,r=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),h=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:r.transform(i))}var n,r=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),l=function(){"use strict";function n(n){var r;return n?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(r,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function r(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=o(i),i.limiter=s(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function o(t){function e(t,e){return e.url=o(e.url,t),e}function i(t,e){return e.url=e.url.replace(s,encodeURIComponent(t)),e}function n(t,e){return e}var r,o,s;return r=t.prepare,o=t.replace,s=t.wildcard,r?r:r=o?e:t.wildcard?i:n}function s(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var r,o,s;return r=t.limiter,o=t.rateLimitBy,s=t.rateLimitWait,r||(r=/^throttle$/i.test(o)?n(s):i(s)),r}function a(i){return function(n){function r(t){e.defer(function(){s.resolve(t)})}function o(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return i(n,r,o),s}}return function(i){var o,s;return o={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(o,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),s=i.sorter,i.sorter=s?function(t){return t.sort(s)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=r(i.remote),i}}(),c=function(){"use strict";function i(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new h(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=r),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void i.resolve())}var i,n,r=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function r(t){var i=[];e.each(t,function(t){!e.some(o,function(e){return s.identify(t)===s.identify(e)})&&i.push(t)}),n&&n(i)}var o,s=this;return o=this.sorter(this.index.search(t)),i(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return c}),function(n,r){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return r(t)}):"object"==typeof i?e.exports=r("undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null):r(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,r;return function(){var o,s,a=this,u=arguments;return o=function(){n=null,i||(r=t.apply(a,u))},s=i&&!n,clearTimeout(n),n=setTimeout(o,e),s&&(r=t.apply(a,u)),r}},throttle:function(t,e){var i,n,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)},function(){var u=new Date,h=e-(u-s);return i=this,n=arguments,0>=h?(clearTimeout(r),r=null,s=u,o=t.apply(i,n)):r||(r=setTimeout(a,h)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var s,a;return a=e.mixin({},o,t),s={css:r(),classes:a,html:i(a),selectors:n(a)},{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(t){e.mixin(t,s)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var o={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,r;return n="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var r;return r=t.Event(n+e),(i=i||[]).unshift(r),this.$el.trigger.apply(this.$el,i),r},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),r=function(){"use strict";function t(t,e,i,n){var r;if(!i)return this;for(e=e.split(u),i=n?a(i,n):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,i,n,r,s;if(!this._callbacks)return this;for(t=t.split(u),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)r=o(i.sync,this,[e].concat(n)),s=o(i.async,this,[e].concat(n)),r()&&h(s);return this}function o(t,e,i){function n(){for(var n,r=0,o=t.length;!n&&o>r;r+=1)n=t[r].apply(e,i)===!1;return!n}return n}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,h=s();return{onSync:i,onAsync:e,off:n,trigger:r}}(),o=function(t){"use strict";function i(t,i,n){for(var r,o=[],s=0,a=t.length;a>s;s++)o.push(e.escapeRegExChars(t[s]));return r=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(r):new RegExp(r,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var i,n,o;return(i=a.exec(e.data))&&(o=t.createElement(r.tagName),r.className&&(o.className=r.className),n=e.splitText(i.index),n.splitText(i[0].length),o.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(o,n)),!!i}function s(t,e){for(var i,n=3,r=0;r<t.childNodes.length;r++)i=t.childNodes[r],i.nodeType===n?r+=e(i)?1:0:s(i,e)}var a;r=e.mixin({},n,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],a=i(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),s=function(){"use strict";function i(i,r){i=i||{},i.input||t.error("input is missing"),r.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!s(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!s(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=o(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,r,o=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,r){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),r.mixin(this),this.highlight=!!i.highlight,this.name=i.name||h(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function s(i,n){function r(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||r}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,h;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},h=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(u.obj)?{val:i.data(u.val)||"",obj:i.data(u.obj)||null}:null},e.mixin(i.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var r,s=this;return r=document.createDocumentFragment(),e.each(n,function(e){var n,o;o=s._injectQuery(i,e),n=t(s.templates.suggestion(o)).data(u.obj,e).data(u.val,s.displayFn(e)).addClass(s.classes.suggestion+" "+s.classes.selectable),r.appendChild(n[0])}),this.highlight&&o({className:this.classes.highlight,node:r,pattern:i}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){s||(s=!0,t=(t||[]).slice(0,r.limit),a=t.length,r._overwrite(e,t),a<r.limit&&r.async&&r.trigger("asyncRequested",e))}function n(i){i=i||[],!o&&a<r.limit&&(r.cancel=t.noop,a+=i.length,r._append(e,i.slice(0,r.limit-a)),r.async&&r.trigger("asyncReceived",e))}var r=this,o=!1,s=!1,a=0;this.cancel(),this.cancel=function(){o=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,i,n),!s&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),u=function(){"use strict";function i(i,n){function r(e){var i=o.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(o.$node),new a(e,n)}var o=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,r)}return e.mixin(i.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,r;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>r&&this.$node.scrollTop(n+(i-r))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,r;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,r=n+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),h=function(){"use strict";function t(){u.apply(this,[].slice.call(arguments,0))}var i=u.prototype;return e.mixin(t.prototype,u.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),l=function(){"use strict";function i(i,r){var o,s,a,u,h,l,c,d,f,p,g;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),o=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),u=n(this,"isActive","isOpen","_onTabKeyed"),h=n(this,"isActive","_onEscKeyed"),l=n(this,"isActive","open","_onUpKeyed"),c=n(this,"isActive","open","_onDownKeyed"),d=n(this,"isActive","isOpen","_onLeftKeyed"),f=n(this,"isActive","isOpen","_onRightKeyed"),p=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",o,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",u,this).onSync("escKeyed",h,this).onSync("upKeyed",l,this).onSync("downKeyed",c,this).onSync("leftKeyed",d,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){
return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var r,o,s;r=document.activeElement,o=n.is(r),s=n.has(r).length>0,e.isMsie()&&(o||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,r,o,a,u;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(r=s.normalizeQuery(n),o=e.escapeRegExChars(r),a=new RegExp("^(?:"+o+")(.+$)","i"),u=a.exec(i.val),u&&this.input.setHint(n+u[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,r,o;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),r=n?n.obj:null,o=this._minLengthMet()&&this.menu.update(e),o||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function r(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function o(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(c(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function c(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function f(i){var n,r;return n=e.isJQuery(i)||e.isElement(i),r=n?t(i).first():[],r.length?r:null}var p,g,m;p=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(r,c){function d(){var i,d,m,v,y,w,_,b,C,x,M;e.each(c,function(t){t.highlight=!!r.highlight}),i=t(this),d=t(p.html.wrapper),m=f(r.hint),v=f(r.menu),y=r.hint!==!1&&!m,w=r.menu!==!1&&!v,y&&(m=o(i,p)),w&&(v=t(p.html.menu).css(p.css.menu)),m&&m.val(""),i=a(i,p),(y||w)&&(d.css(p.css.wrapper),i.css(y?p.css.input:p.css.inputWithNoHint),i.wrap(d).parent().prepend(y?m:null).append(w?v:null)),M=w?h:u,_=new n({el:i}),b=new s({hint:m,input:i},p),C=new M({node:v,datasets:c},p),x=new l({input:b,menu:C,eventBus:_,minLength:r.minLength},p),i.data(g.www,p),i.data(g.typeahead,x)}var p;return c=e.isArray(c)?c:[].slice.call(arguments,1),r=r||{},p=i(r.classNames),this.each(d)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return r(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return r(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return r(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=p,this}}()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,i){"use strict";e.exports=function(t,e,i){var n=i.$,r={output:n("#citation-output")},o=[{author:"Copeland, Edward",title:"“Money”",container:!1,callouts:{author:"The author (21) and title (27) of the source, found on the first page of the essay.",title:"The author (21) and title (27) of the source, found on the first page of the essay."}},{author:"edited by Copeland and Juliet McMaster",title:"_The Cambridge Companion to Jane Austen_",publisher:"Cambridge UP",pubdate:"1997",location:"pp. 131–48",callouts:{author:"The book has two editors, one of whom is Copeland. They are <strong>other contributors</strong>. Since Edward Copeland is named twice, his first name is omitted in the second occurrence. See p. xxx.",title:"The essay is contained in a book titled <em>The Cambridge Companion to Jane Austen</em>. The book is thus the container of the essay. In this tool, we use underscores to impart <em>_italics_</em>.",version:"The book shows no sign of being a <strong>version</strong> (such as a second edition). See p. xxx.",number:"No <strong>number</strong> is displayed (such as a volume number). See p. xxx.",publisher:"The <strong>publisher</strong> is identified on the title page.",pubdate:"The <strong>publication date</strong> doesn’t appear on the title page, but a copyright date is given on the reverse. The latest copyright date should usually be treated as the publication date unless the copyright page indicates that the book was significantly changed at a later date (not just reprinted)",location:"For an essay in a book anthology, the <strong>location</strong> is the range of page numbers from the starting one to theending one. See p. xxx."}}],s=function(){r.output.hide(),e.Content.show(t.Views.Layout,{forceShow:!0,preventDestroy:!0}),t.Views.Layout.showChildView("intro",new t.Views.Intro),t.Views.Layout.showChildView("form",new t.Views.Citation.CollectionView({collection:new t.Models.Citation.Collection([{container:!1},{}])}))},a=function(){r.output.show(),e.Content.show(t.Views.Layout,{forceShow:!0,preventDestroy:!0}),t.Views.Layout.showChildView("intro",new t.Views.Step1),t.Views.Layout.showChildView("form",new t.Views.Citation.CollectionView({collection:new t.Models.Citation.Collection(o)}))};return i.Marionette.Controller.extend({showCitationIntro:s,showCitationForm:a})}},{}],12:[function(t,e,i){e.exports=function(e,i,n){"use strict";t("./links")(e,i,n),t("./models/citation-model.js")(e,i,n),t("./views/citation-view.js")(e,i,n),t("./views/citation-intro-view.js")(e,i,n),t("./views/citation-step1-view.js")(e,i,n),t("./views/layout-view.js")(e,i,n);var r=t("./routers")(e,i,n),o=t("./controllers")(e,i,n);i.addInitializer(function(){e.router=new r({controller:new o})})}},{"./controllers":11,"./links":13,"./models/citation-model.js":14,"./routers":15,"./views/citation-intro-view.js":21,"./views/citation-step1-view.js":22,"./views/citation-view.js":23,"./views/layout-view.js":24}],13:[function(t,e,i){"use strict";e.exports=function(t,e,i){var n=i.$;n("body").on("click","a",function(t){if(i.history.options&&i.history.options.pushState){var e=n(this).attr("href");e&&"#"===e.charAt(0)&&(t.preventDefault(),e="#"===e?"/":e,i.history.navigate(e.substring(1),!0),window.scrollTo(0,0))}})}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e,i){t.Models=t.Models||{};var n=i._,r=i.Model.extend({defaults:function(){return{title:"",author:"",version:"",number:"",publisher:"",pubdate:"",location:"",container:!0,containerNumber:1,callouts:{},order:this.collection.nextOrder()}},getCitationString:function(){var t=this.attributes,e=["title","author","version","number","publisher","pubdate","location"],i=["author","title"],r=function(t,e,i){return e=(e+i).replace(/^[\"]/,"“").replace(/[\"”]$/,i+"”"),e.replace(/_([^_]+)_/g,"<em>$1</em>")},o=this.attributes.container?e:i,s=n.filter(o,function(e){var i=t[e];return"string"==typeof i&&""!==i.replace(/\s/g,"")}),a=s.length-1,u=s.map(function(e,i){var n=i===a?".":",";return'<span class="field-'+e+'">'+r(e,t[e],n)+"</span>"});return'<span class="container-'+this.attributes.order+'">'+u.join(" ")+"</span> "}}),o=i.Collection.extend({model:r,comparator:"order",initialize:function(){this.bind("add remove",this.updateNumbers)},updateNumbers:function(){this.each(function(t,e){t.set("containerNumber",e)})},counter:0,nextOrder:function(){return this.counter=this.counter+1,this.counter}});t.Models.Citation={Model:r,Collection:o}}},{}],15:[function(t,e,i){"use strict";e.exports=function(t,e,i){return i.Marionette.AppRouter.extend({appRoutes:{"":"showCitationIntro","step-1":"showCitationForm"}})}},{}],16:[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+="<div> <p>This section will allow you to explore MLA citation style and the <strong>list of core elements</strong> through a series of examples. At the end of the steps, you will be able to explore the list of core elements interactively.</p> <p>This tool demonstrates the basic concepts of MLA citation style and makes reference to sections of the <em>Handbook</em> where concepts are explained in greater detail and many additional examples are given. If you already have the <em>Handbook</em>, you may want to keep it on hand as you proceed.</p> <p>This is the <strong>list of core elements</strong>:</p> </div>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="citation-output"> <h4>Assembled citation</h4> <p id="citation-el"></p> </div> <div id="citation-intro"></div> <div id="citation-form"></div> <div id="citation-thread"><a class="button" href="#step-1">Next &gt;</a></div>';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+="<div> <h3>Citing an essay in a book collection</h3> </div>";return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="<h3>Container "+(null==(__t=containerNumber)?"":__t)+' </h3> <p class="field"> <input id="container-title- '+(null==(__t=order)?"":__t)+' " name="title" type="text" '+(null==(__t=title?' value="'+title+'"':"")?"":__t)+' placeholder="Title of container"> <label for="container-title- '+(null==(__t=order)?"":__t)+' ">Title of container</label> </p> <p class="field"> <input id="container-author- '+(null==(__t=order)?"":__t)+' " name="author" type="text" '+(null==(__t=author?' value="'+author+'"':"")?"":__t)+' placeholder="Other contributor or contributors"> <label for="container-author- '+(null==(__t=order)?"":__t)+' ">Other contributors</label> </p> <p class="field"> <input id="container-version- '+(null==(__t=order)?"":__t)+' " name="version" type="text" '+(null==(__t=version?' value="'+version+'"':"")?"":__t)+' placeholder="Version number"> <label for="container-version- '+(null==(__t=order)?"":__t)+' ">Version</label> </p> <p class="field"> <input id="container-number- '+(null==(__t=order)?"":__t)+' " name="number" type="text" '+(null==(__t=number?' value="'+number+'"':"")?"":__t)+' placeholder="Volume, issue, or record number"> <label for="container-number- '+(null==(__t=order)?"":__t)+' ">Number</label> </p> <p class="field"> <input id="container-publisher- '+(null==(__t=order)?"":__t)+' " name="publisher" type="text" '+(null==(__t=publisher?' value="'+publisher+'"':"")?"":__t)+' placeholder="Publisher"> <label for="container-publisher- '+(null==(__t=order)?"":__t)+' ">Publisher</label> </p> <p class="field"> <input id="container-pubdate- '+(null==(__t=order)?"":__t)+' " name="pubdate" type="text" '+(null==(__t=pubdate?' value="'+pubdate+'"':"")?"":__t)+' placeholder="Publication date"> <label for="container-pubdate- '+(null==(__t=order)?"":__t)+' ">Publication date</label> </p> <p class="field final-element"> <input id="container-location- '+(null==(__t=order)?"":__t)+' " name="location" type="text" '+(null==(__t=location?' value="'+location+'"':"")?"":__t)+' placeholder="Page numbers, DOI, URL"> <label for="container-location- '+(null==(__t=order)?"":__t)+' ">Location</label> </p> <p class="form-controls"> <button class="add-container" type="button">+ Add a larger container</button> <button class="remove-container" type="button"></button> </p>';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(require,module,exports){(function(global){"undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null;module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<p class="field final-element"> <input id="container-author- '+(null==(__t=order)?"":__t)+' " name="author" type="text" '+(null==(__t=author?' value="'+author+'"':"")?"":__t)+' placeholder="Author of source"> <label for="container-author- '+(null==(__t=order)?"":__t)+' ">Author</label> </p> <p class="field final-element"> <input id="container-title- '+(null==(__t=order)?"":__t)+' " name="title" type="text" '+(null==(__t=title?' value="'+title+'"':"")?"":__t)+' placeholder="Title of source"> <label for="container-title- '+(null==(__t=order)?"":__t)+' ">Title of source</label> </p> <p class="form-controls"> <button class="add-container" type="button">+ Add a larger container</button> </p>';return __p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,i){"use strict";var n=t("../templates/citation-intro.tpl");e.exports=function(t,e,i){var r=i.Marionette.ItemView.extend({getTemplate:n});t.Views=t.Views||{},t.Views.Intro=r}},{"../templates/citation-intro.tpl":16}],22:[function(t,e,i){"use strict";var n=t("../templates/citation-step-1.tpl");e.exports=function(t,e,i){var r=i.Marionette.ItemView.extend({getTemplate:n});t.Views=t.Views||{},t.Views.Step1=r}},{"../templates/citation-step-1.tpl":18}],23:[function(t,e,i){"use strict";var n=t("modui-popup"),r=t("../templates/source-form.tpl"),o=t("../templates/container-form.tpl");e.exports=function(t,e,i){var s=i.$,a=i._,u=i.Marionette.ItemView.extend({tagName:"fieldset",getTemplate:function(){return this.model.get("container")?o:r},className:function(){return this.model.get("container")?"container":"source"},events:{"click .remove-container":"removeContainer","focus input":"showPopup","blur input":"hideHilite","keyup input":"updateField"},updateField:function(t){var e=s(t.target),i={};i[e.attr("name")]=e.val(),this.model.set(i)},removeContainer:function(){this.model.collection.remove(this.model)},showPopup:function(t){var e=s(t.target).attr("name");this.model.attributes.callouts[e]&&(n.open({target:s(t.target).closest(".field"),position:"right center",contents:this.model.attributes.callouts[e]}),console.log(e)),s(".citation-output span").removeClass("hilite"),s(".container-"+this.model.attributes.order+" .field-"+e).addClass("hilite")},hideHilite:function(){s(".citation-output span").removeClass("hilite")},serializeData:function(){return this.model.toJSON()}}),h=i.Marionette.CollectionView.extend({childView:u,tagName:"div",className:"citation",events:{"click .add-container":"addContainer","keyup input":"updateCitation"},onRender:function(){this.updateCitation()},addContainer:function(){this.collection.add({})},onRemoveChild:function(){this.updateCitation()},updateCitation:function(){var t=a.map(this.collection.models,function(t){return t.getCitationString()});s("#citation-el").html(t.join(""))}});t.Views=t.Views||{},t.Views.Citation={ItemView:u,CollectionView:h}}},{"../templates/container-form.tpl":19,"../templates/source-form.tpl":20,"modui-popup":4}],24:[function(t,e,i){"use strict";e.exports=function(e,i,n){var r=t("../templates/citation-layout.tpl"),o=n.Marionette.LayoutView.extend({template:r,className:"citation-template",regions:{output:"#citation-output",intro:"#citation-intro",form:"#citation-form"}});e.Views=e.Views||{},e.Views.Layout=new o}},{"../templates/citation-layout.tpl":17}],25:[function(t,e,i){e.exports=["plagiarism","works cited","How to cite a Web site","How many spaces after a period","How to cite a YouTube video"]},{}],26:[function(t,e,i){(function(e){"use strict";var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,n="undefined"!=typeof window?window._:"undefined"!=typeof e?e._:null,r="undefined"!=typeof window?window.Backbone:"undefined"!=typeof e?e.Backbone:null;r.$=i,r._=n,t("backbone.marionette");var o=new r.Marionette.Application;o.addRegions({Content:"#citation-tool"}),t("./page-menu")(i),t("./search-hints")(i),o.module("Citations",t("./citations")),o.on("start",function(){r.history.start({pushState:!0,root:"/understanding-mla-style/"})}),i("#citation-tool").length&&o.start()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./citations":12,"./page-menu":27,"./search-hints":28,"backbone.marionette":1}],27:[function(t,e,i){e.exports=function(t){"use strict";var e=t(".page-sub-menu-link"),i=t(".page-sub-menu-link, .page-sub-menu"),n=t(".page-menu"),r="page-menu-active",o=250,s=function(t){t.stopPropagation(),n.removeClass(r),document.removeEventListener("touchstart",s)};i.on({mouseover:function(){e.prop("hoverTimeout")&&e.prop("hoverTimeout",clearTimeout(e.prop("hoverTimeout"))),n.addClass(r)},mouseleave:function(){e.prop("hoverTimeout",setTimeout(function(){n.removeClass(r)},o))}}),"ontouchstart"in document.documentElement&&e.on("touchstart",function(t){1===t.touches.length&&(t.stopPropagation(),n.hasClass(r)||(t.target!==this&&t.target.parentNode!==this||t.preventDefault(),n.addClass(r),document.addEventListener("touchstart",s,!1)))})}},{}],28:[function(t,e,i){e.exports=function(e){"use strict";function i(t,i){var r=[],o=new RegExp(t,"i");e.each(n,function(t,e){o.test(e)&&r.push(e)}),i(r)}t("typeahead.js");var n=t("../data/searchTerms.json");e(".order-button-link").on("click",function(){e(this).parent().toggleClass("open")});var r={hint:!0,highlight:!0,minLength:2},o={name:"terms",source:i};e(".search-field").typeahead(r,o).on("typeahead:selected",function(){e(this).closest("form").submit()})}},{"../data/searchTerms.json":25,"typeahead.js":10}]},{},[26]);
//# sourceMappingURL=main.js.map
